Array.prototype.indexOf||(Array.prototype.indexOf=function(c,a){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var b=this.length>>>0;a=+a||0;Infinity===Math.abs(a)&&(a=0);0>a&&(a+=b,0>a&&(a=0));for(;a<b;a++)if(this[a]===c)return a;return-1});
Date.now||(Date.now=function(){return +new Date});
if(!Function.prototype.bind){Function.prototype.bind=function(e){function s(){}if(typeof this!=="function"){throw new TypeError("Bind must be called on a function")}var t=[].slice,n=t.call(arguments,1),r=this,i=function(){return r.apply(this instanceof s?this:e||{},n.concat(t.call(arguments)))};s.prototype=r.prototype;i.prototype=new s;return i}}
if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
(function(n){function i(a,d){this.setNotifyMethod(a);this.setNotifyContext(d)}function j(a,d,b){this.name=a;this.body=d;this.type=b}function k(){}function m(){}function l(){this.subCommands=[];this.initializeMacroCommand()}function g(a,d){this.mediatorName=a||this.constructor.NAME;this.viewComponent=d}function h(a,d){this.proxyName=a||this.constructor.NAME;null!=d&&this.setData(d)}function b(a){if(null!=b.instanceMap[a])throw Error(b.MULTITON_MSG);this.initializeNotifier(a);b.instanceMap[a]=this;
this.initializeFacade()}function c(a){if(null!=c.instanceMap[a])throw Error(c.MULTITON_MSG);this.multitonKey=a;c.instanceMap[this.multitonKey]=this;this.mediatorMap=[];this.observerMap=[];this.initializeView()}function e(a){if(e.instanceMap[a])throw Error(e.MULTITON_MSG);this.multitonKey=a;e.instanceMap[a]=this;this.proxyMap=[];this.initializeModel()}function f(a){if(null!=f.instanceMap[a])throw Error(f.MULTITON_MSG);this.multitonKey=a;f.instanceMap[this.multitonKey]=this;this.commandMap=[];this.initializeController()}
function p(a,d,b){for(var a=a.split("."),b=b||o.global,c,e,f=0,g=a.length;f<g;f++)c=b,e=a[f],b=null==b[e]?b[e]={}:b[e];return null==d?b:c[e]=d}null==n&&(n=window);if(!n.puremvc){i.prototype.setNotifyMethod=function(a){this.notify=a};i.prototype.setNotifyContext=function(a){this.context=a};i.prototype.getNotifyMethod=function(){return this.notify};i.prototype.getNotifyContext=function(){return this.context};i.prototype.notifyObserver=function(a){this.getNotifyMethod().call(this.getNotifyContext(),
a)};i.prototype.compareNotifyContext=function(a){return a===this.context};i.prototype.notify=null;i.prototype.context=null;j.prototype.getName=function(){return this.name};j.prototype.setBody=function(a){this.body=a};j.prototype.getBody=function(){return this.body};j.prototype.setType=function(a){this.type=a};j.prototype.getType=function(){return this.type};j.prototype.toString=function(){var a="Notification Name: "+this.getName(),a=a+("\nBody:"+(null==this.body?"null":this.body.toString()));return a+=
"\nType:"+(null==this.type?"null":this.type)};j.prototype.name=null;j.prototype.type=null;j.prototype.body=null;k.prototype.sendNotification=function(a,d,b){var c=this.getFacade();c&&c.sendNotification(a,d,b)};k.prototype.initializeNotifier=function(a){this.multitonKey=""+a;this.facade=this.getFacade()};k.prototype.getFacade=function(){if(null==this.multitonKey)throw Error(k.MULTITON_MSG);return b.getInstance(this.multitonKey)};k.prototype.multitonKey=null;k.MULTITON_MSG="multitonKey for this Notifier not yet initialized!";
m.prototype=new k;m.prototype.constructor=m;m.prototype.execute=function(){};l.prototype=new k;l.prototype.constructor=l;l.prototype.subCommands=null;l.prototype.initializeMacroCommand=function(){};l.prototype.addSubCommand=function(a){this.subCommands.push(a)};l.prototype.execute=function(a){for(;0<this.subCommands.length;){var d=new (this.subCommands.shift());d.initializeNotifier(this.multitonKey);d.execute(a)}};g.NAME="Mediator";g.prototype=new k;g.prototype.constructor=g;g.prototype.getMediatorName=
function(){return this.mediatorName};g.prototype.setViewComponent=function(a){this.viewComponent=a};g.prototype.getViewComponent=function(){return this.viewComponent};g.prototype.listNotificationInterests=function(){return[]};g.prototype.handleNotification=function(){};g.prototype.onRegister=function(){};g.prototype.onRemove=function(){};g.prototype.mediatorName=null;g.prototype.viewComponent=null;h.NAME="Proxy";h.prototype=new k;h.prototype.constructor=h;h.prototype.getProxyName=function(){return this.proxyName};
h.prototype.setData=function(a){this.data=a};h.prototype.getData=function(){return this.data};h.prototype.onRegister=function(){};h.prototype.onRemove=function(){};h.prototype.proxyName=null;h.prototype.data=null;b.prototype.initializeFacade=function(){this.initializeModel();this.initializeController();this.initializeView()};b.getInstance=function(a){if(null==a)return null;null==b.instanceMap[a]&&(b.instanceMap[a]=new b(a));return b.instanceMap[a]};b.prototype.initializeController=function(){if(null==
this.controller)this.controller=f.getInstance(this.multitonKey)};b.prototype.initializeModel=function(){if(null==this.model)this.model=e.getInstance(this.multitonKey)};b.prototype.initializeView=function(){if(null==this.view)this.view=c.getInstance(this.multitonKey)};b.prototype.registerCommand=function(a,d){this.controller.registerCommand(a,d)};b.prototype.removeCommand=function(a){this.controller.removeCommand(a)};b.prototype.hasCommand=function(a){return this.controller.hasCommand(a)};b.prototype.registerProxy=
function(a){this.model.registerProxy(a)};b.prototype.retrieveProxy=function(a){return this.model.retrieveProxy(a)};b.prototype.removeProxy=function(a){var d=null;null!=this.model&&(d=this.model.removeProxy(a));return d};b.prototype.hasProxy=function(a){return this.model.hasProxy(a)};b.prototype.registerMediator=function(a){null!=this.view&&this.view.registerMediator(a)};b.prototype.retrieveMediator=function(a){return this.view.retrieveMediator(a)};b.prototype.removeMediator=function(a){var d=null;
null!=this.view&&(d=this.view.removeMediator(a));return d};b.prototype.hasMediator=function(a){return this.view.hasMediator(a)};b.prototype.sendNotification=function(a,d,b){this.notifyObservers(new j(a,d,b))};b.prototype.notifyObservers=function(a){null!=this.view&&this.view.notifyObservers(a)};b.prototype.initializeNotifier=function(a){this.multitonKey=a};b.hasCore=function(a){return null!=b.instanceMap[a]};b.removeCore=function(a){null!=b.instanceMap[a]&&(e.removeModel(a),c.removeView(a),f.removeController(a),
delete b.instanceMap[a])};b.prototype.controller=null;b.prototype.model=null;b.prototype.view=null;b.prototype.multitonKey=null;b.instanceMap=[];b.MULTITON_MSG="Facade instance for this Multiton key already constructed!";c.prototype.initializeView=function(){};c.getInstance=function(a){if(null==a)return null;null==c.instanceMap[a]&&(c.instanceMap[a]=new c(a));return c.instanceMap[a]};c.prototype.registerObserver=function(a,d){null!=this.observerMap[a]?this.observerMap[a].push(d):this.observerMap[a]=
[d]};c.prototype.notifyObservers=function(a){if(null!=this.observerMap[a.getName()]){for(var d=this.observerMap[a.getName()],b=[],c,e=0;e<d.length;e++)c=d[e],b.push(c);for(e=0;e<b.length;e++)c=b[e],c.notifyObserver(a)}};c.prototype.removeObserver=function(a,d){for(var b=this.observerMap[a],c=0;c<b.length;c++)if(!0==b[c].compareNotifyContext(d)){b.splice(c,1);break}0==b.length&&delete this.observerMap[a]};c.prototype.registerMediator=function(a){if(null==this.mediatorMap[a.getMediatorName()]){a.initializeNotifier(this.multitonKey);
this.mediatorMap[a.getMediatorName()]=a;var d=a.listNotificationInterests();if(0<d.length)for(var b=new i(a.handleNotification,a),c=0;c<d.length;c++)this.registerObserver(d[c],b);a.onRegister()}};c.prototype.retrieveMediator=function(a){return this.mediatorMap[a]};c.prototype.removeMediator=function(a){var d=this.mediatorMap[a];if(d){for(var b=d.listNotificationInterests(),c=0;c<b.length;c++)this.removeObserver(b[c],d);delete this.mediatorMap[a];d.onRemove()}return d};c.prototype.hasMediator=function(a){return null!=
this.mediatorMap[a]};c.removeView=function(a){delete c.instanceMap[a]};c.prototype.mediatorMap=null;c.prototype.observerMap=null;c.instanceMap=[];c.prototype.multitonKey=null;c.MULTITON_MSG="View instance for this Multiton key already constructed!";e.prototype.initializeModel=function(){};e.getInstance=function(a){if(null==a)return null;null==e.instanceMap[a]&&(e.instanceMap[a]=new e(a));return e.instanceMap[a]};e.prototype.registerProxy=function(a){a.initializeNotifier(this.multitonKey);this.proxyMap[a.getProxyName()]=
a;a.onRegister()};e.prototype.retrieveProxy=function(a){return this.proxyMap[a]};e.prototype.hasProxy=function(a){return null!=this.proxyMap[a]};e.prototype.removeProxy=function(a){var b=this.proxyMap[a];b&&(this.proxyMap[a]=null,b.onRemove());return b};e.removeModel=function(a){delete e.instanceMap[a]};e.prototype.proxyMap=null;e.instanceMap=[];e.MULTITON_MSG="Model instance for this Multiton key already constructed!";f.prototype.initializeController=function(){this.view=c.getInstance(this.multitonKey)};
f.getInstance=function(a){if(null==a)return null;null==this.instanceMap[a]&&(this.instanceMap[a]=new this(a));return this.instanceMap[a]};f.prototype.executeCommand=function(a){var b=this.commandMap[a.getName()];null!=b&&(b=new b,b.initializeNotifier(this.multitonKey),b.execute(a))};f.prototype.registerCommand=function(a,b){null==this.commandMap[a]&&this.view.registerObserver(a,new i(this.executeCommand,this));this.commandMap[a]=b};f.prototype.hasCommand=function(a){return null!=this.commandMap[a]};
f.prototype.removeCommand=function(a){this.hasCommand(a)&&(this.view.removeObserver(a,this),this.commandMap[a]=null)};f.removeController=function(a){delete this.instanceMap[a]};f.prototype.view=null;f.prototype.commandMap=null;f.prototype.multitonKey=null;f.instanceMap=[];f.MULTITON_MSG="controller key for this Multiton key already constructed";var o={global:function(){return this}(),extend:function(a,b){if("function"!==typeof a)throw new TypeError("#extend- child should be Function");if("function"!==
typeof b)throw new TypeError("#extend- parent should be Function");if(b!==a){var c=new Function;c.prototype=b.prototype;a.prototype=new c;return a.prototype.constructor=a}},decorate:function(a,b){for(var c in b)a[c]=b[c];return a}};n.puremvc={View:c,Model:e,Controller:f,SimpleCommand:m,MacroCommand:l,Facade:b,Mediator:g,Observer:i,Notification:j,Notifier:k,Proxy:h,define:function(a,b,c){a||(a={});var e=a.name,f=a.parent,g="function"===typeof f,h=a.scope||null;if("parent"in a&&!g)throw new TypeError("Class parent must be Function");
if(a.hasOwnProperty("constructor")){if(a=a.constructor,"function"!==typeof a)throw new TypeError("Class constructor must be Function");}else a=g?function(){f.apply(this,arguments)}:new Function;g&&o.extend(a,f);if(b)g=a.prototype,o.decorate(g,b),g.constructor=a;c&&o.decorate(a,c);if(e){if("string"!==typeof e)throw new TypeError("Class name must be primitive string");p(e,a,h)}return a},declare:p}}})(this);
/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();



(function(){function te(){var a,b,c,e=this;b=null;this.getSDK=function(){return b};this.setSDK=function(c){var e;b=c;a();for(e in b)c=b[e],window[e]=c;return b};this.saveSDK=function(a,b){var e,d;if(null!=b&&null!=a&&""!==a){if(null==b.main)for(e in b)if(d=b[e],(null!=d?d.VERSION:void 0)===a){b.main=d;break}null==b.version&&(b.version=a);c.push(b);return this[a]=b}};c=[];this.getVersions=function(){return c.slice()};this.getVersion=function(a){return this[a]};this.setVersion=function(a){b=this.getVersion(a);
if(null==b)return null;this.setSDK(b);return b};this.revert=function(){return this.setSDK(c[0])};this.noConflict=function(){var a;a=this.getSDK();this.revert();return a};this.create=function(){var a;a=function(a,b){this.prototype=a.prototype;return a.apply(this,b)};return function(c){return new a(b.main,arguments)}}();a=function(){var a,c,d;if(null!=(c=window.com)&&null!=(d=c.akamai)&&d.amp)for(a in window)if(c=window[a],(c===window.AMP||c===window.AMPremier)&&null!=(null!=c?c.VERSION:void 0)&&""!==
c.VERSION&&c.VERSION!==(null!=b?b.version:void 0)&&null==e[c.VERSION]){a={};a.main=c;a.com=window.com;window.AMP&&(a.AMP=window.AMP);window.AMPPremier&&(a.AMPremier=window.AMPPremier);window.Utils&&(a.Utils=window.Utils);window.QueryString&&(a.QueryString=window.QueryString);window.QueryParams&&(a.QueryParams=window.QueryParams);e.saveSDK(c.VERSION,a);break}};a()}var ne;null==window.AKAMAI_MEDIA_PLAYER&&(window.AKAMAI_MEDIA_PLAYER=new te);if(null==window.AKAMAI_MEDIA_PLAYER["AMP v4.10.0.0004"]){ne=
window.AKAMAI_MEDIA_PLAYER["AMP v4.10.0.0004"]={};var ue=function(a){return{}.hasOwnProperty(a)},f=function(a,b){function c(){this.constructor=a}for(var e in b)ue.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},yc=function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},ve=function(a,b){return function(){return a.apply(b,arguments)}},d;d={STARTUP:"startup",LOAD:"load",PAUSE_REQUEST:"pauserequest",TOGGLE_PLAY_PAUSE:"togglePlayPause",
CHANGE_PLAY_STATE:"chageplaystate",PLAY_STATE_CHANGE:"playstatechange",TOGGLE_FULL_SCREEN:"toggleFullScreen",CHANGE_DISPLAY_STATE:"chageDisplayState",DISPLAY_STATE_CHANGE:"displayStateChange",FULL_SCREEN_CHANGE:"fullscreenchange",DISABLE_FULL_SCREEN:"disableFullScreen",ENABLE_FULL_SCREEN:"enableFullScreen",LANGUAGE_CHANGE:"languageChange",TOGGLE_ACTIVE:"toggleActive",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changeMedia",SET_MEDIA:"setmedia",UPDATE_DATA_BINDINGS:"updatedatabindings",
CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",TOGGLE_MUTED:"togglemuted",SEEK:"seek",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeAutoplay",CHANGE_LOOP:"changeLoop",PLAYBACK_CORE_CHANGE:"playbackCoreChange",START:"start",END:"end",REPLAY:"replay",LOAD_FEED:"loadFeed",REGISTER_PLUGIN:"registerPlugin",REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",ADD_CONTROL:"addControl",
REMOVE_CONTROL:"removeControl",ADD_CONTROL_STATE:"addControlState",REMOVE_CONTROL_STATE:"removeControlState",ADD_APPLICATION_STATE:"addApplicationState",REMOVE_APPLICATION_STATE:"removeApplicationState",DISPATCH_EVENT:"dispatchEvent",CHANGE_PARAMS:"changeParams",ADD_CUE_POINTS:"addCuePoints",REMOVE_CUE_POINTS:"removeCuePoints",INITIALIZED:"initialized",REGISTER_PLAYBACK_CORE:"registerPlaybackCore",REMOVE_PLAYBACK_CORE:"removePlaybackCore",DISPLAY_TIME:"displaytime",IS_USER_ACTIVE:"isUserActive",LOADED_METADATA:"loadedmetadata",
READY:"ready",ERROR:"error",ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",MEDIA_CHANGE:"mediachange",WAITING:"waiting",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange",FAIL_OVER_ATTEMPT:"failoverattempt",
PLAYBACK_TARGET_CHANGE:"playbacktargetchange",PLAYBACK_TARGET_AVAILABLE:"playbacktargetavailable",RECORD_CONTENT_CHANGE:"recordcontentchange",CHANGE_CONTENT:"changecontent",CONTENT_CHANGED:"contentchanged"};var D=function(a,b){D.__super__.constructor.call(this,this.getModuleName()+"-"+Date.now());this.logger=G;this.config=a;this.moduleMap={};this.viewComponent=b;this.initialize();this.moduleAPI=this.createAPI()};f(D,puremvc.Facade);D.prototype.logger=null;D.prototype.config=null;D.prototype.moduleName=
null;D.prototype.moduleMap=null;D.prototype.viewComponent=null;D.prototype.moduleAPI=null;D.prototype.initialize=function(){this.createModel();this.createController();this.createView()};D.prototype.createModel=function(){this.registerProxy(new x(this.config))};D.prototype.createView=function(){};D.prototype.createController=function(){};D.prototype.createAPI=function(){return new Ta(this)};D.prototype.getModuleName=function(){return this.moduleName};D.prototype.getConfig=function(){return this.config};
D.prototype.hasModule=function(a){return null!=this.moduleMap[a]};D.prototype.getModules=function(){var a,b,c,e;b={};e=this.moduleMap;for(a in e)c=e[a],b[a]=c.module;return b};D.prototype.registerModule=function(a){var b,c,e;e=a.getModuleName();null!=a&&null==this.moduleMap[e]&&(b=new Ua(a),this.moduleMap[e]=b,this.registerMediator(b),b=this.getAPI(),c=a.getAPI(),null!=b&&null!=c&&(b[e]=c),a.onRegister())};D.prototype.retrieveModule=function(a){return this.moduleMap[a].module};D.prototype.removeModule=
function(a){var b,c;b=this.moduleMap[a];if(null!=b)return delete this.moduleMap[a],this.removeMediator(a),c=this.getAPI(),null!=(null!=c?c[a]:void 0)&&delete c[a],b.module.onRemove(),b.module};D.prototype.getAPI=function(){return this.moduleAPI};D.prototype.listNotificationInterests=function(){return[]};D.prototype.listNotificationPublications=function(){return[]};D.prototype.listNotificationEvents=function(){return[]};D.prototype.getViewComponent=function(){return this.viewComponent};D.prototype.setViewComponent=
function(a){return this.viewComponent=a};D.prototype.onRegister=function(){};D.prototype.onRemove=function(){};D.prototype.destroy=function(){var a;null!=this.viewComponent&&(this.viewComponent.innerHTML="",this.viewComponent.className="");puremvc.Facade.removeCore(this.multitonKey);for(a in this)this[a]=null,delete this[a]};var Ta=function(a){Ta.attachModuleDispatcher(a,new ma(this))};Ta.attachModuleDispatcher=function(a,b){var c,e;a.registerMediator(b);e=b.dispatcher;c=b.api;c.addEventListener=
e.addEventListener.bind(e);c.removeEventListener=e.removeEventListener.bind(e);c.dispatchEvent=e.dispatchEvent.bind(e);!0===a.logger.enabled&&(c.getModule=function(){return a})};Ta.prototype.addEventListener=function(a,b,c){};Ta.prototype.dispatchEvent=function(a){};Ta.prototype.removeEventListener=function(a,b,c){};var x=function(a){this.config=a;x.__super__.constructor.call(this)};f(x,puremvc.Proxy);x.NAME="ModuleProxy";x.prototype.defaults=null;x.prototype.config=null;x.prototype.initializeNotifier=
function(a){x.__super__.initializeNotifier.call(this,a);this.createData()};x.prototype.createData=function(){null!=this.config&&this.setData(this.config)};x.prototype.getData=function(){return this.data};x.prototype.setData=function(a){var b,c,e,p;e={};p=this.defaults;for(c in p)b=p[c],b=c in a?a[c]:b,e[c]=b;this.data=e;return a};var oe=function(a){a.className=ic.PREFIX+"player";a=ya.create("install-flash",a);ya.create(null,a,"p","To view this page ensure that Adobe Flash Player version 10.2.0 or greater is installed.");
a=ya.create(null,a,"a");a.href="http://www.adobe.com/go/getflashplayer";a=ya.create(null,a,"img");a.src="//www.adobe.com/images/shared/download_buttons/get_flash_player.gif";a.alt="Get Adobe Flash player"};oe.prototype.getModules=function(){return[]};oe.prototype.getAPI=function(){return{}};var ad=function(){ad.__super__.constructor.call(this)};f(ad,puremvc.SimpleCommand);ad.prototype.execute=function(a){a=this.facade.retrieveProxy(t.NAME).getActiveState()===za.ACTIVE?za.INACTIVE:za.ACTIVE;this.sendNotification(d.CHANGE_ACTIVE_STATE,
a)};var bd=function(){bd.__super__.constructor.call(this)};f(bd,puremvc.SimpleCommand);bd.prototype.execute=function(a){a=this.facade.retrieveProxy(t.NAME).getDisplayState()===ha.FULL_SCREEN?ha.NORMAL:ha.FULL_SCREEN;this.sendNotification(d.CHANGE_DISPLAY_STATE,a)};var xb=function(){xb.__super__.constructor.call(this)};f(xb,puremvc.SimpleCommand);xb.interval=null;xb.prototype.execute=function(a){var b,c,e,p,g=this;e=a.getBody();this.facade.retrieveProxy(l.NAME);b=this.facade.getVideo();null!=b&&b.webkitSupportsFullscreen&&
(a=this.facade.retrieveProxy(t.NAME),a.setDisplayState(e),p=this.facade.getViewComponent(),c={},null!=p.webkitRequestFullScreen?(c.enter=function(){return p.webkitRequestFullScreen()},c.exit=function(){return document.webkitCancelFullScreen()},c.event="onwebkitfullscreenchange",c.element="webkitFullscreenElement"):null!=p.requestFullscreen?(c.enter=function(){return p.requestFullscreen()},c.exit=function(){return document.cancelFullscreen()},c.event="onfullscreenchange",c.element="fullscreenElement"):
null!=p.mozRequestFullScreen?(c.enter=function(){return p.mozRequestFullscreen()},c.exit=function(){return document.mozCancelFullScreen()},c.event="onmozfullscreenchange",c.element="mozFullscreenElement"):null!=b.webkitEnterFullscreen&&(c.enter=function(){return b.webkitEnterFullscreen()},c.exit=function(){return b.webkitExitFullscreen()},c.event=null),e===ha.FULL_SCREEN?(null!=c.event?p[c.event]=function(a){if(null==document[c.element])return g.sendNotification(d.CHANGE_DISPLAY_STATE,ha.NORMAL)}:
(clearInterval(xb.interval),xb.interval=setInterval(function(){if(!0!==b.webkitDisplayingFullscreen)return g.sendNotification(d.CHANGE_DISPLAY_STATE,ha.NORMAL),clearInterval(xb.interval)},100)),c.enter()):e===ha.NORMAL&&(c.exit(),b[c.event]=null,clearInterval(xb.interval)),setTimeout(this.sendNotification.bind(this,d.FULL_SCREEN_CHANGE,e),100),this.sendNotification(d.DISPATCH_EVENT,new U("fullscreenchange",e===ha.FULL_SCREEN)))};var cd=function(){cd.__super__.constructor.call(this)};f(cd,puremvc.SimpleCommand);
cd.prototype.execute=function(a){this.facade.retrieveProxy(B.NAME).setAutoplay(a.getBody())};var dd=function(){dd.__super__.constructor.call(this)};f(dd,puremvc.SimpleCommand);dd.prototype.execute=function(a){this.facade.retrieveProxy(B.NAME).setLoop(a.getBody())};var ed=function(){ed.__super__.constructor.call(this)};f(ed,puremvc.SimpleCommand);ed.prototype.execute=function(a){this.facade.retrieveProxy(l.NAME).setVolume(a.getBody())};var zc=function(){zc.__super__.constructor.call(this)};f(zc,puremvc.SimpleCommand);
zc.prototype.execute=function(a){var b,c,e,p;e=a.getBody();c=this.facade.retrieveProxy(l.NAME);a=this.facade.retrieveProxy(m.NAME);0===e&&a.getType()===h.mimeTypes.m3u8&&(e=0.25);p=this.facade.getVideo();0===p.readyState?(b=function(a){p.removeEventListener("loadedmetadata",b,!1);return c.setCurrentTime(e)},p.addEventListener("loadedmetadata",b,!1)):c.setCurrentTime(e);this.sendNotification(d.CHANGE_PLAY_STATE,H.WAITING)};var fd=function(){fd.__super__.constructor.call(this)};f(fd,puremvc.SimpleCommand);
fd.prototype.execute=function(a){this.facade.retrieveProxy(t.NAME).setSeeking(!0)};var gd=function(){gd.__super__.constructor.call(this)};f(gd,puremvc.SimpleCommand);gd.prototype.execute=function(a){this.facade.retrieveProxy(l.NAME).getSrc();this.facade.retrieveProxy(t.NAME).setSeeking(!1)};var hd=function(){hd.__super__.constructor.call(this)};f(hd,puremvc.SimpleCommand);hd.prototype.execute=function(a){this.facade.retrieveProxy(l.NAME).setCurrentTime(0.25);this.sendNotification(d.PLAY);this.sendNotification(d.CHANGE_PLAY_STATE,
H.PLAYING)};var id=function(){id.__super__.constructor.call(this)};f(id,puremvc.SimpleCommand);id.prototype.execute=function(a){this.facade.logger.debug("EndCommand",a);a.getBody();a=this.facade.retrieveProxy(l.NAME);a.pause();a.getCurrentTime()!==a.getDuration()&&a.setCurrentTime(a.getDuration())};var jd=function(){jd.__super__.constructor.call(this)};f(jd,puremvc.SimpleCommand);jd.prototype.execute=function(a){this.facade.retrieveProxy(t.NAME).setIsUserActive(a.getBody())};var kd=function(){kd.__super__.constructor.call(this)};
f(kd,puremvc.SimpleCommand);kd.prototype.execute=function(a){this.facade.logger.debug("WaitingCommand");this.facade.retrieveProxy(t.NAME).getPlayState()!==H.LOADING&&h.getMimeType(this.facade.getVideo().src)!==h.mimeTypes.mp4&&this.sendNotification(d.CHANGE_PLAY_STATE,H.WAITING)};var ld=function(){ld.__super__.constructor.call(this)};f(ld,puremvc.SimpleCommand);ld.prototype.execute=function(a){this.facade.retrieveProxy(l.NAME).setMuted(a.getBody())};var md=function(){md.__super__.constructor.call(this)};
f(md,puremvc.SimpleCommand);md.prototype.execute=function(a){var b;this.facade.logger.debug("CheckAuthorizationCommand");b=this.facade.retrieveProxy(V.NAME);a=a.getBody();b.setMedia(a);!1===b.getAuthorized()?this.sendNotification(na.AUTHORIZE,a):this.sendNotification(d.MEDIA_CHANGE,a)};var nd=function(){nd.__super__.constructor.call(this)};f(nd,puremvc.SimpleCommand);nd.prototype.execute=function(a){var b;this.facade.logger.debug("AuthorizedCommand");a=this.facade.retrieveProxy(m.NAME);a.authorized=
!0;b=this.facade.retrieveProxy(V.NAME).createURL(a.getSrc());a.setSrc(b);this.sendNotification(d.MEDIA_CHANGE,a.getData())};var od=function(){od.__super__.constructor.call(this)};f(od,puremvc.SimpleCommand);od.prototype.execute=function(a){this.facade.logger.debug("InitializedCommand");this.facade.retrieveProxy(l.NAME).initialized=!0};var pd=function(){pd.__super__.constructor.call(this)};f(pd,puremvc.SimpleCommand);pd.prototype.execute=function(a){this.facade.logger.debug("RegisterPlaybackCoreCommand");
this.facade.retrieveProxy(L.NAME).registerPlaybackCore(a.getBody())};var qd=function(){qd.__super__.constructor.call(this)};f(qd,puremvc.SimpleCommand);qd.prototype.execute=function(a){this.facade.logger.debug("PlaybackTargetChangeCommand");a="amp"===a.getBody().target?d.REMOVE_APPLICATION_STATE:d.ADD_APPLICATION_STATE;this.sendNotification(a,"remote-playback")};var rd=function(){rd.__super__.constructor.call(this)};f(rd,puremvc.SimpleCommand);rd.prototype.execute=function(a){var b;this.facade.logger.debug("RecordContentChangeCommand");
b=this.facade.retrieveProxy(m.NAME);a=a.getBody();this.sendNotification(d.CHANGE_CONTENT,{from:b.getData(),to:a});b.updateData(a);this.sendNotification(d.UPDATE_DATA_BINDINGS);this.sendNotification(d.CHANGE_CONTENT,b.getData())};var sd=function(){sd.__super__.constructor.call(this)};f(sd,puremvc.SimpleCommand);sd.prototype.execute=function(a){a=this.facade.retrieveProxy(L.NAME).getActivePlaybackCore();this.sendNotification(d.DISPLAY_TIME,{currentTime:a.getCurrentTime(),duration:a.getDuration()})};
var td=function(){td.__super__.constructor.call(this)};f(td,puremvc.SimpleCommand);td.prototype.execute=function(a){a=this.facade.retrieveProxy(l.NAME);a.setMuted(!a.getMuted())};var Fb=function(a){null==this.cssPrefix&&(this.cssPrefix=ic.PREFIX);Fb.__super__.constructor.call(this,this.mediatorName,a)};f(Fb,puremvc.Mediator);Fb.prototype.config=null;Fb.prototype.cssPrefix=null;Fb.prototype.classList=null;Fb.prototype.initializeNotifier=function(a){Fb.__super__.initializeNotifier.call(this,a);this.config=
(this.facade.app||this.facade).retrieveProxy(x.NAME);this.classList={prefix:this.cssPrefix,element:this.viewComponent,contains:function(a,c){var e,p;null==c&&(c=this.element);e=this.prefix+a;return null!=(null!=(p=c.classList)?p.contains:void 0)?c.classList.contains(e):-1!==c.className.indexOf(e)},add:function(a,c){var e,p;null==c&&(c=this.element);e=this.prefix+a;null!=(null!=(p=c.classList)?p.add:void 0)?c.classList.add(e):this.contains(a,c)||(c.className=""!==c.className?c.className+(" "+e):e)},
remove:function(a,c){var e,p;null==c&&(c=this.element);e=this.prefix+a;null!=(null!=(p=c.classList)?p.remove:void 0)?c.classList.remove(e):this.contains(a,c)&&(e=RegExp(" ?"+e),c.className=c.className.replace(e,""))},toggle:function(a,c){var e;null==c&&(c=this.element);return null!=(null!=(e=c.classList)?e.toggle:void 0)?c.classList.toggle(this.prefix+a):this.contains(a,c)?this.remome(a,c):this.add(a,c)}}};var Vb=function(a){Vb.__super__.constructor.call(this,a)};f(Vb,Fb);Vb.prototype.localizationManager=
null;Vb.prototype.initializeNotifier=function(a){Vb.__super__.initializeNotifier.call(this,a);this.localizationManager=(this.facade.app||this.facade).retrieveProxy(W.NAME)};var I=function(a,b,c,e){this.componentName=null!=a?a:this.componentName;this.componentType=null!=b?b:this.componentType;this.viewComponent=this.createViewComponent(c,e);this.classList=this.viewComponent._classList;null==this.mediatorName&&(this.mediatorName=this.createMediatorName());I.__super__.constructor.call(this,this.viewComponent)};
f(I,Vb);I.prototype.componentName=null;I.prototype.componentType=null;I.prototype.classList=null;I.prototype.state=null;I.prototype.disabled=!1;I.prototype.onRegister=function(){ya.bindEvents(this.viewComponent,this)};I.prototype.createViewComponent=function(a,b){var c;c=this.getTypeList();return ya.create(c,a,b)};I.prototype.createMediatorName=function(){var a;a=this.getTypeList();a.push("mediator");a.push(ya.createUID());return a.join("-")};I.prototype.getTypeList=function(){var a;a=[];null!=this.componentName&&
a.push(this.componentName);null!=this.componentType&&(a=a.concat(this.componentType));return a};I.prototype.create=function(a,b,c,e){null==b&&(b=this);!1===b&&(b=null);return ya.create(a,b,c,e)};I.prototype.createText=function(a,b,c,e){null==c&&(c=this);return ya.create(a,c,e,b)};I.prototype.setState=function(a){if(a!==this.state)return null!=this.state&&this.classList.remove(this.state),this.state=a,null!=this.state&&this.classList.add(this.state),a};I.prototype.getState=function(){return this.state};
I.prototype.setDisabled=function(a){if(a!==this.disabled)return(this.disabled=a)?this.classList.add("disabled"):this.classList.remove("disabled"),a};I.prototype.getDisabled=function(){return this.disabled};var ba=function(){ba.__super__.constructor.call(this,null,null,null,null)};f(ba,I);ba.prototype.componentType="overlay";ba.prototype.onRegister=function(){ba.__super__.onRegister.call(this);this.registerOverlay()};ba.prototype.onRemove=function(){ba.__super__.onRemove.call(this);this.removeOverlay()};
ba.prototype.registerOverlay=function(){this.sendNotification(d.ADD_OVERLAY,this.viewComponent)};ba.prototype.removeOverlay=function(){this.sendNotification(d.REMOVE_OVERLAY,this.viewComponent)};var yb=function(){yb.__super__.constructor.call(this)};f(yb,ba);yb.prototype.componentName="context-menu";yb.prototype.contextMenu=null;yb.prototype.onRegister=function(){var a=this;yb.__super__.onRegister.call(this);k.create(this.facade.viewComponent,k.CONTEXTMENU,function(b){b.preventDefault();a.contextMenuHandler(b);
return!1})};yb.prototype.contextMenuHandler=function(a){var b=this;this.contextMenu&&this.removeContextMenu();this.contextMenu=ya.create("context-menu",document.body,"ul");ya.create("context-item",this.contextMenu,"li",this.facade.parent.version);this.contextMenu.style.top=a.pageY+"px";this.contextMenu.style.left=a.pageX+"px";k.create(document.body,k.CLICK,function(a){b.removeContextMenu(a);return!1})};yb.prototype.removeContextMenu=function(a){try{k.clear(document.body,k.CLICK),document.body.removeChild(this.contextMenu),
this.contextMenu=null}catch(b){}};var Gb=function(){Gb.__super__.constructor.call(this)};f(Gb,ba);Gb.prototype.componentName="end-slate";Gb.prototype.onRegister=function(){null!=this.config.getEndSlate()&&Gb.__super__.onRegister.call(this)};Gb.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};Gb.prototype.handleNotification=function(a){var b,c,e;switch(a.getName()){case d.MEDIA_CHANGE:c=a.getBody(),b=this.config.getEndSlate(),e=this.getViewComponent(),a="",null!=b&&(b=!0===b.usePoster?
c.poster:b.url,null!=b&&""!==b&&(a='\x3cimg src\x3d"'+b+'" class\x3d"end-slate-image" /\x3e')),e.innerHTML=a}};var Hb=function(){Hb.__super__.constructor.call(this)};f(Hb,ba);Hb.prototype.componentName="waiting";Hb.prototype.bar=null;Hb.prototype.text=null;Hb.prototype.onRegister=function(){this.bar=this.create("waiting-bar");this.text=this.createText("waiting-text",this.localizationManager.getString(r.MSG_BUFFERING));Hb.__super__.onRegister.call(this)};var ud=function(){ud.__super__.constructor.call(this)};
f(ud,ba);ud.prototype.componentName="loading";var r=function(){};r.MSG_LIVE="MSG_LIVE";r.MSG_REPLAY="MSG_REPLAY";r.MSG_BUFFERING="MSG_BUFFERING_TEXT";r.MSG_CC="MSG_CC";r.MSG_CC_TITLE="MSG_CC_TITLE";r.MSG_CC_LANGUAGE="MSG_CC_LANGUAGE";r.MSG_CC_PRESETS="MSG_CC_PRESETS";r.MSG_CC_FONT="MSG_CC_FONT";r.MSG_CC_EDGE="MSG_CC_EDGE";r.MSG_CC_SIZE="MSG_CC_SIZE";r.MSG_CC_SCROLL="MSG_CC_SCROLL";r.MSG_CC_COLOR="MSG_CC_COLOR";r.MSG_CC_BACKGROUND="MSG_CC_BACKGROUND";r.MSG_CC_EDGE="MSG_CC_EDGE";r.MSG_CC_WINDOW="MSG_CC_WINDOW";
r.MSG_CC_OPACITY="MSG_CC_OPACITY";r.MSG_CC_SHOW_ADVANCED="MSG_CC_SHOW_ADVANCED";r.MSG_CC_HIDE_ADVANCED="MSG_CC_HIDE_ADVANCED";r.MSG_CC_RESET="MSG_CC_RESET";r.MSG_CC_CANCEL="MSG_CC_CANCEL";r.MSG_CC_APPLY="MSG_CC_APPLY";r.MSG_SECONDS="MSG_SECONDS";r.MSG_RECOMMENDATIONS_TITLE="MSG_RECOMMENDATIONS_TITLE";r.MSG_NEXT_VIDEO="MSG_NEXT_VIDEO";r.MSG_NEXT_AD="MSG_NEXT_AD";var lb=function(){lb.__super__.constructor.call(this)};f(lb,ba);lb.prototype.componentName="replay";lb.prototype.replay=null;lb.prototype.icon=
null;lb.prototype.label=null;lb.prototype.onRegister=function(){this.replay=this.create("replay-button");this.replay.onclick=this.onclick.bind(this);this.icon=this.create("replay-icon",this.replay);this.label=this.createText("replay-label",this.localizationManager.getString(r.MSG_REPLAY),this.replay);lb.__super__.onRegister.call(this)};lb.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification(d.REPLAY);return!1};var vd=function(){vd.__super__.constructor.call(this)};f(vd,
puremvc.SimpleCommand);vd.prototype.execute=function(a){a="persistent"!==this.facade.retrieveProxy(B.NAME).getControls().mode?a.getBody():za.ACTIVE;this.facade.retrieveProxy(t.NAME).setActiveState(a)};var ca=function(a){ca.__super__.constructor.call(this,a)};f(ca,x);ca.NAME=x.NAME;ca.prototype.bindings=null;ca.prototype.configurationName=null;ca.prototype.configurationData=null;ca.prototype.contextName=null;ca.prototype.contextData=null;ca.prototype.value=null;ca.prototype.getConfigurationName=function(){return this.configurationName};
ca.prototype.getConfigurationData=function(){return this.configurationData.value||{}};ca.prototype.getContextName=function(){return this.contextName};ca.prototype.getContextData=function(){return this.contextData};ca.prototype.onRegister=function(){var a;a=this.facade.app||this.facade;null==this.configurationName&&(this.configurationName=this.facade.moduleName);this.bindings=a.retrieveProxy(R.NAME);this.bindings.registerConfiguration(this)};ca.prototype.setData=function(a){var b,c,e;this.data={};
e=this.defaults;for(b in e)c=e[b],this.data[b]=b in a?a[b]:c;this.configurationData=new Ib(this.data);return this.data};ca.prototype.getValue=function(a){var b;this.bindings.update();this.value[a]=null!=(b=this.configurationData.data[a])?b.compile(this.bindings.getData()):void 0;return this.value[a]};ca.prototype.compile=function(a,b){null==b&&(b=!1);if(null==this.configurationData)return null;null==a&&(a=this.bindings.getData());null!=this.contextName&&null!=this.contextData&&(a=h.clone(a),a[this.contextName]=
this.contextData);this.configurationData.compile(a,b);return this.value=this.configurationData.value};var Wb=function(){Wb.__super__.constructor.call(this)};f(Wb,puremvc.SimpleCommand);Wb.prototype.applicationState=null;Wb.prototype.media=null;Wb.prototype.initializeNotifier=function(a){Wb.__super__.initializeNotifier.call(this,a);a=this.facade.app||this.facade;this.applicationState=a.retrieveProxy(t.NAME);this.media=a.retrieveProxy(m.NAME)};var Ka=function(){Ka.__super__.constructor.call(this)};
f(Ka,Wb);Ka.prototype.ads=null;Ka.prototype.appState=null;Ka.prototype.initializeNotifier=function(a){Ka.__super__.initializeNotifier.call(this,a);this.ads=this.facade.retrieveProxy(x.NAME);this.appState=this.facade.retrieveProxy(t.NAME)};var zb=function(){zb.__super__.constructor.call(this)};f(zb,puremvc.MacroCommand);zb.prototype.ads=null;zb.prototype.initializeNotifier=function(a){zb.__super__.initializeNotifier.call(this,a);this.ads=this.facade.retrieveProxy(z.NAME)};zb.prototype.initializeMacroCommand=
function(){this.addSubCommand(jc)};zb.prototype.execute=function(a){zb.__super__.execute.call(this,a);this.facade.logger.debug("AdStartCommand");!1===this.facade.app.retrieveProxy(l.NAME).initialized&&this.facade.app.sendNotification(d.INITIALIZED);this.ads.start();this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,H.PLAYING)};var Ac=function(){Ac.__super__.constructor.call(this)};f(Ac,Ka);Ac.prototype.execute=function(a){this.facade.logger.debug("AdPlayCommand");!1===this.ads.getStarted()?this.sendNotification(d.START,
!0):(this.ads.play(),this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,H.PLAYING))};var Bc=function(){Bc.__super__.constructor.call(this)};f(Bc,Ka);Bc.prototype.execute=function(a){this.facade.logger.debug("AdPauseCommand");this.ads.pause();this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,H.PAUSED)};var wd=function(){wd.__super__.constructor.call(this)};f(wd,Ka);wd.prototype.execute=function(a){this.facade.logger.debug("AdTogglePlayPauseCommand");a=this.ads.getPaused()||!1===this.ads.getStarted()?
d.PLAY:d.PAUSE;this.sendNotification(a,!0)};var xd=function(){xd.__super__.constructor.call(this)};f(xd,Ka);xd.prototype.execute=function(a){this.facade.logger.debug("AdVolumeChangeCommand");this.ads.setVolume(a.getBody())};var Cc=function(){Cc.__super__.constructor.call(this)};f(Cc,puremvc.SimpleCommand);Cc.prototype.execute=function(a){this.facade.logger.debug("EndedCommand",a);!0===this.facade.retrieveProxy(B.NAME).getLoop()?this.sendNotification(d.REPLAY):(this.sendNotification(d.CHANGE_PLAY_STATE,
H.ENDED),this.sendNotification(d.CHANGE_ACTIVE_STATE,za.ACTIVE))};var Dc=function(){Dc.__super__.constructor.call(this)};f(Dc,puremvc.SimpleCommand);Dc.prototype.execute=function(a){var b;this.facade.logger.debug("StartCommand");b=this.facade.retrieveProxy(m.NAME);this.sendNotification(d.DISPLAY_TIME,{currentTime:0,duration:b.getDuration()});this.sendNotification(d.STARTED,a.getBody());this.sendNotification(d.CHANGE_ACTIVE_STATE,za.INACTIVE)};var Jb=function(){Jb.__super__.constructor.call(this)};
f(Jb,puremvc.MacroCommand);Jb.prototype.initializeMacroCommand=function(){this.addSubCommand(jc)};Jb.prototype.execute=function(a){var b,c;this.facade.logger.debug("PlayCommand");Jb.__super__.execute.call(this,a);c=a.getBody();a=this.facade.retrieveProxy(m.NAME);b=this.facade.retrieveProxy(l.NAME);c&&!0!==b.initialized&&this.sendNotification(d.INITIALIZED);!0===b.initialized&&(a.getSrc()||a.getSource())&&(b.getStarted()||this.sendNotification(d.START),b.play())};var kc=function(){kc.__super__.constructor.call(this)};
f(kc,puremvc.SimpleCommand);kc.prototype.execute=function(a){this.facade.retrieveProxy(l.NAME).pause();this.sendNotification(d.CHANGE_ACTIVE_STATE,za.ACTIVE)};var Ec=function(){Ec.__super__.constructor.call(this)};f(Ec,puremvc.SimpleCommand);Ec.prototype.execute=function(a){var b;this.facade.logger.debug("TogglePlayPauseCommand");a=this.facade.retrieveProxy(t.NAME);this.facade.retrieveProxy(l.NAME);switch(a.getPlayState()){case H.ENDED:b=d.REPLAY;break;case H.PAUSED:case H.READY:b=d.PLAY;break;case H.PLAYING:b=
d.PAUSE;break;case H.WAITING:b=!0===this.facade.getVideo().paused?d.PLAY:d.PAUSE}this.sendNotification(b,!0)};var yd=function(){yd.__super__.constructor.call(this)};f(yd,Ka);yd.prototype.execute=function(a){this.facade.logger.debug("AdContentEndedCommand");this.ads.contentEnded()};var zd=function(){zd.__super__.constructor.call(this)};f(zd,Ka);zd.prototype.execute=function(a){this.facade.logger.debug("AdContentStartedCommand");this.ads.contentStarted()};var N=function(a){N.__super__.constructor.call(this,
a)};f(N,ca);N.NAME=x.NAME;N.prototype.enabled=!0;N.prototype.loaded=!1;N.prototype.plugin=null;N.prototype.load=function(a){var b,c=this;b=this.getScript();null!=b&&""!==b?h.loadAMPScript(b,function(){c.loaded=!0;"function"===typeof a&&a(!0)}):(this.loaded=!1,"function"===typeof a&&a(!1))};N.prototype.getLoaded=function(){return this.loaded};N.prototype.getScript=function(){var a;a=this.getConfigurationData().plugin;return null!=a?a.js||a:""};N.prototype.setEnabled=function(a){return this.enabled=
a};N.prototype.getEnabled=function(){return this.enabled};N.prototype.createPlugin=function(){};N.prototype.initialize=function(){this.plugin=this.createPlugin()};N.prototype.error=function(a){this.facade.logger.error("[AMP "+this.facade.getModuleName().toUpperCase()+" Error]",a)};var z=function(a){z.__super__.constructor.call(this,a)};f(z,N);z.NAME=N.NAME;z.prototype.inprogress=!1;z.prototype.paused=!1;z.prototype.started=!1;z.prototype.adVO=null;z.prototype.contextName="ad";z.prototype.getContextData=
function(){return this.adVO||{}};z.prototype.setCompanions=function(a){this.adVO.companions=a;this.sendNotification("adscompanion",this.adVO);return a};z.prototype.getCompanions=function(){var a;return null!=(a=this.adVO)?a.companions:void 0};z.prototype.getInProgress=function(){return this.inprogress};z.prototype.setInProgress=function(a){return this.inprogress=a};z.prototype.getStarted=function(){return this.started};z.prototype.setStarted=function(a){return this.started=a};z.prototype.getPaused=
function(){return this.paused};z.prototype.setPaused=function(a){return this.paused=a};z.prototype.play=function(){this.setPaused(!1)};z.prototype.pause=function(){this.setPaused(!0)};z.prototype.breakStart=function(){};z.prototype.breakEnd=function(){this.setInProgress(!1);this.reset()};z.prototype.error=function(a,b){var c;null==b&&(b=!0);c=("function"===typeof a.getMessage?a.getMessage():void 0)||a.message;this.facade.logger.error("[AMP AD ERROR]",""+c+" Skipping ad content.",a);null==this.adVO&&
(this.adVO={});this.adVO.error=a;this.sendNotification("adserror",this.adVO);!0===b&&this.sendNotification("adsbreakend")};z.prototype.engage=function(a){!1!==this.getEnabled()&&(this.setStarted(!1),this.getInProgress()&&(this.reset(),this.facade.app.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-mode")),this.engageAds())};z.prototype.engageAds=function(){this.facade.app.removeCommand(d.START);this.facade.app.removeCommand(d.PLAY);this.facade.app.removeCommand(d.PAUSE);this.facade.app.removeCommand(d.ENDED);
this.facade.app.removeCommand(M.PLAY);this.facade.app.removeCommand(M.PAUSE);this.facade.app.removeCommand(M.TOGGLE_PLAY_PAUSE);this.facade.isFullscreenDevice()&&this.facade.app.removeCommand(d.CHANGE_DURATION);this.facade.removeCommand(d.STARTED);this.facade.removeCommand(d.ENDED);this.facade.registerCommand(d.START,zb);this.facade.registerCommand(d.PLAY,Ac);this.facade.registerCommand(d.PAUSE,Bc);this.facade.registerCommand(M.PLAY,Ac);this.facade.registerCommand(M.PAUSE,Bc);this.facade.registerCommand(M.TOGGLE_PLAY_PAUSE,
wd);this.facade.registerCommand(d.VOLUME_CHANGE,xd)};z.prototype.reset=function(){this.facade.removeCommand(d.START);this.facade.removeCommand(d.PLAY);this.facade.removeCommand(d.PAUSE);this.facade.removeCommand(M.PLAY);this.facade.removeCommand(M.PAUSE);this.facade.removeCommand(M.TOGGLE_PLAY_PAUSE);this.facade.removeCommand(d.VOLUME_CHANGE);this.facade.app.registerCommand(d.START,Dc);this.facade.app.registerCommand(d.PLAY,Jb);this.facade.app.registerCommand(d.PAUSE,kc);this.facade.app.registerCommand(d.ENDED,
Cc);this.facade.app.registerCommand(M.PLAY,Jb);this.facade.app.registerCommand(M.PAUSE,kc);this.facade.app.registerCommand(M.TOGGLE_PLAY_PAUSE,Ec);this.facade.isFullscreenDevice()&&this.facade.app.registerCommand(d.CHANGE_DURATION,Fc);this.facade.registerCommand(d.STARTED,zd);this.facade.registerCommand(d.ENDED,yd)};z.prototype.start=function(){if(!1===this.getEnabled())return this.sendNotification("adsbreakend"),!1;this.setStarted(!0);return!0};z.prototype.contentPlay=function(){this.facade.app.sendNotification(d.PLAY,
!0)};z.prototype.contentPause=function(){this.facade.app.video.pause()};z.prototype.contentStarted=function(){};z.prototype.contentEnded=function(){};z.prototype.setVolume=function(a){};z.prototype.getVolume=function(){};var w=function(a,b){Ta.attachModuleDispatcher(a,new Kb(this,b));this.getContainer=function(){return a.getViewComponent()};this.getVideo=function(){return a.getVideo()};this.getConfig=function(){return a.getConfig()};this.destroy=function(){return a.destroy()}};f(w,Ta);w.prototype.getContainer=
function(){};w.prototype.getVideo=function(){};w.prototype.getConfig=function(){};w.prototype.evaluateBinding=function(a){};w.prototype.canPlayType=function(a){};w.prototype.load=function(){};w.prototype.play=function(){};w.prototype.replay=function(){};w.prototype.pause=function(){};w.prototype.end=function(){};w.prototype.setParams=function(a){};w.prototype.getParams=function(){};w.prototype.setAutoplay=function(a){};w.prototype.getAutoplay=function(){};w.prototype.setLoop=function(a){};w.prototype.getLoop=
function(){};w.prototype.setMuted=function(a){};w.prototype.getMuted=function(){};w.prototype.mute=function(){return this.setMuted(!0)};w.prototype.unmute=function(){return this.setMuted(!1)};w.prototype.setMedia=function(a){};w.prototype.getMedia=function(){};w.prototype.setCurrentTime=function(a){};w.prototype.getCurrentTime=function(){};w.prototype.getDuration=function(){};w.prototype.setSrc=function(a){};w.prototype.getSrc=function(){};w.prototype.setSource=function(a){};w.prototype.getSource=
function(){};w.prototype.setVolume=function(a){};w.prototype.getVolume=function(){};w.prototype.getSeeking=function(){};w.prototype.getPaused=function(){};w.prototype.getEnded=function(){};w.prototype.enterFullScreen=function(){};w.prototype.exitFullScreen=function(){};w.prototype.destroy=function(){};w.prototype.recordContentChange=function(a){};var pe=function(a,b){var c,e,p,g;pe.__super__.constructor.call(this,a,b);p=a.retrieveProxy(m.NAME);c=a.retrieveProxy(R.NAME);e=a.retrieveProxy(B.NAME);g=
a.retrieveProxy(La.NAME);this.evaluateBinding=c.evaluateBinding.bind(c);this.recordContentChange=function(b){a.sendNotification(d.RECORD_CONTENT_CHANGE,b)};this.canPlayType=function(b){return a.retrieveProxy(l.NAME).canPlayType(b)};this.load=function(){a.sendNotification(d.LOAD)};this.play=function(){a.sendNotification(d.PLAY,!0)};this.replay=function(){a.sendNotification(d.REPLAY)};this.pause=function(){a.sendNotification(d.PAUSE)};this.end=function(){a.sendNotification(d.END)};this.setParams=function(b){a.sendNotification(d.CHANGE_PARAMS,
b);return b};this.getParams=g.getData.bind(g);this.setAutoplay=function(b){a.sendNotification(d.CHANGE_AUTOPLAY,b);return b};this.getAutoplay=e.getAutoplay.bind(e);this.setLoop=function(b){a.sendNotification(d.CHANGE_LOOP,b);return b};this.getLoop=e.getLoop.bind(e);this.setMuted=function(b){a.sendNotification(d.CHANGE_MUTED,b);return b};this.getMuted=function(){return a.retrieveProxy(l.NAME).getMuted()};this.setMedia=function(b){a.sendNotification(d.SET_MEDIA,b);return b};this.getMedia=p.getData.bind(p);
this.setCurrentTime=function(b){a.sendNotification(d.SEEK,b);return b};this.getCurrentTime=function(){return a.retrieveProxy(l.NAME).getCurrentTime()};this.getDuration=p.getDuration.bind(p);this.setSrc=function(b){a.sendNotification(d.SET_MEDIA,{src:b});return b};this.getSrc=function(){return a.retrieveProxy(l.NAME).getSrc()};this.setSource=function(b){a.sendNotification(d.SET_MEDIA,{source:b});return b};this.getSource=p.getSource.bind(p);this.setVolume=function(b){a.sendNotification(d.CHANGE_VOLUME,
b);return b};this.getVolume=function(){return a.retrieveProxy(l.NAME).getVolume()};this.getSeeking=function(){return a.retrieveProxy(l.NAME).getSeeking()};this.getPaused=function(){return a.retrieveProxy(l.NAME).getPaused()};this.getEnded=function(){return a.retrieveProxy(l.NAME).getEnded()};this.enterFullScreen=function(){a.sendNotification(d.CHANGE_DISPLAY_STATE,ha.FULL_SCREEN)};this.exitFullScreen=function(){a.sendNotification(d.CHANGE_DISPLAY_STATE,ha.NORMAL)}};f(pe,w);var Y=function(a,b,c){this.dispatcher=
c;Y.__super__.constructor.call(this,a,b)};f(Y,D);Y.prototype.moduleName="amp";Y.prototype.playerType=null;Y.prototype.dispatcher=null;Y.prototype.config=null;Y.prototype.video=null;Y.prototype.parent=null;Y.prototype.getVideo=function(){return this.video};Y.prototype.setVideo=function(a){return this.video=a};Y.prototype.getPlayerType=function(){return this.playerType};Y.prototype.createPlugins=function(){var a,b,c,e,p,d;e=[];p=this.getPlayerType();d=u.plugins;for(c in d)a=d[c],c in this.config&&(b=
this.config[c],null!=b&&!1!==b.enabled&&(a=a[p],null==a?this.logger.debug("Plugin could not be found: "+c):(b=new a(this,b),e.push(b))));this.sendNotification(Lb.REGISTER_PLUGINS,e);return e};Y.prototype.createVideo=function(){return null};Y.prototype.initialize=function(){Y.__super__.initialize.call(this);this.video=this.createVideo();this.createPlugins()};Y.prototype.listNotificationEvents=function(){return Y.__super__.listNotificationEvents.call(this).concat([d.READY,d.LOAD_START,d.TIME_UPDATE,
d.DURATION_CHANGE,d.ERROR,d.LOADED_METADATA,d.WAITING,d.SEEKING,d.SEEKED,d.ENDED,d.PROGRESS,d.CAN_PLAY,d.CAN_PLAY_THROUGH,d.PAUSE,d.PLAY,d.PLAYING,d.STARTED,d.PLAY_REQUEST,d.MEDIUM_CHANGE,d.TEMPORAL_TYPE_CHANGE,d.MEDIA_CHANGE,d.VOLUME_CHANGE,d.FAIL_OVER_ATTEMPT,d.PLAYBACK_TARGET_AVAILABLE,d.PLAYBACK_TARGET_CHANGE,d.PLAY_STATE_CHANGE,na.AUTHORIZE,na.AUTHORIZED])};var Ab=function(a,b,c){Ab.__super__.constructor.call(this,a,b,c)};f(Ab,Y);Ab.prototype.playerType="html";Ab.prototype.createAPI=function(){return new pe(this,
this.dispatcher)};Ab.prototype.createVideo=function(){var a,b;a=new Gc("html5","video");b=a.getViewComponent();null==b.dataset&&(b.dataset={});this.sendNotification(d.PLAYBACK_CORE_CHANGE,a);return b};Ab.prototype.createModel=function(){var a,b;b=new R;this.registerProxy(b);this.registerProxy(new V);this.registerProxy(new B(this.config));this.registerProxy(new W(this.config));a=new t;this.registerProxy(a);a.setRenderMode(we.HTML);a=new l;this.registerProxy(a);this.registerProxy(new m);this.registerProxy(new L(a));
this.registerProxy(new La(this.config.params));b.initialize()};Ab.prototype.createView=function(){var a,b;a=this.getViewComponent();this.registerMediator(new oa("html5",a));this.registerMediator(new Va);this.registerMediator(new Mb);this.registerMediator(new Ma);a=new Na;this.registerMediator(a);this.registerMediator(new ud);this.registerMediator(new yb);this.registerMediator(new Hb);this.registerMediator(new lb);this.registerMediator(new Gb);!0===(null!=(b=this.config.titlebar)?b.enabled:void 0)&&
this.registerMediator(new Wa);this.registerMediator(new mb)};Ab.prototype.createController=function(){this.registerCommand(d.PLAY,Jb);this.registerCommand(d.PAUSE,kc);this.registerCommand(d.CHANGE_PLAY_STATE,Hc);this.registerCommand(d.TOGGLE_FULL_SCREEN,bd);this.registerCommand(d.CHANGE_DISPLAY_STATE,xb);this.registerCommand(d.TOGGLE_ACTIVE,ad);this.registerCommand(d.CHANGE_ACTIVE_STATE,vd);this.registerCommand(d.CHANGE_MEDIA,Ic);this.registerCommand(d.MEDIA_CHANGE,Jc);this.registerCommand(d.SET_MEDIA,
Kc);this.registerCommand(d.UPDATE_DATA_BINDINGS,Lc);this.registerCommand(d.START,Dc);this.registerCommand(d.SEEK,zc);this.registerCommand(d.SEEKING,fd);this.registerCommand(d.SEEKED,gd);this.registerCommand(d.CHANGE_VOLUME,ed);this.registerCommand(d.CHANGE_MUTED,ld);this.registerCommand(d.CHANGE_AUTOPLAY,cd);this.registerCommand(d.CHANGE_LOOP,dd);this.registerCommand(d.END,id);this.registerCommand(d.ENDED,Cc);this.registerCommand(d.REPLAY,hd);this.registerCommand(d.ERROR,Mc);this.registerCommand(d.READY,
Nc);this.registerCommand(d.WAITING,kd);this.registerCommand(d.CHANGE_DURATION,Fc);this.registerCommand(d.CHANGE_PARAMS,Oc);this.registerCommand(d.IS_USER_ACTIVE,jd);this.registerCommand(na.CHECK_AUTHORIZATION,md);this.registerCommand(na.AUTHORIZED,nd);this.registerCommand(na.SET_KEY,Pc);this.registerCommand(na.SET_TOKEN,Qc);this.registerCommand(d.INITIALIZED,od);this.registerCommand(d.REGISTER_PLAYBACK_CORE,pd);this.registerCommand(M.TOGGLE_PLAY_PAUSE,Ec);this.registerCommand(M.SEEK,zc);this.registerCommand(d.PLAYBACK_TARGET_CHANGE,
qd);this.registerCommand(d.RECORD_CONTENT_CHANGE,rd);this.registerCommand(d.TIME_UPDATE,sd);this.registerCommand(d.TOGGLE_MUTED,td)};var X=function(){};X.createTextContent=function(a,b){return/[\&<>]/.test(b)?a.createCDATASection(b):a.createTextNode(b)};X.updateTextContent=function(a,b){var c;c=X.createTextContent(a.ownerDocument,b);a.removeChild(a.childNodes[0]);a.appendChild(c);return a};X.serialize=function(a){var b;if(null!=a){if("string"===typeof a)return a;try{return b=new XMLSerializer,b.serializeToString(a)}catch(c){try{return document.implementation.createLSSerializer(),
xmlSerializer.writeToString(a)}catch(e){try{return a.xml}catch(p){}}}}};X.parse=function(a){var b;window.DOMParser?(b=new DOMParser,b=b.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a));return b};var Xb=function(){Xb.__super__.constructor.call(this,this.constructor.NAME,{})};f(Xb,puremvc.Proxy);Xb.NAME="FlashMediaProxy";Xb.prototype.getSrc=function(){return this.data.src};Xb.prototype.setSrc=function(a){return this.data.src=a};var Qc=function(){Qc.__super__.constructor.call(this)};
f(Qc,puremvc.SimpleCommand);Qc.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(V.NAME);a=a.getBody();b.setToken(a);b.setAuthorized(!0)};var Pc=function(){Pc.__super__.constructor.call(this)};f(Pc,puremvc.SimpleCommand);Pc.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(V.NAME);a=a.getBody();b.setKey(a)};var Xa=function(a,b){this.app=a;this.config=b;Xa.__super__.constructor.call(this,this.constructor.NAME);this.proxy=new W(this.config);this.app.registerProxy(this.proxy)};
f(Xa,puremvc.Mediator);Xa.prototype.player=null;Xa.prototype.config=null;Xa.prototype.proxy=null;Xa.NAME="LocalizationWrapper";Xa.prototype.getString=function(a){return this.proxy.getString(a)};Xa.prototype.listNotificationInterests=function(){return[q.CREATE_FLASH_VARS,q.CREATE_XML]};Xa.prototype.handleNotification=function(a){var b,c,e,p,d,f,h,k;Xa.__super__.handleNotification.call(this,a);d=a.getName();a=a.getBody();switch(d){case q.CREATE_FLASH_VARS:e=a.flashvars;c=a.config;null!=c.language&&
(e.locale_setting=c.language);break;case q.CREATE_XML:for(c in d=a.xml,b=d.getElementsByTagName("application")[0],a=d.getElementsByTagName("locales")[0],null==a&&(a=d.createElement("locales"),b.appendChild(a)),k=this.config.locales,k)for(e in p=k[c],b=d.createElement("locale"),b.setAttribute("id",c),a.appendChild(b),p)h=p[e],f=d.createElement("property"),f.setAttribute("key",e),h=X.createTextContent(d,h),f.appendChild(h),b.appendChild(f)}};var Gc=function(a,b){this.mediatorName="#@{getComponentType()}-mediator";
Gc.__super__.constructor.call(this,a,null,null,b)};f(Gc,I);Gc.prototype.componentType="video";var Aa=function(){Aa.__super__.constructor.call(this)};f(Aa,I);Aa.prototype.componentType="layer";Aa.prototype.onRegister=function(){Aa.__super__.onRegister.call(this);this.registerLayer()};Aa.prototype.onRemove=function(){Aa.__super__.onRemove.call(this);this.removeLayer()};Aa.prototype.registerLayer=function(){this.sendNotification(d.ADD_LAYER,this.viewComponent)};Aa.prototype.removeLayer=function(){this.sendNotification(d.REMOVE_LAYER,
this.viewComponent)};var Mb=function(){Mb.__super__.constructor.call(this)};f(Mb,Aa);Mb.prototype.componentName="video";Mb.prototype.video=null;Mb.prototype.listNotificationInterests=function(){return[d.PLAYBACK_CORE_CHANGE]};Mb.prototype.handleNotification=function(a){var b,c,e;b=a.getName();a=a.getBody();switch(b){case d.PLAYBACK_CORE_CHANGE:b=null!=(c=this.video)?"function"===typeof c.getViewComponent?c.getViewComponent():void 0:void 0,null!=b&&this.viewComponent.removeChild(b),this.video=a,b=
null!=(e=this.video)?"function"===typeof e.getViewComponent?e.getViewComponent():void 0:void 0,null!=b&&this.viewComponent.appendChild(b)}};var oa=function(a,b){this.componentName=a;this.layers=[];oa.__super__.constructor.call(this,null,null,null,b)};f(oa,I);oa.prototype.componentType="player";oa.prototype.core=null;oa.prototype.medium=null;oa.prototype.layers=null;oa.prototype.ready=!1;oa.prototype.onRegister=function(){var a;oa.__super__.onRegister.call(this);a=h.getDevice();null!=a&&this.classList.add(a)};
oa.prototype.listNotificationInterests=function(){return[d.DISPLAY_STATE_CHANGE,d.ACTIVE_STATE_CHANGE,d.PLAY_STATE_CHANGE,d.ADD_APPLICATION_STATE,d.REMOVE_APPLICATION_STATE,d.MEDIUM_CHANGE,d.DURATION_CHANGE,d.TEMPORAL_TYPE_CHANGE,d.ADD_LAYER,d.REMOVE_LAYER,d.READY]};oa.prototype.handleNotification=function(a){var b,c,e;b=a.getName();a=a.getBody();switch(b){case d.ACTIVE_STATE_CHANGE:case d.PLAY_STATE_CHANGE:case d.DISPLAY_STATE_CHANGE:case d.MEDIUM_CHANGE:b=a.newState;a=a.oldState;null!=a&&this.classList.contains(a)&&
this.classList.remove(a);null!=b&&this.classList.add(b);break;case d.ADD_APPLICATION_STATE:this.classList.add(a);break;case d.REMOVE_APPLICATION_STATE:this.classList.remove(a);break;case d.TEMPORAL_TYPE_CHANGE:"live"===a?this.sendNotification(d.ADD_APPLICATION_STATE,"live"):this.sendNotification(d.REMOVE_APPLICATION_STATE,"live");break;case d.DURATION_CHANGE:3600<a?this.sendNotification(d.ADD_APPLICATION_STATE,"long-form"):this.sendNotification(d.REMOVE_APPLICATION_STATE,"long-form");break;case d.ADD_LAYER:this.addLayer(a);
break;case d.REMOVE_LAYER:this.removeLayer(a);break;case d.READY:for(this.ready=!0,e=this.layers,b=0,c=e.length;b<c;b++)a=e[b],this.viewComponent.contains(a)||this.viewComponent.appendChild(a)}};oa.prototype.addLayer=function(a){this.layers.push(a);this.ready&&this.viewComponent.appendChild(a)};oa.prototype.removeLayer=function(a){this.viewComponent.contains(a)&&this.viewComponent.removeChild(a);a=this.layers.indexOf(a);0<=a&&this.layers.splice(a,1)};var Yb=function(a){Yb.__super__.constructor.call(this,
this.type,a)};f(Yb,oa);Yb.NAME="FlashPlayerMediator";Yb.prototype.type="flash";Yb.prototype.addLayer=function(a){Yb.__super__.addLayer.call(this,a);-1===a.className.indexOf("video")||this.viewComponent.contains(a)||this.viewComponent.appendChild(a)};var lc=function(){lc.__super__.constructor.call(this)};f(lc,puremvc.SimpleCommand);lc.prototype.getProxy=function(){return this.facade.retrieveProxy(y.NAME)};var Ad=function(){Ad.__super__.constructor.call(this)};f(Ad,lc);Ad.prototype.execute=function(a){this.facade.logger.debug("AISPauseCommand");
a=this.getProxy();a.vcsSet(a.currentTime)};var Bd=function(){Bd.__super__.constructor.call(this)};f(Bd,lc);Bd.prototype.execute=function(a){this.facade.logger.debug("AISEndedCommand");this.getProxy().vcsSet(0)};var Cd=function(){};Cd.setCookie=function(a,b,c,e,d){var g;b=escape(b);null!=c&&(g=new Date,g.setDate(g.getDate()+c),b+="; expires\x3d"+g.toUTCString());null!=d&&(b+="; domain\x3d"+d);null!=e&&(b+="; path\x3d"+e);return document.cookie=a+"\x3d"+b};Cd.getCookie=function(a){var b,c,e,d,g,f;c=
document.cookie.split(";");g=0;for(f=c.length;g<f;g++)if(b=c[g],e=b.indexOf("\x3d"),d=b.substr(0,e).replace(/^\s+|\s+$/g,""),b=unescape(b.substr(e+1)),d===a)return b};Cd.deleteCookie=function(a){return this.setCookie(a,"",-1)};var Dd=function(){Dd.__super__.constructor.call(this)};f(Dd,lc);Dd.prototype.execute=function(a){var b;b=this.getProxy();a=Math.floor(a.getBody());0!==a&&0===a%30&&a!==b.currentTime&&b.vcsSet(a);b.currentTime=a};var y=function(a){y.__super__.constructor.call(this,a)};f(y,N);
y.NAME=x.NAME;y.prototype.client=null;y.prototype.currentTime=null;y.prototype.idps=null;y.prototype.idp=null;y.prototype.token=null;y.prototype.authz=null;y.prototype.defaults={plugin:null,platformID:null,resourceID:null,contentID:null,responseTargets:null,logos:{base:null,group:null,key:"full"}};y.prototype.getScript=function(){return this.value.plugin};y.prototype.initialize=function(){this.client=window.ais_client;this.client.setLogging(this.facade.logger.enabled);this.client.setPlatformId(this.value.platformID);
this.client.setUseCache(!/MSIE [7-8]/.test(navigator.userAgent));this.client.assignhandler("bounce",this.bounceHandler.bind(this));this.client.assignhandler("chooser",this.chooserHandler.bind(this));this.client.assignhandler("init",this.initHandler.bind(this));this.client.assignhandler("authz_query",this.authz_queryHandler.bind(this));this.client.assignhandler("identity",this.identityHandler.bind(this));this.client.assignhandler("logout_result",this.logoutHandler.bind(this));this.client.assignhandler("vcs",
this.vcsHandler.bind(this));window.onunload=function(){}};y.prototype.authorize=function(){this.token=this.authz=null;this.disengage();this.sendNotification("startAuthentication")};y.prototype.authorized=function(a){null==a&&(a=this.token);this.engage();this.sendNotification("authenticationComplete");this.sendNotification(na.AUTHORIZED,a)};y.prototype.play=function(a){this.sendNotification(d.INITIALIZED);this.sendNotification(d.PLAY);if(null!=a)return this.sendNotification(d.SEEK,a)};y.prototype.engage=
function(){this.facade.registerCommand(d.TIME_UPDATE,Dd);this.facade.registerCommand(d.PAUSE,Ad);this.facade.registerCommand(d.ENDED,Bd)};y.prototype.disengage=function(){this.facade.removeCommand(d.TIME_UPDATE);this.facade.removeCommand(d.PAUSE);this.facade.removeCommand(d.ENDED)};y.prototype.logout=function(){var a,b,c;a=(null!=(b=this.idp.window_display)?b.method:void 0)||"redirect";b=this.getTarget(a);this.setRedirect(a);switch(a){case "redirect":window.open(this.client.logoutFormat(b),"_top");
break;case "popup":c=this.idp.window_display.width||320,a=this.idp.window_display.height||240,window.open(this.client.logoutFormat(b),"ais_popup","width\x3d"+c+",height\x3d"+a)}};y.prototype.bounce=function(a){this.client.bounce()};y.prototype.init=function(a){this.client.init()};y.prototype.choose=function(){this.client.chooser()};y.prototype.resourceAccess=function(a){null==a&&(a=this.value.resourceID);this.client.resourceAccess(a)};y.prototype.vcsSet=function(a){a=h.formatTimecode(a);return this.client.vcsSet(this.value.contentID,
a)};y.prototype.bounceHandler=function(a,b){var c;c="true"===b.authenticated.toString();!1===c?(this.sendNotification(d.DISPATCH_EVENT,new U("authenticationfailed")),this.choose()):!0===c&&this.init()};y.prototype.initHandler=function(a,b){var c,e,p,g;this.facade.logger.debug(a,b);this.idp=b.idps;this.facade.idps={};p=b.idps;for(c in p){p=p[c];this.facade.idps.key=c;for(e in p)g=p[e],this.facade.idps[e]=g;break}for(c in b)p=b[c],"idps"!==c&&null!=p&&(this.facade[c]=p);this.facade.idps.logo=this.value.logos.base+
this.facade.idps.logos[this.value.logos.key];this.facade.app.sendNotification(d.REMOVE_APPLICATION_STATE,"authenticating");this.sendNotification("aisauthenticated",this.facade.idps);this.resourceAccess(this.value.resourceID)};y.prototype.chooserHandler=function(a,b){this.facade.logger.debug(a,b.authenticated);this.facade.sendNotification(d.ADD_APPLICATION_STATE,"authenticating");b.possible_idps=this.idps=this.sort(b.possible_idps,"value","display_name");this.sendNotification("chooseAuthProvider",
b)};y.prototype.launchIDPLogin=function(a){var b,c,e;this.sendNotification("aisathenticating",!0);b=this.idps[a];c=(null!=(e=b.window_display)?e.method:void 0)||"redirect";e=this.getTarget(c);this.setRedirect(c);switch(c){case "redirect":window.open(this.client.loginFormat(a,e),"_top");break;case "popup":c=b.window_display.width||320,b=b.window_display.height||240,window.open(this.client.loginFormat(a,e),"ais_popup","width\x3d"+c+",height\x3d"+b)}};y.prototype.identityHandler=function(a,b){this.facade.logger.debug(a,
b)};y.prototype.authz_queryHandler=function(a,b){var c;this.facade.logger.debug(a,b);c="true"===b.authorization.toString();!1===c?(this.sendNotification(na.AUTHORIZATION_FAILED),this.authorize()):!0===c&&(this.authz=b,c={mvpdName:this.facade.idps.name,viewerId:this.client.aisuid,"std:viewerId":this.client.aisuid},this.facade.app.sendNotification("mediaanalytics:setDimensions",c),this.facade.viewerId=this.client.aisuid,c=b.resource,null!=c&&(this.facade.resource=c),this.token="hdnea\x3d"+b.security_token,
this.sendNotification(na.SET_KEY,"hdnea\x3d"),this.sendNotification(na.SET_TOKEN,b.security_token),this.sendNotification("aisathenticating",!1),null!=this.value.contentID?this.client.vcsGet(this.value.contentID):this.authorized(this.token))};y.prototype.logoutHandler=function(a,b){top.location.href=top.location.href};y.prototype.vcsHandler=function(a,b){"get"===b.operation&&("00:00:00"===b.ph_pos||"00:00"===b.ph_pos?(this.client.vcsSet(this.value.contentID,b.ph_pos),this.authorized(this.token)):this.sendNotification("choosePlayOptions",
h.flattenTimecode(b.ph_pos)))};y.prototype.sort=function(a,b,c){var e,d,g,f,h;f={};e=[];d=0;for(g in a)h=a[g],e[d]={key:g,value:h[c]},d++;e.sort(function(a,c){var e,d;e="value"===b?a.value.toLowerCase():a.key.toLowercase();d="value"===b?c.value.toLowerCase():c.key.toLowercase();return e<d?-1:e>d?1:0});d=c=0;for(g=e.length;c<g;d=++c)d=e[d],f[d.key]=a[d.key];return f};y.prototype.setRedirect=function(a){var b,c,e;try{b=/\/dev\./,e=window.top.location.href||window.top.location,c=b.test(e)?e.replace(b,
"/"):null,Cd.setCookie(this.getTarget(a),e,1,"/",c)}catch(d){}};y.prototype.getTarget=function(a){null==a&&(a="redirect");return this.value.responseTargets[a]};var l=function(){l.__super__.constructor.call(this,l.NAME);this.data={core:null,muted:!1,started:!1,volume:1,currentTime:0,duration:0,src:null,ended:!1,paused:!1,seeking:!1,loading:!1};"desktop"===h.getDevice()&&(this.initialized=!0);this.handlers={timeupdate:this.ontimeupdate.bind(this),durationchange:this.ondurationchange.bind(this),play:this.onplay.bind(this),
playing:this.onplaying.bind(this),pause:this.onpause.bind(this),loadeddata:this.onloadeddata.bind(this),waiting:this.onwaiting.bind(this),seeking:this.onseeking.bind(this),seeked:this.onseeked.bind(this),ended:this.onended.bind(this),progress:this.onprogress.bind(this),error:this.onerror.bind(this),loadstart:this.onloadstart.bind(this),canplay:this.oncanplay.bind(this),canplaythrough:this.oncanplaythrough.bind(this),loadedmetadata:this.onloadedmetadata.bind(this)};this.resumeHandlers={seeked:this.resumeseeked.bind(this),
canplay:this.resumecanplay.bind(this)}};f(l,puremvc.Proxy);l.NAME="PlaybackProxy";l.prototype.data=null;l.prototype.initialized=!1;l.prototype.enabled=null;l.prototype.handlers=null;l.prototype.resumeHandlers=null;l.prototype.playWhenLoaded=!1;l.prototype.getEnabled=function(){return this.enabled};l.prototype.setEnabled=function(a){if(a!==this.enabled)return this.enabled=a,!0===this.enabled?this.load():this.applyHandlers(!1),a};l.prototype.applyHandlers=function(a){var b,c,e,d;null==a&&(a=!0);e=this.getVideo();
a=a?"addEventListener":"removeEventListener";d=this.handlers;for(c in d)b=d[c],e[a](c,b)};l.prototype.resumecanplay=function(a){a=a.target;a.removeEventListener("canplay",this.resumeHandlers.canplay);this.handlers.durationchange();0<this.data.currentTime?(a.addEventListener("seeked",this.resumeHandlers.seeked),this.seek()):this.resumecomplete()};l.prototype.resumeseeked=function(a){a.target.removeEventListener("seeked",this.resumeHandlers.seeked);this.resumecomplete()};l.prototype.resumecomplete=
function(){this.data.loading=!1;this.applyHandlers();!0===this.playWhenLoaded&&setTimeout(this.play.bind(this),0)};l.prototype.ontimeupdate=function(a){!0!==this.data.seeking&&(this.data.currentTime=a.target.currentTime,this.sendNotification(d.TIME_UPDATE,this.data.currentTime))};l.prototype.ondurationchange=function(a){var b;b=this.getVideo().duration;b===this.data.duration||0===b||isNaN(b)||(this.data.duration=b,/Android 4/.test(navigator.userAgent)&&-1!==a.target.src.indexOf(".m3u8")||this.sendNotification(d.CHANGE_DURATION,
b))};l.prototype.onplay=function(a){this.data.paused=!1};l.prototype.onplaying=function(a){this.data.paused=!1;this.sendNotification(d.CHANGE_PLAY_STATE,H.PLAYING);this.sendNotification(d.PLAYING)};l.prototype.onpause=function(a){this.data.paused=!0;0<a.target.readyState&&this.sendNotification(d.CHANGE_PLAY_STATE,H.PAUSED)};l.prototype.onloadeddata=function(a){this.sendNotification(d.LOADED_DATA)};l.prototype.onwaiting=function(a){this.sendNotification(d.WAITING)};l.prototype.onseeking=function(a){a.target.removeEventListener("timeupdate",
this.handlers.timeupdate);this.data.seeking=!0;this.sendNotification(d.SEEKING)};l.prototype.onseeked=function(a){this.data.seeking=!1;this.sendNotification(d.SEEKED);a.target.addEventListener("timeupdate",this.handlers.timeupdate)};l.prototype.onended=function(a){this.data.ended=!0;this.sendNotification(d.ENDED)};l.prototype.onprogress=function(a){var b,c;try{c=a.target,b=c.buffered,this.sendNotification(d.PROGRESS,b.end(b.length-1)/c.duration)}catch(e){}};l.prototype.onerror=function(a){this.sendNotification(d.ERROR,
a.target.error)};l.prototype.onloadstart=function(a){this.sendNotification(d.LOAD_START)};l.prototype.oncanplay=function(a){this.sendNotification(d.CAN_PLAY)};l.prototype.oncanplaythrough=function(a){this.sendNotification(d.CAN_PLAY_THROUGH);this.sendNotification(d.PROGRESS,this.getDuration())};l.prototype.onloadedmetadata=function(a){this.sendNotification(d.ENABLE_FULL_SCREEN);this.sendNotification(d.LOADED_METADATA)};l.prototype.reset=function(){this.data.currentTime=0;this.data.duration=0;this.data.src=
null;this.data.ended=!1;this.data.paused=!1;this.data.seeking=!1;this.data.started=!1;this.data.loading=!1};l.prototype.getStarted=function(){return this.data.started};l.prototype.getVideo=function(){return this.facade.getVideo()};l.prototype.canPlayType=function(a){var b;b=this.getVideo().canPlayType(a)||"";(/Android 4\.[1-9]/.test(navigator.userAgent)||/Silk\/3/.test(navigator.userAgent))&&a===h.mimeTypes.m3u8&&(b="maybe");return b};l.prototype.getPaused=function(){return this.data.paused};l.prototype.getEnded=
function(){return this.data.ended};l.prototype.getSeeking=function(){return this.data.seeking};l.prototype.getCurrentTime=function(){return this.data.currentTime};l.prototype.setCurrentTime=function(a){if(a!==this.data.currentTime)return this.data.currentTime=a,this.getStarted()&&this.seek(a),a};l.prototype.seek=function(a){null==a&&(a=this.data.currentTime);this.getVideo().currentTime=a};l.prototype.getSrc=function(){return this.data.src};l.prototype.setSrc=function(a){null!=a&&""!==a||this.sendNotification(d.ERROR,
"The value of src is not supported: "+a);this.reset();return this.data.src=a};l.prototype.getVolume=function(){return this.getVideo().volume};l.prototype.setVolume=function(a){0<=a&&1>=a&&a!==this.getVideo().volume&&this.sendNotification(d.VOLUME_CHANGE,this.getVideo().volume=a);return a};l.prototype.getMuted=function(){return this.data.muted};l.prototype.setMuted=function(a){var b;this.data.muted=a;!0===this.data.muted?(this.data.volume=this.getVolume(),b=0):b=this.data.volume;this.sendNotification(d.CHANGE_VOLUME,
b);return a};l.prototype.getDuration=function(){return this.data.duration};l.prototype.play=function(){!0!==this.data.started?(this.data.started=!0,this.setEnabled(!0),this.playWhenLoaded=!0):!0===this.data.loading?this.playWhenLoaded=!0:this.getVideo().play()};l.prototype.pause=function(){this.getVideo().pause()};l.prototype.load=function(){this.data.loading=!0;this.playWhenLoaded=!1;this.getVideo().addEventListener("canplay",this.resumeHandlers.canplay);this.getVideo().src=this.data.src;this.getVideo().load()};
var Ed=function(){Ed.__super__.constructor.call(this)};f(Ed,puremvc.SimpleCommand);Ed.prototype.execute=function(a){var b,c;this.facade.logger.debug("FlashAuthorizedCommand");a=this.facade.retrieveProxy(Xb.NAME);b=this.facade.retrieveProxy(V.NAME);c=a.getSrc()||"";-1===c.indexOf(".smil")&&(c=b.createURL(c));a.setSrc(c);this.facade.video.authenticationComplete({media:a.getData()})};var Ya=function(a){this.supportedTypes=null==a?[]:a;Ya.__super__.constructor.call(this)};f(Ya,l);Ya.prototype.supportedTypes=
null;Ya.prototype.playbackCoreName=null;Ya.prototype.getPlaybackCoreName=function(){return this.playbackCoreName};Ya.prototype.getSupportedTypes=function(){return this.supportedTypes};Ya.prototype.setSupportedTypes=function(a){return this.supportedTypes=a};Ya.prototype.canPlayType=function(a){return-1!==this.getSupportedTypes().indexOf(a)?"maybe":""};var S=function(a){this.player=a;S.__super__.constructor.call(this)};f(S,Ya);S.NAME=l.NAME;S.prototype.player=null;S.prototype.initialized=!0;S.prototype.playbackCoreName=
"flash";S.prototype.supportedTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"];S.prototype.getPaused=function(){return this.player.getPaused()};S.prototype.getEnded=function(){return this.player.getEnded()};S.prototype.getSeeking=function(){return this.player.getSeeking()};S.prototype.getCurrentTime=function(){return this.player.getCurrentTime()};S.prototype.setCurrentTime=function(a){this.player.setCurrentTime(a);return a};S.prototype.getSrc=function(){return this.player.getSrc()};
S.prototype.setSrc=function(a){this.player.setSrc(a);return a};S.prototype.getVolume=function(){return this.player.getVolume()};S.prototype.setVolume=function(a){this.player.setVolume(a);return a};S.prototype.getMuted=function(){return this.player.getMuted()};S.prototype.setMuted=function(a){this.player.setMuted(a);return a};S.prototype.getDuration=function(a){return this.player.getDuration()};S.prototype.play=function(){this.player.play()};S.prototype.pause=function(){this.player.pause()};S.prototype.load=
function(){this.player.load()};var ma=function(a,b){this.api=a;this.dispatcher=null!=b?b:new Oa(this.api);ma.__super__.constructor.call(this,null,this)};f(ma,puremvc.Mediator);ma.NAME="ModuleDispatcher";ma.prototype.dispatcher=null;ma.prototype.api=null;ma.prototype.onRegister=function(){var a,b=this;a=this.dispatcher.dispatchEvent;this.dispatcher.dispatchEvent=function(c){b.log(b.getMessage(c),c);a(c)}};ma.prototype.listNotificationInterests=function(){return[d.DISPATCH_EVENT].concat(this.facade.listNotificationEvents())};
ma.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();b===d.DISPATCH_EVENT?this.dispatchEvent(a):this.dispatchEvent(this.createEvent(this.getType(b),a))};ma.prototype.createEvent=function(a,b){return new U(a,b)};ma.prototype.dispatchEvent=function(a){this.dispatcher.dispatchEvent(a)};ma.prototype.getType=function(a){return a.replace(RegExp("^"+this.facade.getModuleName()),"")};ma.prototype.getMessage=function(a){return"["+this.facade.getModuleName().toUpperCase()+" EVENT]"};
ma.prototype.log=function(a,b){null!=a&&null!=b&&(null!=b.data?this.facade.logger.log(a,b.type,b,b.data):this.facade.logger.log(a,b.type,b))};var q={READY:"jsApiReady",RESET:"mediaPlayerReset",LOADING:"mediaPlayerLoading",PLAYER_ERROR:"mediaPlayerError",MEDIA_ERROR:"mediaError",ERROR_STREAM_NOT_FOUND:"mediaPlayerErrorStreamNotFound",CAPABILITY_CHANGE:"mediaPlayerCapabilityChange",PLAYBACK_OPEN:"mediaPlayerPlaybackOpen",PLAYING:"mediaPlayerPlaying",ENDED:"mediaPlayerPlaybackSequenceComplete",PAUSED:"mediaPlayerPaused",
BUFFERING:"mediaPlayerBuffering",DURATION_CHANGE:"mediaPlayerDurationChange",TIME_UPDATE:"mediaPlayerPlayheadUpdate",SEEKING_CHANGE:"mediaPlayerSeekingChange",ERROR:"error",VOLUME_CHANGE:"mediaPlayerVolumeChanged",PLAY_STATE_CHANGE:"mediaPlayerPlayStateChange",STATE_CHANGE:"mediaPlayerStateChange",CAPTION_DATA_CHANGE:"mediaPlayerCaptiondataChange",FAIL_OVER_ATTEMPT:"mediaPlayerFailoverAttempt",ELEMENT_EVENT:"mediaPlayerElementEvent",PLAY:"mediaPlayerResumeOrPausePlayback",APPLICATION_STATE_CHANGE:"mediaPlayerApplicationStateChange",
INITIALIZED:"mediaPlayerInitialized",LOAD_STATE_READY:"mediaLoadStateReady",LOAD_STATE_LOADING:"mediaLoadStateLoading",FULLSCREEN_CHANGE:"mediaPlayerFullscreenChange",AUTHORIZE:"mediaPlayerAuthenticate",CAPTIONING_REQUEST:"mediaPlayerCaptioningRequest",CAPTION_LANG_CHANGE:"mediaPlayerCaptionLangChange",RECOMMENDATIONS_LOADED:"mediaPlayerRecommendationsLoaded",RECOMMENDATION_SELECTED:"mediaPlayerRecommendationSelected",SHARE:"mediaPlayerShare",SHARE_REQUEST:"mediaPlayerShareRequest",AUTO_ADVANCE:"mediaPlayerAutoAdvance",
CREATE_FLASH_VARS:"createFlashVars",CREATE_XML:"createXML",FLASH_CREATED:"flashCreated",PLAY_REQUEST:"mediaPlayerPlaybackSequenceInitiated",FEED_LOADED:"mediaPlayerFeedLoaded"},Kb=function(a,b){Kb.__super__.constructor.call(this,a,b)};f(Kb,ma);Kb.NAME="PlayerDispatcher";Kb.prototype.dispatchEvent=function(a){a.player=this.facade.parent;this.dispatcher.dispatchEvent(a)};Kb.prototype.getMessage=function(a){if("timeupdate"!==a.type&&"progress"!==a.type)return Kb.__super__.getMessage.call(this,a)};var mc=
function(a,b){mc.__super__.constructor.call(this,a,b)};f(mc,Kb);mc.NAME="FlashPlayerDispatcher";mc.prototype.getMessage=function(a){if(a.type!==q.TIME_UPDATE&&a.type!==q.CAPTION_DATA_CHANGE&&"adComponentPlaybackProgress"!==a.type&&"adComponentTimeElapsed"!==a.type&&a.type!==q.ELEMENT_EVENT)return mc.__super__.getMessage.call(this,a)};var Fd=function(a,b){Ta.attachModuleDispatcher(a,new mc(this,b));this.getContainer=function(){return a.getViewComponent()};this.getVideo=function(){return a.getVideo()};
this.getConfig=function(){return a.getConfig()};this.destroy=function(){return a.destroy()};this.getFlashXML=function(){var b,e;b=unescape(a.flashvars.settings_xml);e=X.parse(b);e.toString=function(){return b};return e};this.getFlashVars=function(){return a.flashvars};this.evaluateBinding=function(b){return a.video.evaluateBinding(b)};this.recordContentChange=function(b){return a.video.recordContentChange(b)};this.canPlayType=function(a){return 0<=yc.call(h.flashTypes,a)?"maybe":""};this.replay=function(){a.video.replay()};
this.pause=function(){a.video.pause()};this.end=function(){a.video.stopPlayer()};this.getCurrentTime=function(b){return a.video.getCurrentTime()};this.setCurrentTime=function(b){a.video.jumpToTime(b);return b};this.getParams=function(){return a.video.getParams()};this.setParams=function(b){a.video.setParams(b);return b};this.getVolume=function(){return a.video.getVolume()};this.setVolume=function(b,e){a.video.setVolume(b,e||"");return b};this.getDuration=function(){return a.video.getDuration()};this.enterFullScreen=
function(){a.video.enterFullScreen()};this.exitFullScreen=function(){a.video.exitFullScreen()};this.setMedia=a.setMedia.bind(a);this.getMedia=a.getMedia.bind(a);this.load=a.load.bind(a);this.play=a.play.bind(a);this.setMuted=a.setMuted.bind(a);this.getMuted=a.getMuted.bind(a);this.getSrc=a.getSrc.bind(a);this.setSrc=a.setSrc.bind(a);this.setAutoplay=a.setAutoplay.bind(a);this.getAutoplay=a.getAutoplay.bind(a);this.getMedium=a.getMedium.bind(a);this.setMedium=a.setMedium.bind(a);this.setSource=a.setSource.bind(a);
this.getSource=a.getSource.bind(a);this.getSeeking=a.getSeeking.bind(a);this.getPaused=a.getPaused.bind(a);this.getEnded=a.getEnded.bind(a)};f(Fd,w);Fd.prototype.getFlashXML=function(){};Fd.prototype.getFlashVars=function(){};var n=function(a,b,c){var e,d,g,f=this;this.flashObjectID+=Date.now();this.plugins={};n.__super__.constructor.call(this,a,b,c);this.debug=/debug\=true/.test(location.search);this.media={};a=this.config.flash||{};b=!0===(null!=(e=a["static"])?e.enabled:void 0)?a["static"]:a;d=
this.debug&&null!=b.debug?b.debug:b.swf||"amp.swf";g=a.version||"10.1";b=a.expressInstallSWF||"playerProductInstall.swf";c=this.createParams(a);e=this.createAttributes(a);this.flashvars=this.createFlashVars(a);null==this.flashvars.settings_url&&(this.flashvars.settings_xml=this.createXML(this.config));swfobject.embedSWF(d,this.flashObjectID,"100%","100%",g,b,this.flashvars,c,e,function(a){f.createdHandler(a)})};f(n,Y);n.prototype.playerType="flash";n.prototype.flashObjectID="flashObject";n.prototype.playState=
null;n.prototype.loaded=!1;n.prototype.flashvars=null;n.prototype.seeking=!1;n.prototype.paused=!1;n.prototype.ended=!1;n.prototype.media=null;n.prototype.muted=!1;n.prototype.plugins=null;n.prototype.debug=!1;n.prototype.started=!1;n.prototype.createAPI=function(){return new Fd(this,this.dispatcher)};n.prototype.createModel=function(){this.registerProxy(new R);this.registerProxy(new V);this.registerProxy(new Xb);this.registerProxy(new S(this))};n.prototype.createView=function(){this.registerMediator(new Yb(this.getViewComponent()));
this.registerMediator(new Mb);this.registerMediator(new Na);this.registerMediator(new Xa(this,this.config))};n.prototype.createController=function(){this.registerCommand(na.AUTHORIZED,Ed);this.registerCommand(na.SET_TOKEN,Qc);this.registerCommand(na.SET_KEY,Pc)};n.prototype.createVideo=function(){var a,b;a=new Gc("flash","div");b=a.getViewComponent();b.id=b.name=this.flashObjectID;this.sendNotification(d.PLAYBACK_CORE_CHANGE,a);return b};n.prototype.createParams=function(a){var b;b={allowFullScreen:!0,
allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"};null!=a.params&&(null!=a.params.allowFullScreen&&(b.allowFullScreen=a.params.allowFullScreen),null!=a.params.allowScriptAccess&&(b.allowScriptAccess=a.params.allowScriptAccess),null!=a.params.wmode&&(b.wmode=a.params.wmode),null!=a.params.bgColor&&(b.bgColor=a.params.bgColor));"direct"===b.wmode&&(/MSIE/.test(navigator.userAgent)||/Firefox/.test(navigator.userAgent))&&(b.wmode="transparent");return b};n.prototype.getModules=function(){return this.plugins};n.prototype.createPlugins=
function(){var a,b,c;c=u.plugins;for(b in c)if(a=c[b],b in this.config&&!1!==this.config[b].enabled)if(a=a[this.getPlayerType()],null==a)this.logger.debug("Plugin could not be found: "+b);else try{this.plugins[b]=new a(this,this.config[b]),this.registerMediator(this.plugins[b]),this.logger.debug("Plugin loaded: "+b)}catch(e){this.error("Flash Plugin Load Error ("+b+")",e)}};n.prototype.createAttributes=function(a){var b;b={id:this.flashObjectID,name:this.flashObjectID};null!=a.attributes&&(null!=
a.attributes.id&&(b.id=a.attributes.id),null!=a.attributes.name&&(b.name=a.attributes.name));return b};n.prototype.createFlashVars=function(a){var b,c,e,d,g;b={};null!=this.config.autoplay&&(b.auto_play=this.config.autoplay);null!=(null!=(e=this.config.controls)?e.displaySceneMarkers:void 0)&&(b.displaySceneMarkers=this.config.controls.displaySceneMarkers);null!=this.config.rules&&h.mergeRules(this.config.rules);b.hinting_rules=escape(JSON.stringify(h.rules));null!=this.config.media&&(null!=this.config.media.src&&
(this.setSrc(this.config.media.src),b.video_url=escape(this.config.media.src)),null!=this.config.media.source&&0<this.config.media.source.length&&(this.setSource(this.config.media.source),b.video_url=escape(this.media.src)),null!=this.config.media.medium&&(this.setMedium(this.config.media.medium),b.medium=this.config.media.medium),null!=this.config.media.title&&(b.title=escape(this.config.media.title)),null!=this.config.media.poster&&(b.poster=escape(this.config.media.poster)),null!=this.config.media.temporalType&&
(b.temporalType=this.config.media.temporalType));"audio"===this.getMedium()&&(b.controls=!0,b.auto_hide=-1);null!=(null!=(d=this.config.ima)?null!=(g=d.overlay)?g.delay:void 0:void 0)&&(b.overlay_ad_delay=this.config.ima.overlay.delay);null!=this.config.volume&&(b.volume=h.clamp(this.config.volume,0,1));null!=this.config.target&&(b.external_target=this.config.target);null!=this.config.name&&(b.core_player_name=this.config.name);null!=this.config.domain&&(b.embed_domain=b.domain=this.config.domain);
b.auto_replay=!0===this.config.loop;null!=this.config.ticker&&!1!==this.config.ticker.enabled&&(null!=this.config.ticker.url&&(b.ticker_text_url=this.config.ticker.url),null!=this.config.ticker.interval&&(b.ticker_polling_interval=this.config.ticker.interval),null!=this.config.ticker.speed&&(b.ticker_speed=this.config.ticker.speed));null!=this.config.fullscreen&&(b.fullscreen_enabled=!1!==this.config.fullscreen.enabled);null!=this.config.titlebar&&(b.titlebar_enabled=!1!==this.config.titlebar.enabled);
null!=this.config.params&&(b.params=escape(JSON.stringify(this.config.params)));null!=this.config.version&&(b.context_menu_label=this.config.version);b.show_play_button_overlay=!1;b.auto_play_list=!1;b.next_video_timer=0;null==b.context_menu_mode&&(b.context_menu_mode=!0===this.debug?"long":"short");this.sendNotification(q.CREATE_FLASH_VARS,{flashvars:b,config:this.config});if(null!=a.vars)for(c in e=a.vars,e)a=e[c],b[c]=a;return b};n.prototype.createXML=function(a){var b,c,e,d,g,f;d=X.parse(a.flash.xml);
this.sendNotification(q.CREATE_XML,{config:a,xml:d});b=d.getElementsByTagName("plugin");e=a.flash["static"];if(!0===(null!=e?e.enabled:void 0)&&null!=e.plugins)for(g=0,f=b.length;g<f;g++)a=b[g],null!=(c=e.plugins[a.getAttribute("id")])&&(a.setAttribute("type","static"),X.updateTextContent(a,c));else if(!0===this.debug)for(e=0,g=b.length;e<g;e++)a=b[e],"AkamaiAdvancedStreamingPlugin"===a.getAttribute("id")&&(c=a.textContent||a.text,X.updateTextContent(a,c.replace("AkamaiAdvancedStreamingPlugin.swf",
"AkamaiAdvancedStreamingPlugin-logging.swf")));b=X.serialize(d);b=b.match(/<application>[\w\W\s\S\d\D]*<\/application>/)[0]||b;b=b.replace(/[\n\r\t]/g,"");return escape(b)};n.prototype.createdHandler=function(a){var b=this;this.video=a.ref;this.video.className="video";this.video.eventHandler=function(a,e){return b.eventHandler(a,e)};this.sendNotification(q.FLASH_CREATED);null!=this.getMedium()&&this.setMedium(this.media.medium)};n.prototype.eventHandler=function(a,b){var c,e,p,g;try{switch(a){case q.INITIALIZED:g=
p="ready";break;case q.RESET:null==b&&(p="ready");this.started=!1;break;case q.LOADING:g="loadstart";break;case q.PLAYER_ERROR:g=p="error";break;case q.MEDIA_ERROR:g=p="error";break;case q.ERROR_STREAM_NOT_FOUND:g=p="error";break;case q.CAPABILITY_CHANGE:e=b.type;"canPlayChange"===e&&!0===b.enabled?(g="canplay",this.loaded=!0):"canSeekChange"===e&&!0===b.enabled?g="canplaythrough":"temporalChange"===e&&!0===b.enabled&&(g="loadedmetadata");break;case q.PLAYBACK_OPEN:g="started";this.started=!0;break;
case q.PLAYING:this.started||this.sendNotification(d.PLAY,b);g=p="playing";this.paused=this.ended=!1;break;case q.PLAY_REQUEST:g="playrequest";break;case q.PLAY:"paused"!==this.playState&&this.started&&(g="play");break;case q.ENDED:g=p="ended";this.ended=!0;break;case q.PAUSED:g="pause";p="paused";this.paused=!0;break;case q.BUFFERING:"ended"!==this.className&&(g=p="waiting");break;case q.DURATION_CHANGE:isNaN(b.time)||(g="durationchange",b=b.time);break;case q.VOLUME_CHANGE:g="volumechange";break;
case q.TIME_UPDATE:g="timeupdate";break;case q.SEEKING_CHANGE:g=b.seeking?"seeking":"seeked";this.seeking=b.seeking;break;case q.FULLSCREEN_CHANGE:g="fullscreenchange";b="fullScreen"===b.displayState;break;case q.FAIL_OVER_ATTEMPT:g="failoverattempt";break;case q.ERROR:a=null}null!=a&&a!==g&&(this.sendNotification(d.DISPATCH_EVENT,{type:a,data:b,player:this.parent}),this.sendNotification(a,b));null!=g&&("error"===g&&(c=b.error||b,this.error("Flash Error",c)),this.sendNotification(g,b));null!=p&&this.setPlayState(p)}catch(f){this.error("Flash Event Error",
f)}};n.prototype.error=function(a,b){this.logger.error("[AMP ERROR] "+a+":",b)};n.prototype.setPlayState=function(a){var b;if(a!==this.playState)return b={newState:a,oldState:this.playState},this.playState=a,this.sendNotification(d.PLAY_STATE_CHANGE,b),a};n.prototype.setMedia=function(a){this.media=a;null!=this.playState&&this.setPlayState("ready");null!=a.src&&this.setSrc(a.src);null!=a.source&&0<a.source.length&&this.setSource(a.source);this.sendNotification(d.MEDIA_CHANGE,a);this.loaded=!0;this.video.loadURL(this.media.src,
a);return a};n.prototype.getMedia=function(){return this.media};n.prototype.load=function(){this.loaded=!0;this.video.loadURL(this.media.src)};n.prototype.play=function(){this.loaded?this.video.unpause():this.load()};n.prototype.setMuted=function(a){this.muted=a;try{!0===a?this.video.mute():this.video.unmute()}catch(b){this.error("Flash muted error",b)}return a};n.prototype.getMuted=function(){return this.muted};n.prototype.getSrc=function(a){return this.video.getURL()};n.prototype.setSrc=function(a){this.media.src=
a;this.loaded=!1;this.setMedium(h.getMimeType(a));return a};n.prototype.setAutoplay=function(a){this.video.setPlayerProperty("autoplay",a);return a};n.prototype.getAutoplay=function(){return this.video.getPlayerProperty("autoplay")};n.prototype.getMedium=function(){return this.media.medium};n.prototype.setMedium=function(a){var b,c;if(a!==this.media.medium)return null!=this.media.medium&&null!=this.media.medium&&(c="medium-"+this.media.medium),b=this.media.medium=/audio/.test(a)?"audio":"video",this.sendNotification(d.MEDIUM_CHANGE,
{newState:"medium-"+b,oldState:c}),a};n.prototype.setSource=function(a){var b,c=this;if(!(null==a||1>a.length)){this.media.source=a;this.loaded=!1;b=h.selectSource(a,function(a){return c.canPlayType(a)});if(null!=(null!=b?b.src:void 0)&&""!==b.src)this.setSrc(b.src),"undefined"!==typeof type&&null!==type&&this.setMedium(type);else throw Error("No valid source could be found");return a}};n.prototype.getSource=function(a){return this.media.source};n.prototype.getSeeking=function(){return this.seeking};
n.prototype.getPaused=function(){return this.paused};n.prototype.getEnded=function(){return this.ended};n.prototype.getFlashXML=function(){return X.parse(this.getConfigXMLString())};n.prototype.getFlashVars=function(){return this.flashvars};n.prototype.evaluateBinding=function(a){return this.video.evaluateBinding(a)};n.prototype.canPlayType=function(a){return 0<=yc.call(h.flashTypes,a)?"maybe":""};n.prototype.replay=function(){this.video.replay()};n.prototype.pause=function(){this.video.pause()};
n.prototype.getCurrentTime=function(a){return this.video.getCurrentTime()};n.prototype.setCurrentTime=function(a){this.video.jumpToTime(a);return a};n.prototype.getParams=function(){return this.video.getParams()};n.prototype.setParams=function(a){this.video.setParams(a);return a};n.prototype.getVolume=function(){return this.video.getVolume()};n.prototype.setVolume=function(a){this.video.setVolume(a);return a};n.prototype.getDuration=function(){return this.video.getDuration()};n.prototype.enterFullScreen=
function(){this.video.enterFullScreen()};n.prototype.exitFullScreen=function(){this.video.exitFullScreen()};var Ua=function(a){this.module=a;Ua.__super__.constructor.call(this,a.getModuleName(),this)};f(Ua,puremvc.Mediator);Ua.prototype.module=null;Ua.prototype.mediator=null;Ua.prototype.initializeNotifier=function(a){var b,c=this;Ua.__super__.initializeNotifier.call(this,a);b=this.module.listNotificationPublications();null!=b&&(this.mediator=new puremvc.Mediator(this.facade.getModuleName()),this.mediator.listNotificationInterests=
function(){return b},this.mediator.handleNotification=function(a){c.facade.sendNotification(a.getName(),a.getBody(),a.getType())})};Ua.prototype.onRegister=function(){null!=this.mediator&&this.module.registerMediator(this.mediator)};Ua.prototype.onRemove=function(){null!=this.mediator&&this.module.removeMeditator(this.mediator)};Ua.prototype.listNotificationInterests=function(){return this.module.listNotificationInterests()};Ua.prototype.handleNotification=function(a){this.module.sendNotification(a.getName(),
a.getBody(),a.getType())};var Lb={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered"},k=function(a,b,c){var e;this.target=a;this.type=b;this.handler=c;this.trigger=ve(this.trigger,this);k.instances.push(this);this.types=[];(e=this.type,0<=yc.call(k.EVENTS,e))?h.isTouchDevice()?(this.types.push(k.TOUCH_EVENTS[this.type]),this.type===k.TOUCH_EVENTS[1]&&this.types.push(k.TOUCH_EVENTS[4])):this.types.push(k.MOUSE_EVENTS[this.type]):this.type instanceof Array?this.types=this.type:
this.types.push(this.type);this.bind()};k.PRESS=0;k.RELEASE=1;k.MOVE=2;k.CLICK=3;k.CONTEXTMENU=4;k.EVENTS=[k.PRESS,k.RELEASE,k.MOVE,k.CLICK,k.CONTEXTMENU];k.MOUSE_EVENTS=["mousedown","mouseup","mousemove","click","contextmenu"];k.TOUCH_EVENTS=["touchstart","touchend","touchmove","click","touchcancel"];k.instances=[];k.create=function(a,b,c){return new k(a,b,c)};k.bind=function(a,b){var c,e,d,g;g=k.instances;c=e=0;for(d=g.length;e<d;c=++e)c=g[c],c.target===a&&(null!=b&&c.type!==b||c.bind())};k.unbind=
function(a,b){var c,e,d,g;g=k.instances;c=e=0;for(d=g.length;e<d;c=++e)c=g[c],c.target===a&&(null!=b&&c.type!==b||c.unbind())};k.clear=function(a,b){var c,e,d,g,f;f=k.instances;c=d=0;for(g=f.length;d<g;c=++d)e=f[c],(null!=e?e.target:void 0)!==a||null!=b&&e.type!==b||(e.clear(),k.instances.splice(c,1))};k.prototype.types=null;k.prototype.bind=function(){var a,b,c,e;e=this.types;b=0;for(c=e.length;b<c;b++)a=e[b],null!=this.target.addEventListener?this.target.addEventListener(a,this.trigger,!1):null!=
this.target.attachEvent&&this.target.attachEvent("on"+a,this.trigger)};k.prototype.unbind=function(){var a,b,c,e;e=this.types;b=0;for(c=e.length;b<c;b++)a=e[b],null!=this.target.removeEventListener?this.target.removeEventListener(a,this.trigger):null!=this.target.attachEvent&&this.target.removeEvent("on"+a,this.trigger)};k.prototype.clear=function(){this.unbind();this.types=this.type=this.handler=this.target=null};k.prototype.trigger=function(a){this.handler(a)};var Bb=function(){Bb.__super__.constructor.call(this);
null==this.contextName&&(this.contextName=this.constructor.NAME)};f(Bb,puremvc.Proxy);Bb.prototype.contextName=null;Bb.prototype.contextData=null;Bb.prototype.getContextName=function(){return this.contextName};Bb.prototype.getContextData=function(){return this.contextData};var jc=function(){jc.__super__.constructor.call(this)};f(jc,puremvc.SimpleCommand);jc.prototype.execute=function(a){this.sendNotification(d.PLAY_REQUEST)};var nc=function(a){nc.__super__.constructor.call(this,a)};f(nc,ma);nc.prototype.dispatchEvent=
function(a){a.player=this.facade.app.parent;this.dispatcher.dispatchEvent(a)};nc.prototype.getMessage=function(a){return nc.__super__.getMessage.call(this,a).replace("[","["+this.facade.app.getModuleName().toUpperCase()+" ")};var W=function(a){var b,c;W.__super__.constructor.call(this);if(null!=a&&(null!=a.language&&(this.data.language=a.language),null!=a.locales))for(c in a.locales)if(null!=this.data.locales[c])for(b in a.locales[c])this.data.locales[c][b]=a.locales[c][b];else this.data.locales[c]=
a.locales[c];this.setLocale(this.data.language)};f(W,Bb);W.NAME="LocalizationProxy";W.prototype.contextName="l10n";W.prototype.data={language:navigator.language||navigator.browserLanguage,locales:{en:{MSG_LIVE:"LIVE",MSG_REPLAY:"Replay",MSG_BUFFERING:"buffering...",MSG_CC:"CC",MSG_CC_TITLE:"Captions",MSG_CC_LANGUAGE:"Track :",MSG_CC_PRESETS:"Presets :",MSG_CC_FONT:"Font :",MSG_CC_EDGE:"Edge :",MSG_CC_SIZE:"Size :",MSG_CC_SCROLL:"Scroll :",MSG_CC_COLOR:"Color :",MSG_CC_BACKGROUND:"Background :",MSG_CC_WINDOW:"Window :",
MSG_CC_OPACITY:"Opacity :",MSG_CC_SHOW_ADVANCED:"Show Advanced Settings",MSG_CC_HIDE_ADVANCED:"Hide Advanced Settings",MSG_CC_RESET:"Default",MSG_CC_CANCEL:"Cancel",MSG_CC_APPLY:"Apply",MSG_NEXT_VIDEO:"Video starts in: ",MSG_NEXT_AD:"Next ad starts in: ",MSG_CLOSE:"close",MSG_EN:"English",MSG_ES:"Spanish",MSG_DE:"German",MSG_FR:"French",MSG_IT:"Italian",MSG_RU:"Russian"}}};W.prototype.locale=null;W.prototype.getContextData=function(){return this.locale};W.prototype.getLanguage=function(){return this.data.language};
W.prototype.setLanguage=function(a){this.data.language=a;this.setLocale(a);this.sendNotification(d.LANGUAGE_CHANGED,a);return a};W.prototype.setLocale=function(a){this.locale=this.data.locales[a];null==this.locale&&(this.locale=this.data.locales[a.substring(0,2)]);return a};W.prototype.getLocales=function(){return this.data.locales};W.prototype.setLocales=function(a){return this.data.locales=a};W.prototype.getString=function(a){return(this.locale||this.data.locales.en)[a]||""};W.prototype.getLanguageString=
function(a){var b;if("string"!==typeof a||null==a||""===a)return"";b="MSG_"+a.toUpperCase();b=this.getString(b);""===b&&(a=a.split("-").shift(),b="MSG_"+a.toUpperCase(),b=this.getString(b));return b};var na={CHECK_AUTHORIZATION:"checkAuthorization",AUTHORIZATION_FAILED:"authorizationfailed",AUTHORIZE:"authorize",AUTHORIZED:"authorized",SET_TOKEN:"settoken",SET_KEY:"setkey"},V=function(){V.__super__.constructor.call(this,this.constructor.NAME,{});this.setupHDN1()};f(V,puremvc.Proxy);V.NAME="SecurityProxy";
V.prototype.setupHDN1=function(){var a=this;return window.retrieveToken=function(b,c){var e;a.facade.logger.debug("HDN1: Token Requested",b,c);e=a.getToken();null!=e?a.facade.video.tokenRetrievalSuccess("\x26primaryToken\x3d"+e):a.sendNotification(na.AUTHORIZE);return!0}};V.prototype.getKey=function(){return this.data.key};V.prototype.setKey=function(a){return this.data.key=a};V.prototype.getToken=function(){return this.data.token};V.prototype.setToken=function(a){return this.data.token=a};V.prototype.getSecret=
function(){var a;if(null==this.data.token)return null;a="";null!=this.data.key&&(a+=this.data.key);return a+=this.data.token};V.prototype.createURL=function(a){var b;b=this.getSecret();null!=b&&(a+=/\?/.test(a)?"\x26":"?",a+=b);return a};V.prototype.getAuthorized=function(){return this.data.authorized};V.prototype.setAuthorized=function(a){return this.data.authorized=a};V.prototype.getProvider=function(){return this.data.provider};V.prototype.setProvider=function(a){return this.data.provider=a};var Hc=
function(){Hc.__super__.constructor.call(this)};f(Hc,puremvc.SimpleCommand);Hc.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(t.NAME);a=a.getBody();b.setPlayState(a)};var Jc=function(){Jc.__super__.constructor.call(this)};f(Jc,puremvc.SimpleCommand);Jc.prototype.execute=function(a){var b,c;this.facade.logger.debug("MediaChangeCommand",a.getBody());b=a.getBody();this.facade.retrieveProxy(L.NAME).setPlaybackType(b.type);c=this.facade.retrieveProxy(l.NAME);c.setSrc(b.src);c.setCurrentTime(b.startTime||
0);a=this.facade.retrieveProxy(B.NAME);!0===(c.initialized&&(a.getAutoplay()||!0===b.autoplay))&&setTimeout(this.sendNotification.bind(this,d.PLAY),0)};var Fc=function(){Fc.__super__.constructor.call(this)};f(Fc,puremvc.SimpleCommand);Fc.prototype.execute=function(a){var b;this.facade.logger.debug("ChangeDurationCommand",a.getBody());a=a.getBody();b=this.facade.retrieveProxy(m.NAME);b.getDuration()!==a&&b.setDuration(a)};var Mc=function(){Mc.__super__.constructor.call(this)};f(Mc,puremvc.SimpleCommand);
Mc.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(l.NAME).getVideo();k.clear(b);this.facade.logger.error("[AMP ERROR]",a.getBody());this.sendNotification(d.CHANGE_PLAY_STATE,H.ERROR)};var Nc=function(){Nc.__super__.constructor.call(this)};f(Nc,puremvc.SimpleCommand);Nc.prototype.execute=function(a){var b,c;this.facade.logger.debug("ReadyCommand");a=null!=(b=this.facade.config)?b.volume:void 0;null!=a&&this.sendNotification(d.CHANGE_VOLUME,a);this.sendNotification(d.CHANGE_DISPLAY_STATE,
ha.NORMAL);this.sendNotification(d.CHANGE_PLAY_STATE,H.READY);this.sendNotification(d.CHANGE_ACTIVE_STATE,za.ACTIVE);b=null!=(c=this.facade.config)?c.media:void 0;null!=b&&setTimeout(this.sendNotification.bind(this,d.SET_MEDIA,b),0)};var Lc=function(){Lc.__super__.constructor.call(this)};f(Lc,puremvc.SimpleCommand);Lc.prototype.execute=function(a){this.facade.logger.debug("UpdateDataBindingsCommand");a=a.getBody()||{};this.facade.retrieveProxy(R.NAME).compile(a.contexts,a.suppressErrors)};var Oc=
function(){Oc.__super__.constructor.call(this)};f(Oc,puremvc.SimpleCommand);Oc.prototype.execute=function(a){this.facade.logger.debug("ChangeParamsCommand",a.getBody());a=a.getBody();this.facade.retrieveProxy(La.NAME).setData(a);this.sendNotification(d.UPDATE_DATA_BINDINGS,{suppressErrors:!0})};var Kc=function(){Kc.__super__.constructor.call(this)};f(Kc,puremvc.SimpleCommand);Kc.prototype.execute=function(a){var b;a=a.getBody();this.facade.logger.debug("SetMediaCommand",a);this.sendNotification(d.CHANGE_MEDIA,
a);b=this.facade.retrieveProxy(m.NAME);a=b.getData();!0===b.authorized&&this.sendNotification(d.MEDIA_CHANGE,a)};var Ic=function(){Ic.__super__.constructor.call(this)};f(Ic,puremvc.SimpleCommand);Ic.prototype.execute=function(a){var b;this.facade.logger.debug("ChangeMediaCommand",a.getBody());a=a.getBody();b=this.facade.retrieveProxy(m.NAME);this.sendNotification(d.CHANGE_PLAY_STATE,H.READY);this.sendNotification(d.CHANGE_ACTIVE_STATE,za.ACTIVE);try{b.setData(a)}catch(c){this.sendNotification(d.ERROR,
c.message)}this.sendNotification(d.UPDATE_DATA_BINDINGS);this.sendNotification(na.AUTHORIZE)};var Na=function(){Na.__super__.constructor.call(this)};f(Na,Aa);Na.prototype.componentName="overlays";Na.NAME="OverlayLayerMediator";Na.prototype.createMediatorName=function(){return Na.NAME};Na.prototype.listNotificationInterests=function(){return[d.ADD_OVERLAY,d.REMOVE_OVERLAY]};Na.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.ADD_OVERLAY:this.viewComponent.appendChild(a);
break;case d.REMOVE_OVERLAY:this.viewComponent.removeChild(a)}};var Ma=function(){Ma.__super__.constructor.call(this)};f(Ma,Aa);Ma.prototype.componentName="poster";Ma.prototype.poster=null;Ma.prototype.clickHandler=null;Ma.prototype.onRegister=function(){this.poster=this.create("poster-content");this.poster.onclick=this.onclick.bind(this);Ma.__super__.onRegister.call(this)};Ma.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();this.sendNotification(M.TOGGLE_PLAY_PAUSE,!0);
return!1};Ma.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA]};Ma.prototype.handleNotification=function(a){switch(a.getName()){case d.CHANGE_MEDIA:a=a.getBody().poster,a=null!=a&&""!==a?'\x3cimg src\x3d"'+a+'" class\x3d"'+this.cssPrefix+'poster-image" /\x3e':"",this.poster.innerHTML=a}};var mb=function(){mb.__super__.constructor.call(this)};f(mb,Aa);mb.prototype.message=null;mb.prototype.componentName="error";mb.prototype.onRegister=function(){mb.__super__.onRegister.call(this);
this.message=this.create("error-message")};mb.prototype.listNotificationInterests=function(){return[d.ERROR]};mb.prototype.handleNotification=function(a){var b;switch(a.getName()){case d.ERROR:a=a.getBody();b="Error: ";switch(a.code){case MediaError.MEDIA_ERR_ABORTED:b+="Media was aborted.";break;case MediaError.MEDIA_ERR_DECODE:b+="Decode Error.";break;case MediaError.MEDIA_ERR_NETWORK:b+="Network Error.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:b+="Source not supported.";break;default:b+=
a}this.message.textContent=b}};var Wa=function(){Wa.__super__.constructor.call(this)};f(Wa,ba);Wa.prototype.componentName="title-bar";Wa.prototype.title=null;Wa.prototype.description=null;Wa.prototype.onRegister=function(){this.title=this.create("title-text");this.description=this.create("description-text");Wa.__super__.onRegister.call(this)};Wa.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA]};Wa.prototype.handleNotification=function(a){var b;switch(a.getName()){case d.CHANGE_MEDIA:a=
a.getBody(),b=a.title,null==b||""===b||"undefined"===b?this.classList.add("hidden"):(this.title.innerHTML=b,this.description.innerHTML=a.description?a.description:"",this.classList.remove("hidden"))}};var Cb=function(a){Ta.attachModuleDispatcher(a,new nc(this));this.getConfig=function(){return a.getConfig()}};f(Cb,Ta);Cb.prototype.getConfig=function(){};var ic={PREFIX:"akamai-"},Z=function(a,b){this.app=a;this.logger=this.app.logger;Z.__super__.constructor.call(this,b)};f(Z,D);Z.NAME="Plugin";Z.prototype.app=
null;Z.prototype.initialize=function(){this.createModel();this.createController()};Z.prototype.createAPI=function(){return new Cb(this)};Z.prototype.onRegister=function(){var a;a=this.retrieveProxy(N.NAME);null==(null!=a?a.getLoaded:void 0)||a.getLoaded()?this.registered():a.load(this.registered.bind(this))};Z.prototype.registered=function(){var a;this.createView();null!=(a=this.retrieveProxy(N.NAME))&&"function"===typeof a.initialize&&a.initialize();this.sendNotification(Lb.PLUGIN_REGISTERED,this)};
Z.prototype.listNotificationPublications=function(){var a,b;return[d.ADD_LAYER,d.REMOVE_LAYER,d.ADD_OVERLAY,d.REMOVE_OVERLAY,d.ADD_APPLICATION_STATE,d.REMOVE_APPLICATION_STATE,d.IS_USER_ACTIVE].concat(function(){var c;c=[];for(a in Lb)b=Lb[a],c.push(b);return c}())};var Va=function(){this.plugins=[];this.registered=[];Va.__super__.constructor.call(this,this.constructor.NAME,{})};f(Va,puremvc.Mediator);Va.NAME="PluginAdapter";Va.prototype.plugins=null;Va.prototype.registered=null;Va.prototype.onRegister=
function(){return Va.__super__.onRegister.call(this)};Va.prototype.listNotificationInterests=function(){return[Lb.REGISTER_PLUGINS,Lb.PLUGIN_REGISTERED]};Va.prototype.handleNotification=function(a){var b,c,e;b=a.getName();a=a.getBody();switch(b){case Lb.REGISTER_PLUGINS:e=this.plugins=a;a=0;for(c=e.length;a<c;a++)b=e[a],this.facade.registerModule(b);break;case Lb.PLUGIN_REGISTERED:this.registered.push(a),this.facade.logger.debug("Plugin Registered: "+a.constructor.NAME),this.registered.length===this.plugins.length&&
this.sendNotification(d.READY,this.facade.config)}};var Za=function(a){this.element=a};Za.prototype.element=null;Za.prototype.prefix=ic.PREFIX;Za.prototype.contains=function(a){return this.constructor.contains(a,this.element,this.prefix)};Za.prototype.add=function(a){this.constructor.add(a,this.element,this.prefix)};Za.prototype.remove=function(a){this.constructor.remove(a,this.element,this.prefix)};Za.prototype.toggle=function(a){return this.constructor.contains(a,this.element,this.prefix)};Za.contains=
function(a,b,c){var e;null==c&&(c="");a=c+a;return null!=(null!=(e=b.classList)?e.contains:void 0)?b.classList.contains(a):-1!==b.className.indexOf(a)};Za.add=function(a,b,c){var e;null==c&&(c="");c+=a;null!=(null!=(e=b.classList)?e.add:void 0)?b.classList.add(c):this.contains(a,b)||(b.className=""!==b.className?b.className+(" "+c):c)};Za.remove=function(a,b,c){var e;null==c&&(c="");c+=a;null!=(null!=(e=b.classList)?e.remove:void 0)?b.classList.remove(c):this.contains(a,b)&&(a=RegExp(" ?"+c),b.className=
b.className.replace(a,""))};Za.toggle=function(a,b,c){var e;null!=(null!=(e=b.classList)?e.toggle:void 0)?b.classList.toggle(this.prefix+a):this.contains(a,b)?this.remome(a,b):this.add(a,b)};var M={TOGGLE_PLAY_PAUSE:"usertogglePlayPause",PLAY:"userplay",PAUSE:"userpause",SEEK:"userseek"},ya=function(){};ya.create=function(a,b,c,e){var d,g,f,h,k;null==c&&(c="div");"string"===typeof c&&(c=document.createElement(c));d=new Za(c);if(null!=a)for("string"===typeof a&&(a=[a]),h=0,k=a.length;h<k;h++)g=a[h],
d.add(g);c._classList=d;null!=e&&(null!=c.innerText?c.innerText=e:c.textContent=e);null!=b&&(null!=b.getViewComponent&&(f=b.getViewComponent()),null!=f&&(b=f),b.appendChild(c));return c};ya.bindEvents=function(a,b,c){var e,d;null==c&&(c=["onRemove","onRegister"]);for(e in b)d=b[e],0<=yc.call(c,e)||!/^on/.test(e)||null==(null!=d?d.bind:void 0)||(a[e]=d.bind(b))};ya.createUID=function(a){var b,c;null==a&&(a=16);b=Date.now();c=2*a-1;return(Math.round(Math.random()*c+a).toString(16)+b.toString(16)).toUpperCase()};
var Zb=function(){};Zb.prototype.data=null;Zb.prototype.value=null;Zb.prototype.source=null;Zb.prototype.parse=function(a){};Zb.prototype.compile=function(a,b){};var R=function(){R.__super__.constructor.call(this,this.constructor.NAME,{});this.data={};this.contextMap={};this.configurationMap={}};f(R,puremvc.Proxy);R.NAME="DataBindingProxy";R.prototype.contextMap=null;R.prototype.configurationMap=null;R.prototype.paramsProxy=null;R.prototype.initialize=function(){this.paramsProxy=this.facade.retrieveProxy(La.NAME);
this.registerContext(this.facade.retrieveProxy(m.NAME));this.registerContext(this.facade.retrieveProxy(W.NAME));this.registerContext(this.facade.retrieveProxy(L.NAME));return this.update()};R.prototype.registerContext=function(a){null!=a&&(this.contextMap[a.getContextName()]=a)};R.prototype.retrieveContext=function(a){return this.contextMap[a]};R.prototype.removeContext=function(a){var b;b=this.contextMap[a];delete this.contextMap[a];return b};R.prototype.registerConfiguration=function(a){null!=a&&
(this.configurationMap[a.getConfigurationName()]=a,a.compile(this.context,!0))};R.prototype.retrieveConfiguration=function(a){return this.configurationMap[a]};R.prototype.removeConfiguration=function(a){var b;b=this.configurationMap[a];delete this.configurationMap[a];return b};R.prototype.evaluateBinding=function(a){a=new nb(a);a.compile(this.data);return a.value};R.prototype.update=function(a){var b,c,e,d;this.data.now=Date.now();d=this.contextMap;for(e in d)b=d[e],-1!==(null!=a?"function"===typeof a.indexOf?
a.indexOf(e):void 0:void 0)&&(this.data[e]=b.getContextData());this.paramsProxy.compile(this.data);b=this.paramsProxy.value;for(c in b)a=b[c],this.data[c]=a;return this.data};R.prototype.compile=function(a,b){var c,e,d,g,f;null==b&&(b=!1);this.update(a);e=h.clone(this.data);g=this.paramsProxy.getConfigurationName();f=this.configurationMap;for(d in f)c=f[d],d!==g&&c.compile(e,b)};var ob=function(a){null!=a&&this.parse(a)};f(ob,Zb);ob.prototype.data=null;ob.prototype.value=null;ob.prototype.source=
null;ob.prototype.parse=function(a){return a instanceof Array?new oc(a):a instanceof Object?new Ib(a):new nb(a)};var oc=function(a){oc.__super__.constructor.call(this,a)};f(oc,ob);oc.prototype.parse=function(a){var b,c,e,d;this.data=[];b=e=0;for(d=a.length;e<d;b=++e)c=a[b],this.data[b]=oc.__super__.parse.call(this,c);return this.data};oc.prototype.compile=function(a,b){var c,e,d,g,f;null==a&&(a={});null==b&&(b=!1);this.value=[];f=this.data;c=d=0;for(g=f.length;d<g;c=++d){e=f[c];try{this.value[c]=
e.compile(a,b)}catch(h){this.value[c]=null,b||G.error(h)}}return this.value};var Rc=function(a){this.message=Rc.MESSAGE+a};f(Rc,Error);Rc.MESSAGE="Tokenization Error: Could not find token value for: ";var pc=function(a){pc.__super__.constructor.call(this,a)};f(pc,ob);pc.prototype.parse=function(a){return this.source=this.data=this.value=a};pc.prototype.compile=function(a,b){return this.value};var qc=function(a){qc.__super__.constructor.call(this,a)};f(qc,ob);qc.prototype.exec=null;qc.prototype.parse=
function(a){this.source=this.data=a;this.exec=new Function("context","var value; with(context){value \x3d "+this.data+";}return value;");return this.data};qc.prototype.compile=function(a,b){null==a&&(a={});if(null==this.exec)return this.value;try{this.value=this.exec(a)}catch(c){if(this.value=null,!suppressErors)throw new Rc(this.data);}return this.value};var nb=function(a){this.token=RegExp(this.tokenStart.source+"([^#]*)"+this.tokenEnd.source,"g");nb.__super__.constructor.call(this,a)};f(nb,ob);
nb.prototype.exec=null;nb.prototype.tokenStart=/#{/;nb.prototype.tokenEnd=/}/;nb.prototype.token=null;nb.prototype.parse=function(a){var b,c,e,d,g,f;this.source=a;this.data=[];if(this.token.test(this.source)){d=[];c=null;a=this.source.replace(this.token,function(a,b,e,g){d.push(b);c="\x3c\x3c\x3e\x3e";0<e&&e<g.length-a.length&&(c+="\x3c\x3c\x3e\x3e");return c});b=a.split("\x3c\x3c\x3e\x3e");g=e=0;for(f=b.length;g<f;g++)a=b[g],""===a&&d[e]?(this.data.push(new qc(d[e])),e++):""!==a&&this.data.push(new pc(a));
1===this.data.length&&(this.data=this.data[0])}else this.data=new pc(a);return this.data};nb.prototype.compile=function(a,b){var c,e,d,g;null==a&&(a={});null==b&&(b=!1);if(null==this.data)return this.value;try{if(this.data instanceof Zb)this.value=this.data.compile(a,b);else for(this.value="",g=this.data,e=0,d=g.length;e<d;e++)c=g[e],this.value+=c.compile(a,b)}catch(f){if(this.value=null,!b)throw new Rc(this.source);}return this.value};var Ib=function(a){Ib.__super__.constructor.call(this,a)};f(Ib,
ob);Ib.prototype.parse=function(a){var b,c;this.source=a;this.data={};for(b in a)c=a[b],this.data[b]=Ib.__super__.parse.call(this,c);return this.data};Ib.prototype.compile=function(a,b){var c,e,d;null==a&&(a={});null==b&&(b=!1);this.value={};d=this.data;for(c in d){e=d[c];try{this.value[c]=e.compile(a,b)}catch(g){this.value[c]=null,G.error(g)}}return this.value};var $a=function(){$a.__super__.constructor.call(this)};f($a,puremvc.Proxy);$a.NAME="PlaybackProxy";$a.prototype.src=null;$a.prototype.canPlayType=
function(a){return"external"===a};$a.prototype.getSrc=function(){return this.src};$a.prototype.setSrc=function(a){null!=a&&""!==a||this.sendNotification(d.ERROR,"The value of src is not supported: "+a);a!==this.src&&(this.src=a);return a};$a.prototype.play=function(){window.open(this.getSrc(),"_blank")};$a.prototype.load=function(){};$a.prototype.setVolume=function(){};var La=function(a){La.__super__.constructor.call(this,a)};f(La,ca);La.NAME="ParamsProxy";La.prototype.defaults={};La.prototype.configurationName=
"params";La.prototype.setData=function(a){var b,c;this.data=(null!=(c=this.configurationData)?c.source:void 0)||{};for(b in a)this.data[b]=a[b];this.configurationData=new Ib(this.data);return this.data};var qe=function(a,b){qe.__super__.constructor.call(this,a,b);this.evaluateBinding=function(b){var e;return null!=(e=a.retrieveProxy(R.NAME))?e.evaluateBinding(b):void 0};this.canPlayType=function(a){return"maybe"};this.play=function(){a.sendNotification(d.PLAY)};this.setParams=function(b){a.sendNotification(d.CHANGE_PARAMS,
b);return b};this.getParams=function(){return a.retrieveProxy(La.NAME).getData()};this.setAutoplay=function(a){return!1};this.getAutoplay=function(){return!1};this.setLoop=function(a){return!1};this.getLoop=function(){return!1};this.setMuted=function(a){return!1};this.getMuted=function(){return!1};this.setMedia=function(b){a.sendNotification(d.SET_MEDIA,b);return b};this.getMedia=function(b){var e;return null!=(e=a.retrieveProxy(m.NAME))?e.getData():void 0};this.setCurrentTime=function(a){return 0};
this.getCurrentTime=function(a){return 0};this.getDuration=function(b){return a.retrieveProxy(m.NAME).getDuration()};this.setSrc=function(b){a.sendNotification(d.SET_MEDIA,{src:b});return b};this.getSrc=function(b){return a.retrieveProxy(m.NAME).getSrc()};this.setSource=function(b){a.sendNotification(d.SET_MEDIA,{source:b});return b};this.getSource=function(){return a.retrieveProxy(m.NAME).getSource()};this.setVolume=function(a){return a};this.getVolume=function(a){return 1};this.getSeeking=function(){return!1};
this.getPaused=function(){return!1};this.getEnded=function(){return!1}};f(qe,w);var $b=function(){$b.__super__.constructor.call(this)};f($b,puremvc.MacroCommand);$b.prototype.initializeMacroCommand=function(){return this.addSubCommand(jc)};$b.prototype.execute=function(a){this.facade.logger.debug("PlayCommand");$b.__super__.execute.call(this,a);this.facade.retrieveProxy(l.NAME).play()};var ha={NORMAL:"normal",FULL_SCREEN:"full-screen"},we={FLASH:"flash",HTML:"html"},za={ACTIVE:"active",INACTIVE:"inactive"},
H={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",SEEKING:"seeking",ERROR:"error"},t=function(){t.__super__.constructor.call(this);this.device=h.getDevice()};f(t,puremvc.Proxy);t.NAME="ApplicationStateProxy";t.prototype.displayState=null;t.prototype.playState=null;t.prototype.renderMode=null;t.prototype.activeState=null;t.prototype.seeking=!1;t.prototype.isUserActive=!1;t.prototype.device=null;t.prototype.getDisplayState=function(){return this.displayState};
t.prototype.setDisplayState=function(a){var b;a!==b&&(b=this.displayState,this.displayState=a,this.sendNotification(d.DISPLAY_STATE_CHANGE,{oldState:b,newState:this.displayState}))};t.prototype.getPlayState=function(){return this.playState};t.prototype.setPlayState=function(a){var b;if(a!==this.playState){if(!0===this.seeking)switch(a){case H.PLAYING:case H.READY:this.seeking=!1;break;default:return}b=this.playState;this.playState=a;this.sendNotification(d.PLAY_STATE_CHANGE,{oldState:b,newState:this.playState})}};
t.prototype.getDevice=function(){return this.device};t.prototype.getSeeking=function(){return this.seeking};t.prototype.setSeeking=function(a){a!==this.seeking&&(this.seeking=a)};t.prototype.getIsUserActive=function(){return this.isUserActive};t.prototype.setIsUserActive=function(a){a!==this.isUserActive&&(this.isUserActive=a)};t.prototype.getRenderMode=function(){return this.renderMode};t.prototype.setRenderMode=function(a){a!==this.renderMode&&(this.renderMode=a)};t.prototype.getMedium=function(){return this.medium};
t.prototype.setMedium=function(a){var b;a!==this.medium&&(b=null!=this.medium?"medium-"+this.medium:this.medium,this.medium=a,this.sendNotification(d.MEDIUM_CHANGE,{oldState:b,newState:"medium-"+this.medium}))};t.prototype.getActiveState=function(){return this.activeState};t.prototype.setActiveState=function(a){var b;a!==this.activeState&&(b=this.activeState,this.activeState=a,this.sendNotification(d.ACTIVE_STATE_CHANGE,{oldState:b,newState:this.activeState}))};var B=function(a){B.__super__.constructor.call(this,
a)};f(B,x);B.NAME=x.NAME;B.prototype.defaults={name:null,autoplay:!1,loop:!1,controls:{},fullscreen:null,target:"_blank",domain:null,endslate:null,version:null};B.prototype.setData=function(a){null!=a.rules&&h.mergeRules(a.rules);return B.__super__.setData.call(this,a)};B.prototype.getAutoplay=function(){return this.data.autoplay};B.prototype.setAutoplay=function(a){return this.data.autoplay=a};B.prototype.getLoop=function(){return this.data.loop};B.prototype.setLoop=function(a){return this.data.loop=
a};B.prototype.getEndSlate=function(){return this.data.endslate};B.prototype.setEndSlate=function(a){return this.data.endslate=a};B.prototype.getDomain=function(){return this.data.domain};B.prototype.setDomain=function(a){return this.data.domain=a};B.prototype.getTarget=function(){return this.data.target};B.prototype.setTarget=function(a){return this.data.target=a};B.prototype.getName=function(){return this.data.name};B.prototype.setName=function(a){return this.data.name=a};B.prototype.getVersion=
function(){return this.data.version};B.prototype.getControls=function(){return this.data.controls};B.prototype.setControls=function(a){return this.data.controls=a};B.prototype.getFullscreen=function(){return this.data.fullscreen};B.prototype.setFullscreen=function(a){return this.data.fullscreen=a};var L=function(a){this.defaultPlaybackCore=a;L.__super__.constructor.call(this);this.playbackCoreMap={}};f(L,Bb);L.NAME="PlayerProxy";L.prototype.contextName="player";L.prototype.playbackCoreMap=null;L.prototype.defaultPlaybackCore=
null;L.prototype.activePlaybackCore=null;L.prototype.getActivePlaybackCore=function(){return this.activePlaybackCore};L.prototype.registerPlaybackCore=function(a){null!=a&&(this.playbackCoreMap[a.getPlaybackCoreName()]=a)};L.prototype.retrievePlaybackCore=function(a){return this.playbackCoreMap[a]};L.prototype.removePlaybackCore=function(a){var b;b=this.playbackCoreMap[a];delete this.playbackCoreMap[a];return b};L.prototype.setPlaybackType=function(a){var b,c,e,d;e=this.defaultPlaybackCore;d=this.playbackCoreMap;
for(c in d)if(b=d[c],""!==b.canPlayType(a)){e=b;break}b=this.facade.retrieveProxy(l.NAME);b!==e&&(this.facade.removeProxy(l.NAME),this.facade.registerProxy(e),e.setData(b.getData()));this.activePlaybackCore=e;return a};L.prototype.canPlayType=function(a){var b,c,e;e=this.playbackCoreMap;for(c in e)if(b=e[c],b=b.canPlayType(a),""!==b)return b;return b=this.defaultPlaybackCore.canPlayType(a)};L.prototype.getContextData=function(){var a,b,c,e;a=this.facade.retrieveProxy(B.NAME);e=this.facade.retrieveProxy(l.NAME);
c=this.facade.retrieveProxy(m.NAME);b=this.facade.getViewComponent();return{width:b.offsetWidth,height:b.offsetHeight,mode:"html5",autoplay:a.getAutoplay(),domain:a.getDomain(),name:a.getName(),currentTime:e.getCurrentTime(),duration:e.getDuration(),version:a.getVersion(),timecode:{duration:h.formatTimecode(c.getDuration()),currentTime:h.formatTimecode(e.getCurrentTime())}}};var m=function(){this.data={metadata:{}};m.__super__.constructor.call(this)};f(m,Bb);m.NAME="MediaProxy";m.prototype.contextName=
"media";m.prototype.data=null;m.prototype.authorized=!0;m.prototype.getContextData=function(){return{width:this.getWidth(),height:this.getHeight(),title:this.getTitle(),description:this.getDescription(),src:this.getSrc(),duration:this.getDuration(),guid:this.getGUID(),isLive:this.getIsLive(),metadata:this.getMetadata(),temporalType:this.getTemporalType(),poster:this.getPoster(),category:this.getCategory()}};m.prototype.setData=function(a){var b;this.data.autoplay=a.autoplay;this.data.type=a.type;
null!=a.source&&this.setSource(a.source);null!=a.src&&this.setSrc(a.src);this.data.title=a.title;null!=a.duration&&this.setDuration(a.duration);this.data.poster=a.poster;this.data.guid=a.guid;this.data.link=a.link;this.data.embed=a.embed;this.data.width=a.width;this.data.height=a.height;this.data.category=a.category;this.data.startTime=a.startTime;this.data.description=a.description;this.data.status=a.status||{};"blocked"===(null!=(b=this.data.status)?b.state:void 0)&&(this.authorized=!1);this.data.category=
a.category;this.data.metadata=a.metadata||{};null!=a.isLive&&this.setIsLive(a.isLive);null!=a.temporalType?this.setTemporalType(a.temporalType):this.setTemporalType("vod");null!=a.medium&&this.setMedium(a.medium);null!=a.pubDate&&this.setPubDate(a.pubDate);return a};m.prototype.updateData=function(a){var b,c;for(b in a)c=a[b],b in this.data&&(this.data[b]=c)};m.prototype.getGUID=function(){return this.data.guid};m.prototype.setGUID=function(a){return this.data.guid=a};m.prototype.getLink=function(){return this.data.link};
m.prototype.setLint=function(a){return this.data.link=a};m.prototype.getStartTime=function(){return this.data.startTime||0};m.prototype.getEmbed=function(){return this.data.embed};m.prototype.setEmbed=function(a){return this.data.embed=a};m.prototype.getAutoplay=function(){return this.data.autoplay};m.prototype.setAutoplay=function(a){return this.data.autoplay=a};m.prototype.getPubDate=function(){return this.data.pubDate};m.prototype.setPubDate=function(a){return this.data.pubDate=a};m.prototype.getCategory=
function(){return this.data.category};m.prototype.setCategory=function(a){return this.data.category=a};m.prototype.getSrc=function(){return this.data.src};m.prototype.setSrc=function(a){this.data.src=a;if(null!=this.data.src&&null==this.data.type)return this.setType(h.getMimeType(this.data.src))};m.prototype.getType=function(){return this.data.type};m.prototype.setType=function(a){this.data.type=a;a=/audio/.test(this.data.type)?"audio":"video";return this.setMedium(a)};m.prototype.getMedium=function(){return this.data.medium};
m.prototype.setMedium=function(a){if(a!==this.data.medium)return this.data.medium=a,this.facade.retrieveProxy(t.NAME).setMedium(a)};m.prototype.getMetadata=function(){return this.data.metadata};m.prototype.setMetadata=function(a){return this.data.metadata=a};m.prototype.getSource=function(){return this.data.source};m.prototype.setSource=function(a){var b;if(!(null==a||1>a.length)){this.data.source=a;b=this.facade.retrieveProxy(L.NAME);a=h.selectSource(a,function(a){return b.canPlayType(a)});if(null!=
(null!=a?a.src:void 0)&&""!==a.src)return this.setSrc(a.src),this.setType(a.type);throw Error("No valid source could be found");}};m.prototype.getTrack=function(){return this.data.track};m.prototype.setTrack=function(a){return this.data.track=a};m.prototype.getTitle=function(){return this.data.title};m.prototype.setTitle=function(a){return this.data.title=a};m.prototype.getWidth=function(){return this.data.width};m.prototype.setWidth=function(a){return this.data.width=a};m.prototype.getHeight=function(){return this.data.height};
m.prototype.setHeight=function(a){return this.data.height=a};m.prototype.getDescription=function(){return this.data.description};m.prototype.setDescription=function(a){return this.data.description=a};m.prototype.getCategory=function(){return this.data.category};m.prototype.setCategory=function(a){return this.data.category=a};m.prototype.getDuration=function(a){return this.data.duration};m.prototype.setDuration=function(a){if(0!==a&&(a!==this.data.duration&&(this.data.duration=a,this.sendNotification(d.DURATION_CHANGE,
a)),Infinity===a))return this.setTemporalType("live")};m.prototype.getPoster=function(a){return this.data.poster};m.prototype.setPoster=function(a){return this.data.poster=a};m.prototype.getIsLive=function(){return this.data.isLive};m.prototype.setIsLive=function(a){if(a!==this.data.isLive)return this.data.isLive=a};m.prototype.getTemporalType=function(){return this.data.temporalType};m.prototype.setTemporalType=function(a){if(a!==this.data.temporalType)return this.data.temporalType=a,this.sendNotification(d.TEMPORAL_TYPE_CHANGE,
a)};var rc=function(){rc.__super__.constructor.call(this)};f(rc,m);rc.NAME="MediaProxy";rc.prototype.setSource=function(a){if(!(null==a||1>a.length))return a=a.filter(function(a){return"external"===a.type}),rc.__super__.setSource.call(this,a)};var Nb=function(a,b,c){Nb.__super__.constructor.call(this,a,b,c)};f(Nb,Y);Nb.prototype.playerType="external";Nb.prototype.createAPI=function(){return new qe(this,this.dispatcher)};Nb.prototype.createModel=function(){var a;this.registerProxy(new W(this.config));
this.registerProxy(new t);a=new $a;this.registerProxy(new L(a));this.registerProxy(new R);this.registerProxy(new B(this.config));this.registerProxy(a);this.registerProxy(new rc);this.registerProxy(new La(this.config.params))};Nb.prototype.createView=function(){var a,b=this;a=this.getViewComponent();this.registerMediator(new oa("external",a));this.registerMediator(new Va);a=new Na;this.registerMediator(a);k.create(a.viewComponent,k.CLICK,function(){return b.sendNotification(d.TOGGLE_ACTIVE)});this.registerMediator(new Ma);
this.registerMediator(new Wa);a=new mb;this.viewComponent.appendChild(a.getViewComponent());this.registerMediator(a)};Nb.prototype.createController=function(){this.registerCommand(d.UPDATE_DATA_BINDINGS,Lc);this.registerCommand(M.TOGGLE_PLAY_PAUSE,$b);this.registerCommand(d.PLAY,$b);this.registerCommand(d.CHANGE_PLAY_STATE,Hc);this.registerCommand(d.SET_MEDIA,Kc);this.registerCommand(d.CHANGE_MEDIA,Ic);this.registerCommand(d.MEDIA_CHANGE,Jc);this.registerCommand(d.ERROR,Mc);this.registerCommand(d.READY,
Nc);this.registerCommand(d.CHANGE_PARAMS,Oc)};var Ob=function(a){null!=a&&this.decode(a)};Ob.decode=function(a){var b;null!=a&&(b={},a=a.replace(/^[^?]*\?/,""),a.replace(/([^?=&]+)(=([^&]*))?/g,function(a,e,d,g){b[decodeURIComponent(e)]=decodeURIComponent(g)}));return b};Ob.encode=function(a){var b,c,e;c=[];for(b in a)e=a[b],null!=e&&c.push(""+encodeURIComponent(b)+"\x3d"+encodeURIComponent(e));return c.join("\x26")};Ob.prototype.decode=function(a){var b,c;if(null!=a)for(b in c=Ob.decode(a),c)a=c[b],
this[b]=a;return c};Ob.prototype.encode=function(){return Ob.encode(this)};var Oa=function(a){var b;null==a&&(a=this);b={};this.addEventListener=function(a,e){e&&(null==b[a]&&(b[a]=[]),b[a].push(e))};this.dispatchEvent=function(c){var e,d,g,f;d=b[c.type];e=a["on"+c.type];c.target=a;null!=e&&e.apply(this,[c]);if(null!=d)for(g=0,f=d.length;g<f;g++)e=d[g],e.apply(a,[c])};this.removeEventListener=function(a,e){var d,g;if(a in b&&(d=b[a],g=d.indexOf(e),-1!==g))return d.splice(g,1)}};Oa.prototype.addEventListener=
function(a,b,c){};Oa.prototype.dispatchEvent=function(a){};Oa.prototype.removeEventListener=function(a,b,c){};var pb=function(){this.item=[];this.metadata={}};pb.prototype.title=null;pb.prototype.link=null;pb.prototype.description=null;pb.prototype.category=null;pb.prototype.pubDate=null;pb.prototype.language=null;pb.prototype.ttl=null;pb.prototype.item=null;pb.prototype.metadata=null;var da=function(){this.metadata={}};da.prototype.src=null;da.prototype.source=null;da.prototype.title=null;da.prototype.description=
null;da.prototype.link=null;da.prototype.guid=null;da.prototype.pubDate=null;da.prototype.poster=null;da.prototype.thumbnail=null;da.prototype.embed=null;da.prototype.category=null;da.prototype.type=null;da.prototype.medium=null;da.prototype.duration=null;da.prototype.track=null;da.prototype.metadata=null;da.prototype.scenes=null;da.prototype.startTime=null;var ac=function(a,b){var c,e,d=this;this.date=a;this.label=null!=b?b:this.label;ac.__super__.constructor.call(this);e=null;this.engage=function(a){null==
a&&(a=Date.now());a=this.date.getTime()-a;if(0>a)throw Error("Alarm date has past.");if(2147483647<a)throw Error("Invalid alarm date.");this.disengage();e=setTimeout(c,a)};this.disengage=function(){clearTimeout(e)};c=function(){d.dispatchEvent({type:"alarm",label:d.label})}};f(ac,Oa);ac.prototype.date=null;ac.prototype.label="alarm";ac.prototype.engage=function(a){};ac.prototype.disengage=function(){};var Pb=function(){};Pb.prototype.getFeed=function(a,b,c){return h.getJson(a,b,c)};Pb.prototype.getMediaNode=
function(a,b,c){var e,d,g,f;null==c&&(c=!0);g="media-"+b;e=a["media-group"]||a;d=e["media-content"];null!=d&&null!=d[g]?f=d[g]:null!=e[g]?f=e[g]:null!=a[g]?f=a[g]:null!=a[b]&&c&&(f=a[b]);return f};Pb.prototype.createEmbed=function(a){var b,c,e,d,g,f;try{b=this.getMediaNode(a,"embed");if(null==b)return c;c={};c.url=b["@attributes"].url;c.width=b["@attributes"].width;c.height=b["@attributes"].height;c.params={};b["media-param"]instanceof Array||(b["media-param"]=[b["media-param"]]);f=b["media-param"];
d=0;for(g=f.length;d<g;d++)e=f[d],c.params[e["@attributes"].name]=e["#text"]}catch(h){G.error("[AMP Feed Parse Error] embed parse error: "+h.message,h)}return c};Pb.prototype.createFeed=function(a){var b,c,e,d,g,f,h,k,l;try{if(b=a.channel,c=new pb,null!=b){c.title=b.title;c.description=b.description;c.language=b.language;c.category=b.category;c.pubDate=new Date(Date.parse(b.pubDate));c.ttl=b.ttl;d=b.item instanceof Array?b.item:[b.item];k=0;for(l=d.length;k<l;k++)e=d[k],f=this.createMedia(e),c.item.push(f);
for(g in b)h=b[g],g in c||(c.metadata[g]=h)}}catch(m){G.error("[AMP Feed Parse Error] feed parse error: "+m.message,m)}return c};Pb.prototype.createMedia=function(a){var b,c,e,d,g,f,h,k,l,m,n,q,r,s,t,u,v,w,x,y;try{h=new da;f=this.getMediaNode(a,"content");if(f instanceof Array)for(h.source=[],q=0,t=f.length;q<t;q++)e=f[q],l={src:e["@attributes"].url,type:e["@attributes"].type},c=e["media-category"],null!=c&&(b=c["@attributes"],"http://mrss.akamai.com/user_agent_hint"===b.schema&&(g=b.label||c["#text"],
null!=g&&""!==g&&(null==l.rules&&(l.rules=[]),l.rules.push(g)))),h.source.push(l),h.medium=e["@attributes"].medium,h.duration=parseFloat(e["@attributes"].duration);else h.type=f["@attributes"].type,h.src=f["@attributes"].url,h.medium=f["@attributes"].medium,h.duration=parseFloat(f["@attributes"].duration);h.guid=a.guid;h.title=this.getMediaNode(a,"title");h.link=a.link;h.description=this.getMediaNode(a,"description");h.pubDate=new Date(Date.parse(a.pubDate));h.thumbnail=h.poster=null!=(w=this.getMediaNode(a,
"thumbnail"))?null!=(x=w["@attributes"])?x.url:void 0:void 0;h.embed=this.createEmbed(a);h.scenes=null!=(y=this.getMediaNode(a,"scenes"))?y["media-scene"]:void 0;k=this.getMediaNode(a,"status",!1);null!=k&&(h.status={state:k["@attributes"].state,reason:k["@attributes"].reason});h.category=a.category;h.category instanceof Array||(h.category=[h.category]);k=this.getMediaNode(a,"category",!1);if(null!=k)for(r=0,u=k.length;r<u;r++)c=k[r],null!=c["#text"]&&""!==c["#text"]&&h.category.push(c["#text"]);
null!=h.category&&h.category.sort(function(a,b){a=a.toLowerCase();b=b.toLowerCase();return a>b?1:a<b?-1:0});k=this.getMediaNode(a,"subTitle");if(null!=k)for(null==h.track&&(h.track=[]),k instanceof Array||(k=[k]),s=0,v=k.length;s<v;s++)m=k[s],null!=m["@attributes"]&&h.track.push({src:m["@attributes"].href,type:m["@attributes"].type,kind:"captioning",srclang:m["@attributes"].lang||"en"});c=a.category;c instanceof Array||(c=[c]);h.isLive="live"===a.temporalType||null!=c&&-1!==c.join(",").indexOf("live_stream");
h.temporalType=h.isLive?"live":"ondemand";for(d in a)n=a[d],d in h||(h.metadata[d]=n)}catch(z){G.error("[AMP Feed Parse Error] media parse error: "+z.message,z)}return h};var ab=function(a,b,c){var e,d,g,f,k,l=this;this.url=a;null==b&&(b=!0);this.interval=null!=c?c:1E3;ab.__super__.constructor.call(this);g=e=0;k=d=null;this.sync=function(){var a,b=this;a=h.getXHR();a.onreadystatechange=function(c){try{switch(a.readyState){case 1:e=Date.now();break;case 2:if(400<=a.status)throw Error("Sync error ("+
a.status+"): "+b.url);Date.now();d=a.getResponseHeader("Date");null!=d?(g=Date.parse(d),b.offset=e-g):b.offset=0;b.dispatchEvent({type:"sync",time:b.now()})}}catch(f){b.offset=0,b.dispatchEvent({type:"error",error:f,xhr:a})}};a.onerror=function(c){b.offset=0;b.dispatchEvent({type:"error",error:c,xhr:a})};Date.now();a.open("HEAD",this.url,!0);a.send()};this.start=function(){this.stop();this.running=!0;f();k=setInterval(f,this.interval)};this.stop=function(){this.running=!1;clearInterval(k);k=null};
f=function(){l.dispatchEvent({type:"tick",time:l.now()})};!0===b&&null!=this.url&&this.sync()};f(ab,Oa);ab.prototype.url=null;ab.prototype.interval=1E3;ab.prototype.running=!1;ab.prototype.offset=0;ab.prototype.now=function(){return Date.now()-this.offset};ab.prototype.sync=function(){};ab.prototype.start=function(){};ab.prototype.stop=function(){};var G=function(){};G.enabled=!1;G.enable=function(a){null==a&&(a=/debug\=true/.test(location.search.toLowerCase()));this.enabled=a;this.enabled||(this.log=
this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){});return a};G.log=function(){try{console.log.apply(console,arguments)}catch(a){}};G.trace=function(){try{console.trace.apply(console,arguments)}catch(a){}};G.debug=function(){try{console.log.apply(console,arguments)}catch(a){this.log.apply(this,arguments)}};G.info=function(){try{console.info.apply(console,arguments)}catch(a){}};G.warn=function(){try{console.warn.apply(console,arguments)}catch(a){}};G.error=function(){try{console.error.apply(console,
arguments)}catch(a){this.log.apply(this,arguments)}};G.fatal=function(){try{console.fatal.apply(console,arguments)}catch(a){}};var U=function(a,b){this.type=a;null!=b&&(this.data=this.details=b)};U.prototype.type=null;U.prototype.target=null;U.prototype.data=null;U.prototype.details=null;var $=function(){$.__super__.constructor.call(this,this)};f($,Oa);$.prototype.xhr=null;$.prototype.headers=null;$.prototype.response=null;$.prototype.responseXML=null;$.prototype.responseText=null;$.prototype.responseType=
null;$.prototype.withCredentials=!1;$.prototype.readyState=0;$.prototype.status=null;$.prototype.open=function(a,b){var c,e,d=this;try{e=new XMLHttpRequest}catch(g){e=new window.ActiveXObject("Microsoft.XMLHTTP")}if($.isCORS(b))if(Object.prototype.hasOwnProperty.call(e,"withCredentials"))try{e.withCredentials=this.withCredentials}catch(f){G.warn("[AMP XHR WARNING]","withCredentials not properly supported in this browser.",f)}else"undefined"!==typeof XDomainRequest&&(c=!0,e=new XDomainRequest);if(null!=
e){c&&(e.onload=function(a){"function"===typeof e.onreadystatechange&&(e.readyState=4,e.status=200,e.contentType.match(/\/xml/)&&(e.responseXML=new ActiveXObject("Microsoft.XMLDOM"),e.responseXML.async=!1,e.responseXML.loadXML(e.responseText)),e.onreadystatechange.call(e,a,!1))});e.onreadystatechange=function(a){var b,c;d.readyState=e.readyState;d.dispatchEvent(new U("readystatechange",e));if(4===e.readyState)if(d.status=e.status,199<(b=d.status)&&400>b||0===d.status){null==e.responseText&&(e.responseText=
e.text);d.responseText=e.responseText;if(null!=e.responseXML&&0<(null!=(c=e.responseXML.childNodes)?c.length:void 0))d.response=d.responseXML=e.responseXML,d.responseType="document";else try{d.response=JSON.parse(e.responseText),d.responseType="json"}catch(g){d.response=e.responseText,d.responseType="text"}d.dispatchEvent(new U("load",d))}else 0!==d.status&&d.dispatchEvent(new U("error",d))};try{"undefined"!==typeof e.onerror&&(e.onerror=function(a){d.dispatchEvent(new U("error",d))})}catch(h){}e.open(a,
b)}this.xhr=e};$.prototype.send=function(a){var b,c,e;if(null!=this.headers)for(b in e=this.headers,e)c=e[b],null!=b&&null!=c&&this.xhr.setRequestHeader(b,c);this.xhr.send(a)};$.prototype.setRequestHeader=function(a,b){null!=a&&null!=b&&(null==this.headers&&(this.headers={}),this.headers[a]=b)};$.prototype.setRequestHeaders=function(a){return this.headers=a};$.prototype.getResponseHeader=function(a){var b;return null!=(b=this.xhr)?"function"===typeof b.getResponseHeader?b.getResponseHeader(a):void 0:
void 0};$.prototype.getAllResponseHeaders=function(){var a;return null!=(a=this.xhr)?"function"===typeof a.getAllResponseHeaders?a.getAllResponseHeaders():void 0:void 0};$.isCORS=function(a){var b,c;b=document.createElement("a");b.href=a;a=""!==b.hostname?b.hostname:location.hostname;c="0"!==b.port?b.port:location.port;return location.protocol!==(":"!==b.protocol?b.protocol:location.protocol)||location.hostname!==a||location.port!==c&&!(""===location.port&&"80"===c)};var bc=function(){};bc.construct=
function(){var a,b,c;c=Ob.decode(window.location.search);for(a in c)b=c[a],bc[a]=b;return!0};bc.constructed=bc.construct();bc.serialize=function(a,b){var c,e,d,g;d=[];for(e in a)g=a[e],null!=g&&(c=b?b+"["+e+"]":e,d.push("object"===typeof g?this.serialize(g,c):encodeURIComponent(c)+"\x3d"+encodeURIComponent(g)));return d.join("\x26")};var ta=function(a,b){this.element=a;this.timeout=b;ta.__super__.constructor.call(this);this.resetHandler=this.reset.bind(this)};f(ta,Oa);ta.prototype.events="mousemove mousedown keypress DOMMouseScroll mousewheel touchmove MSPointerMove".split(" ");
ta.prototype.resetHandler=null;ta.prototype.element=null;ta.prototype.timeout=null;ta.prototype.active=!0;ta.prototype.timeoutId=null;ta.prototype.applyListeners=function(a){var b,c,e,d;null==a&&(a="add");d=this.events;c=0;for(e=d.length;c<e;c++)b=d[c],this.element[""+a+"EventListener"](b,this.resetHandler)};ta.prototype.start=function(a){null!=a&&(this.timeout=a);this.stop();this.applyListeners("add");this.timeoutId=setTimeout(this.setActive.bind(this,!1),this.timeout)};ta.prototype.stop=function(){this.applyListeners("remove");
clearTimeout(this.timeoutId)};ta.prototype.reset=function(){this.setActive(!0);this.start()};ta.prototype.setActive=function(a){if(a!==this.active)return this.active=a,this.dispatchEvent(new U("activechange",{active:this.active})),a};ta.prototype.getActive=function(){return this.active};var h=function(){};h.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI2QkJDQTBCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI2QkJDQTFCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODg4NjdFQkIzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowODg4NjdFQ0IzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu0++ecAAAAGUExURf///wAAAFXC034AAAABdFJOUwBA5thmAAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC";
h.flashTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"];h.mimeTypes={mp4:"video/mp4",flv:"video/x-flv",f4m:"video/f4m",smil:"application/smil",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml"};h.rules={flashTablets:{label:"Android 2 \x26 3 or Kindle Fire 1",regexp:"Android [23]|Silk/1"},html5Phones:{label:"iPhone",
regexp:"iPhone"},html5Tablets:{label:"HTML5 Tablets",regexp:"iPad|Android 4|Silk/2"},desktop:{label:"Desktop",regexp:"^((?!iPad|iPhone|Android|BlackBerry|PlayBook|Silk).)*$"}};h.playbackModes={HTML:"html",AUTO:"auto",FLASH:"flash",NONE:"none",EXTERNAL:"external"};h.getPlaybackMode=function(a){var b,c,e,d;null==a&&(a=(null!=(c=bc.mode)?c.toLowerCase():void 0)||this.playbackModes.AUTO);c=!1;d=this.playbackModes;for(b in d)if(e=d[b],e===a){c=!0;break}c||(a=this.playbackModes.AUTO);if(a!==this.playbackModes.AUTO)return a!==
this.playbackModes.FLASH||this.hasFlash()||(a=this.playbackModes.NONE),a;this.hasFlash()||(a=this.supportsHTML5Video()?this.playbackModes.HTML:this.playbackModes.NONE);a===this.playbackModes.AUTO&&(a=this.isHTML5()?this.playbackModes.HTML:this.playbackModes.FLASH);return a};h.mergeRules=function(a){var b,c,e;e=[];for(b in a)c=a[b],e.push(h.rules[b]=c);return e};h.checkRules=function(a){var b,c,e;if(null!=a&&0<a.length)for(c=0,e=a.length;c<e;c++)if(b=a[c],b=h.rules[b])if(b=RegExp(b.regexp),b.test(navigator.userAgent))return!0;
return!1};h.selectSource=function(a,b){var c,e,d;e=0;for(d=a.length;e<d;e++)if(c=a[e],h.checkRules(c.rules))return c;e=0;for(d=a.length;e<d;e++)if(c=a[e],""!==b(c.type||h.getMimeType(c.src)))return c;return null};h.getMimeType=function(a){return this.mimeTypes[h.getFileExtension(a)]};h.selectTrack=function(a,b){var c,e,d,g;d=0;for(g=a.length;d<g;d++)if(c=a[d],c.kind===b){e=c;break}return e};h.isIPhone=function(){return/iPhone/.test(navigator.platform)||/iPhone/.test(navigator.userAgent)};h.isIPad=
function(){return/iPad/.test(navigator.platform)||/iPad/.test(navigator.userAgent)};h.isAndroid4=function(){return/Android 4/.test(navigator.userAgent)};h.isKindleFireHD=function(){return/Silk\/2/.test(navigator.userAgent)};h.isKindleFire=function(){return/Silk\/1/.test(navigator.userAgent)};h.isBlackBerry=function(){return/BlackBerry;|PlayBook|BB10/.test(navigator.userAgent)};h.isFirefoxOS=function(){return/\(Mobile;.*Firefox\//.test(navigator.userAgent)};h.supportsHTML5Video=function(){return null!=
document.createElement("video").canPlayType};h.isHTML5=function(){return this.isIOS()||this.isAndroid4()||this.isKindleFireHD()||this.isBlackBerry()||this.isFirefoxOS()};h.isIOS=function(){var a;a=/iPad|iPhone|iPod/i;return a.test(navigator.platform)||a.test(navigator.userAgent)};h.hasFlash=function(){return swfobject.hasFlashPlayerVersion("1")};h.isFullscreenDevice=function(){return this.isKindleFireHD()||this.isIPhone()};h.getDevice=function(){var a;a=null;this.isIPhone()?a="iphone":this.isIPad()?
a="ipad":/Android/.test(navigator.userAgent)?a="android":this.isKindleFireHD()?a="kindlefirehd":this.isKindleFire()?a="kindlefire":/Mac|Win32/.test(navigator.platform)&&(a="desktop");return a};h.xmlToJson=function(a){var b,c,e,d,g;e={};9===a.nodeType&&(a=a.firstChild);if(1===a.nodeType){if(0<a.attributes.length)for(e["@attributes"]={},c=a.attributes,b=d=0,g=c.length;d<g;b=++d)b=c[b],e["@attributes"][b.nodeName]=b.nodeValue}else if(3===a.nodeType||4===a.nodeType)e=a.nodeValue;if(a.hasChildNodes())for(g=
a.childNodes,b=a=0,d=g.length;a<d;b=++a)if(c=g[b],3!==c.nodeType||/\S/.test(c.nodeValue))b=c.nodeName.replace(/:/,"-"),c=this.xmlToJson(c),null==c["@attributes"]&&null!=c["#text"]&&(c=c["#text"]),null==e[b]?e[b]=c:(e[b]instanceof Array||(e[b]=[e[b]]),e[b].push(c));return e};h.getXHR=function(){return new $};h.get=function(a,b,c){var e;null==b&&(b={});null==c&&(c=null);e=h.getXHR();null!=b&&(null!=b.withCredentials&&(e.withCredentials=b.withCredentials),null!=b.onload&&(e.onload=b.onload),null!=b.onerror&&
(e.onerror=b.onerror));e.open("GET",a);null!=c&&e.setRequestHeaders(c);e.send();return e};h.send=function(a,b,c,e){var d;null==c&&(c={});null==e&&(e={"Content-Type":"String"});d=h.getXHR();null!=c.onload&&(d.onload=c.onload);null!=c.onerror&&(d.onerror=c.onerror);d.open("POST",a);null!=e&&d.setRequestHeaders(e);d.send(b);return d};h.loadAMPScript=function(a,b){return this.loadScript(a,b,this.getAMPParent())};h.getAMPParent=function(a,b){var c;c=this.getAMPScriptTag();if(null!=c)return c.parentNode;
c=document.getElementsByTagName("head");if(null!=(null!=c?c[0]:void 0))return c[0]};h.getAMPScriptTag=function(){var a,b,c,e;b=document.getElementsByTagName("script");c=0;for(e=b.length;c<e;c++)if(a=b[c],/amp(\..*)?\.js/.test(a.src))return a;return null};h.loadScript=function(a,b,c){var e;c=c||document.getElementsByTagName("head")[0];e=document.createElement("script");e.type="text/javascript";null!=b&&(e.addEventListener?e.onload=function(a){this.onload=null;b()}:e.readyState&&(e.onreadystatechange=
function(a){if("loaded"===this.readyState||"complete"===this.readyState)this.onreadystatechange=null,b()}));e.src=a;c.appendChild(e);return e};h.loadStyleSheet=function(a){var b,c;b=document.getElementsByTagName("head")[0];c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=a;return b.appendChild(c)};h.read=function(a,b,c,e){var d,g;null==b&&(b={});null==c&&(c="");null==e&&(e=[]);try{return g=this.get(a,b,e),d=g.responseText||g.text,c===h.mimeTypes.json?JSON.parse(d):c===
h.mimeTypes.xml&&null!=g.responseXML?g.responseXML:d}catch(f){return"undefined"!==typeof console&&null!==console&&"function"===typeof console.error&&console.error("Read Error: ",f),null}};h.getFileExtension=function(a){return a.split(".").pop().replace(/\?.*/,"")};h.getResponseHeader=function(a,b,c){var e;null==c&&(c={});e=h.getXHR();null!=c.onerror&&(e.onerror=c.onerror);e.open("HEAD",a,!1);e.send();return e.getResponseHeader(b)};h.getResponseHeaders=function(a,b,c){var e,d,g;null==c&&(c={});e=h.getXHR();
null!=c.onerror&&(e.onerror=c.onerror);e.open("HEAD",a,!1);e.send();c={};if(null==b)return e.getAllResponseHeaders();d=0;for(g=b.length;d<g;d++)a=b[d],c[a]=e.getResponseHeader(a);return c};h.isTouch=null;h.isTouchDevice=function(){if(null==this.isTouch)try{document.createEvent("TouchEvent"),this.isTouch=!0}catch(a){this.isTouch=!1}return this.isTouch};h.clamp=function(a,b,c){a<b&&(a=b);a>c&&(a=c);return a};h.beacon=function(a){var b;b=document.getElementById("beaconId");null==b&&(b=document.createElement("img"),
b.setAttribute("id","beaconId"),b.setAttribute("height",0),b.setAttribute("width",0),document.body.appendChild(b),b.style.display="none");b.setAttribute("src",a);return b};h.getElementOffset=function(a){var b;b={left:0,top:0};if(a.offsetParent)for(b.left=a.offsetLeft,b.top=a.offsetTop;a=a.offsetParent;)b.left+=a.offsetLeft,b.top+=a.offsetTop;return b};h.override=function(a,b,c){var e;null==c&&(c=!0);if(null==a)return b;if(null==b)return a;!0===c&&(a=h.clone(a),b=h.clone(b));for(e in b)c=b[e],"object"===
typeof c?(null==a[e]&&(a[e]=c instanceof Array?[]:{}),a[e]=h.override(a[e],c,!1)):a[e]=c;return a};h.clone=function(a,b){var c,e,d,g,f,h,k;null==b&&(b=!0);if("object"!==typeof a)c=a;else for(g in c=a instanceof Array?[]:{},a)if(f=a[g],"object"===typeof f&&!0===b)if(f instanceof Array)for(c[g]=[],h=0,k=f.length;h<k;h++)e=f[h],c[g].push(this.clone(e));else for(d in c[g]={},f)e=f[d],c[g][d]=this.clone(e);else c[g]=f;return c};h.formatTimecode=function(a,b){var c;a=parseInt(a);if(isNaN(a))return"00:00";
c=h.formatZeroFill(a%60);a=parseInt(a/60);c=h.formatZeroFill(a%60)+":"+c;a=parseInt(a/60);0<a&&(c=h.formatZeroFill(a)+":"+c);3600<=b&&5===c.length&&(c="00:"+c);return c};h.formatZeroFill=function(a){var b;b=a.toString();10>a&&(b="0"+b);return b};h.flattenTimecode=function(a,b){var c,e,d;null==b&&(b=30);if(null==a||""===a)return NaN;d=a.split(":");c=0;4===d.length?c=parseInt(d.pop())/b:3===d.length&&(d[2]=d[2].replace(",","."),-1!==d[2].indexOf(".")&&(e=d[2].split(".")),1<(null!=e?e.length:void 0)&&
(d[2]=e[0],c=parseInt(e[1])/1E3));for(e=parseInt(d.pop());0<d.length;)e+=Math.pow(60,d.length)*parseInt(d.shift());return e+c};h.cacheBust=function(a,b,c){var e;null==b&&(b="cacheBust");null==c&&(c=Date.now());e=-1===a.indexOf("?")?"?":"\x26";return a+e+b+"\x3d"+c};h.formatStyleName=function(a){return a.replace(/([A-Z])/,"-$1").toLowerCase()};h.trim=function(a){return a.replace(/^\s*(.*)/,"$1").replace(/(.*)\s*$/,"$1")};h.getJson=function(a,b,c){var e;e=h.getXHR();e.open("GET",a);e.onload=function(a){a=
"document"===e.responseType?h.xmlToJson(e.responseXML):e.response;"function"===typeof b&&b(a)};e.onerror=function(a){"function"===typeof c&&c(a)};e.send();return e};h.getSource=function(a,b,c){var e;e=h.getPlaybackMode();h.getJson(a,function(a){var c,d;a=(new Pb).createFeed(a);0<(null!=a?null!=(d=a.item)?d.length:void 0:void 0)&&(c=function(a){return"flash"===e&&-1!==h.flashTypes.indexOf(a)||"html"===e&&-1===h.flashTypes.indexOf(a)?"maybe":""},c=h.selectSource(a.item[0].source,c));"function"===typeof b&&
b(c)},c)};h.trackMouse=function(){try{document.addEventListener("mousemove",this.mouseTracker)}catch(a){document.attachEvent("mousemove",this.mouseTracker)}};h.mouseTracker=function(a){h.clientX=a.clientX;h.clientY=a.clientY;h.pageX=a.pageX;h.pageY=a.pageY};h.isMouseOverElement=function(a){return null==a?!1:a.contains(document.elementFromPoint(h.clientX,h.clientY))};var Fa=function(a,b,c,e,d){this.onclick=null!=d?d:this.onclick;Fa.__super__.constructor.call(this,e,null,b,c);this.icon=this.create("icon");
null!=a&&(this.label=this.createText("label",a))};f(Fa,I);Fa.prototype.componentType="button";Fa.prototype.icon=null;Fa.prototype.label=null;Fa.prototype.onclick=null;var qb=function(a){qb.__super__.constructor.call(this,null,a)};f(qb,Fa);qb.prototype.componentName="full-screen";qb.prototype.onRegister=function(){qb.__super__.onRegister.call(this);this.sendNotification(d.ADD_CONTROL_STATE,this.componentName+"-enabled")};qb.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification(d.TOGGLE_FULL_SCREEN);
return!1};qb.prototype.listNotificationInterests=function(){return[d.DISABLE_FULL_SCREEN,d.ENABLE_FULL_SCREEN]};qb.prototype.handleNotification=function(a){var b;b=a.getName();a.getBody();switch(b){case d.DISABLE_FULL_SCREEN:this.setDisabled(!0);break;case d.ENABLE_FULL_SCREEN:this.setDisabled(!1)}};var J=function(a,b){this.player=a;this.config=b;J.__super__.constructor.call(this);this.dispatcher=new Oa(this)};f(J,puremvc.Mediator);J.NAME="PluginWrapper";J.prototype.player=null;J.prototype.config=
null;J.prototype.dispatcher=null;J.prototype.createFlashVars=null;J.prototype.createXML=null;J.prototype.getAPI=function(){return this};J.prototype.addEventListener=function(a,b){this.dispatcher.addEventListener(a,b)};J.prototype.dispatchEvent=function(a){"timeupdate"!==a.type&&"timeremaining"!==a.type&&this.player.logger.log("[AMP "+this.constructor.NAME.replace("Wrapper","").toUpperCase()+" EVENT]",a.type,a.data,a);a.player=this.player.parent;this.dispatcher.dispatchEvent(a)};J.prototype.removeEventListener=
function(a,b){this.dispatcher.removeEventListener(a,b)};J.prototype.createElement=function(a,b,c){var e;e=a.createElement("element");e.setAttribute("id",b);null==c&&(c=this.getControls(a).controls);null!=c&&c.appendChild(e);return e};J.prototype.createProperty=function(a,b,c,e){var d;d=a.createElement("property");d.setAttribute("key",b);null!=e&&e.appendChild(d);if(null!=c)if("object"!==typeof c||c instanceof Array)a=X.createTextContent(a,c.toString()),d.appendChild(a);else for(b in c)e=c[b],this.createProperty(a,
b,e,d);return d};J.prototype.getControls=function(a){var b,c,e,d,g;c=a.getElementsByTagName("element");if(1>(null!=c?c.length:void 0))return null;a={};d=0;for(g=c.length;d<g;d++)b=c[d],e=b.getAttribute("id"),a[e]=b;return a};J.prototype.hasControls=function(a){var b;return null!=(null!=(b=this.getControls(a))?b.controls:void 0)};J.prototype.listNotificationInterests=function(){return[q.CREATE_FLASH_VARS,q.CREATE_XML]};J.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case q.CREATE_FLASH_VARS:"function"===
typeof this.createFlashVars&&this.createFlashVars(a.flashvars);break;case q.CREATE_XML:"function"===typeof this.createXML&&this.createXML(a.xml)}};var Gd=function(){Gd.__super__.constructor.call(this)};f(Gd,puremvc.SimpleCommand);Gd.prototype.execute=function(a){this.facade.logger.debug("ControlsPlayCommand");this.facade.retrieveProxy(O.NAME).start()};var Hd=function(){Hd.__super__.constructor.call(this)};f(Hd,puremvc.SimpleCommand);Hd.prototype.execute=function(a){this.facade.logger.debug("ControlsPauseCommand");
this.facade.retrieveProxy(O.NAME).stop()};var Id=function(){Id.__super__.constructor.call(this)};f(Id,puremvc.SimpleCommand);Id.prototype.execute=function(a){var b,c;this.facade.logger.debug("ControlsActiveStateChangeCommand");c=this.facade.retrieveProxy(O.NAME);b=this.facade.app.retrieveProxy(t.NAME);a.getBody().newState===za.ACTIVE&&b.getPlayState()!==H.READY&&"desktop"!==h.getDevice()&&c.start()};var Jd=function(){Jd.__super__.constructor.call(this)};f(Jd,puremvc.SimpleCommand);Jd.prototype.execute=
function(a){this.facade.logger.debug("ControlsAdBreakStartCommand");this.facade.app.getVideo().controls=!1};var Kd=function(){Kd.__super__.constructor.call(this)};f(Kd,puremvc.SimpleCommand);Kd.prototype.execute=function(a){this.facade.logger.debug("ControlsAdBreakEndCommand");this.facade.app.getVideo().controls=!0};var Ld=function(){Ld.__super__.constructor.call(this)};f(Ld,puremvc.SimpleCommand);Ld.prototype.execute=function(a){this.facade.logger.debug("ControlsChangeMediaCommand");a=a.getBody().poster;
null!=a&&""!==a&&(this.facade.app.getVideo().poster=a)};var ua=function(a,b){ua.__super__.constructor.call(this,a,b)};f(ua,J);ua.NAME="ControlsWrapper";ua.prototype.mode="auto";ua.prototype.autoHide=5;ua.prototype.listNotificationInterests=function(){return ua.__super__.listNotificationInterests.apply(this,arguments).concat([d.MEDIUM_CHANGE])};ua.prototype.handleNotification=function(a){var b;ua.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case d.MEDIUM_CHANGE:b=
/audio/.test(a)?"persistent":this.mode,this.setMode(b)}};ua.prototype.createFlashVars=function(a){null!=this.config.mode&&(this.mode=a.controls_mode=this.config.mode);return a};ua.prototype.createXML=function(a){var b,c,e,d,g,f;d=a.getElementsByTagName("view")[0];e=a.getElementsByTagName("element");b=null;g=0;for(f=e.length;g<f;g++)if(c=e[g],"controls"===c.getAttribute("id")){b=c;break}null==b&&(b=a.createElement("element"),b.setAttribute("id","controls"),d.appendChild(b));null!=b.attributes.autoHideDelay?
this.autoHide=b.getAttribute("autoHideDelay"):null!=this.config.autoHide&&(this.autoHide=this.config.autoHide,b.setAttribute("autoHideDelay",this.config.autoHide));return a};ua.prototype.getMode=function(){return this.mode};ua.prototype.setMode=function(a){if(a!==this.mode){try{this.mode=a,this.player.video.setPlayerProperty("controlsMode",a)}catch(b){this.facade.logger.error("Controls Error:",b)}return a}};ua.prototype.getAutoHide=function(){return this.autoHide};var C=function(a,b){this.direction=
null!=b?b:this.direction;C.__super__.constructor.call(this,null,null,a)};f(C,I);C.prototype.componentType="slider";C.prototype.trackView=null;C.prototype.handleView=null;C.prototype.valueView=null;C.prototype.startCapView=null;C.prototype.endCapView=null;C.prototype.min=0;C.prototype.max=1;C.prototype.value=0;C.prototype.dragging=!1;C.prototype.direction="vertical";C.prototype.pressHandler=null;C.prototype.releaseHandler=null;C.prototype.moveHandler=null;C.prototype.clickHandler=null;C.prototype.onRegister=
function(){C.__super__.onRegister.call(this);this.startCapView=this.create("start-cap");this.endCapView=this.create("end-cap");this.trackView=this.create("track");this.valueView=this.create("value",this.trackView);this.handleView=this.create("handle",this.trackView);this.pressHandler=k.create(this.handleView,k.PRESS,this.handlePressHandler.bind(this));this.releaseHandler=k.create(window,k.RELEASE,this.handleReleaseHandler.bind(this));this.releaseHandler.unbind();this.moveHandler=k.create(window,k.MOVE,
this.updateHandler.bind(this));this.moveHandler.unbind();this.clickHandler=k.create(this.trackView,k.CLICK,this.updateHandler.bind(this))};C.prototype.setDirection=function(a){return this.direction=a};C.prototype.getDirection=function(){return this.direction};C.prototype.setValue=function(a){this.updateValue(a);return a};C.prototype.getValue=function(){return this.value};C.prototype.setDragging=function(a){if(a!==this.dragging)return this.dragging=a,this.sendNotification(d.IS_USER_ACTIVE,this.dragging),
this.dragging};C.prototype.getDragging=function(){return this.dragging};C.prototype.updateValue=function(a){var b;this.value=h.clamp(a,this.min,this.max);"vertical"===this.direction?(a="height",b="bottom"):(a="width",b="left");this.valueView.style[a]=this.handleView.style[b]=""+100*this.value+"%"};C.prototype.calculateValue=function(a){var b,c;"vertical"===this.getDirection()?(c=this.viewComponent.offsetHeight,b=h.getElementOffset(this.viewComponent).top+c,a=-(a.y-b)):(c=this.viewComponent.offsetWidth,
b=h.getElementOffset(this.viewComponent).left,a=a.x-b);return h.clamp(a/c,0,1)};C.prototype.handlePressHandler=function(a){this.moveHandler.bind();this.releaseHandler.bind();this.setDragging(!0);a.stopImmediatePropagation();return!1};C.prototype.handleReleaseHandler=function(a){this.moveHandler.unbind();this.releaseHandler.unbind();this.setDragging(!1);a.stopImmediatePropagation();return!1};C.prototype.updateHandler=function(a){a.stopImmediatePropagation();this.setValue(this.calculateValue({x:a.clientX||
a.targetTouches[0].screenX,y:a.clientY||a.targetTouches[0].screenY}));return!1};var ia={ADD_PANEL:"addPanel",REMOVE_PANEL:"removePanel",OPEN_PANEL:"openPanel",CLOSE_PANEL:"closePanel",TOGGLE_PANEL:"togglePanel",CLOSE_ALL_PANELS:"closeAllPanels"},va=function(a){va.__super__.constructor.call(this,null,null,a)};f(va,I);va.prototype.componentName="time-display";va.prototype.duration=null;va.prototype.currentTimeDisplay=null;va.prototype.separatorDisplay=null;va.prototype.durationDisplay=null;va.prototype.liveDisplay=
null;va.prototype.onRegister=function(){va.__super__.onRegister.call(this);this.liveDisplay=this.createText("live-display",this.localizationManager.getString(r.MSG_LIVE));this.currentTimeDisplay=this.createText("current-time-display","00:00",this,"span");this.separatorDisplay=this.createText("separator-display"," / ",this,"span");this.durationDisplay=this.createText("duration-display","00:00",this,"span")};va.prototype.listNotificationInterests=function(){return[d.PLAY,d.DURATION_CHANGE,d.ENDED,d.DISPLAY_TIME]};
va.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.PLAY:this.updateDuration();break;case d.DURATION_CHANGE:this.duration=a;this.updateCurrentTime();this.updateDuration();break;case d.ENDED:this.updateCurrentTime(this.duration);this.updateDuration();break;case d.DISPLAY_TIME:this.updateCurrentTime(a.currentTime,a.duration),this.updateDuration(a.duration)}};va.prototype.updateCurrentTime=function(a,b){null==a&&(a=this.currentTime);null==b&&(b=this.duration);
this.currentTimeDisplay.textContent=h.formatTimecode(a,b)};va.prototype.updateDuration=function(a){null==a&&(a=this.duration);this.durationDisplay.textContent=h.formatTimecode(a)};var pa=function(a){this.panels=[];this.closeHandler=this.mouseupHandler.bind(this);pa.__super__.constructor.call(this,null,null,a)};f(pa,I);pa.prototype.componentName="panels";pa.prototype.activePanel=null;pa.prototype.panels=null;pa.prototype.closeHandler=null;pa.prototype.listNotificationInterests=function(){var a,b,c;
c=[];for(a in ia)b=ia[a],c.push(b);return c.concat([])};pa.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case ia.ADD_PANEL:this.addPanel(a);break;case ia.REMOVE_PANEL:this.removePanel(a);break;case ia.OPEN_PANEL:this.openPanel(a);break;case ia.CLOSE_PANEL:this.closePanel(a);break;case ia.CLOSE_ALL_PANELS:this.closeAllPanels(a);break;case ia.TOGGLE_PANEL:this.togglePanel(a)}};pa.prototype.addPanel=function(a){this.panels.push(a);this.viewComponent.appendChild(a.getViewComponent())};
pa.prototype.removePanel=function(a){this.panels.splice(this.panels.indexOf(a),1);this.viewComponent.removeChild(a.getViewComponent())};pa.prototype.openPanel=function(a){a!==this.activePanel&&null!=a&&(this.closeAllPanels(),this.activePanel=a,this.activePanel.classList.add("active"),"desktop"!==h.getDevice()&&this.sendNotification(d.IS_USER_ACTIVE,!0),document.addEventListener("mouseup",this.closeHandler))};pa.prototype.closePanel=function(a){a.classList.remove("active");null!=this.activePanel&&
(this.activePanel=null,"desktop"!==h.getDevice()&&this.sendNotification(d.IS_USER_ACTIVE,!1),document.removeEventListener("mouseup",this.closeHandler))};pa.prototype.togglePanel=function(a){a===this.activePanel?this.closePanel(a):this.openPanel(a)};pa.prototype.closeAllPanels=function(){var a,b,c,e;e=this.panels;b=0;for(c=e.length;b<c;b++)a=e[b],this.closePanel(a)};pa.prototype.mouseupHandler=function(a){var b,c;b=document.elementFromPoint(a.clientX,a.clientY);c=this.activePanel.getViewComponent();
a=this.activePanel.control.getViewComponent();b!==c&&!1===c.contains(b)&&b!==a&&!1===a.contains(b)&&this.closeAllPanels()};var P=function(a){P.__super__.constructor.call(this,a,"horizontal")};f(P,C);P.prototype.componentName="progress";P.prototype.bufferValue=null;P.prototype.scrubTime=null;P.prototype.scrubTimeSeparator=null;P.prototype.cuePoints=null;P.prototype.duration=0;P.prototype.isLive=!1;P.prototype.previewData={src:null,previewWidth:null,previewHeight:null,imgWidth:null,imgHeight:null,count:null};
P.prototype.onRegister=function(){P.__super__.onRegister.call(this);this.bufferValue=this.create("buffer-value",!1);this.trackView.insertBefore(this.bufferValue,this.trackView.lastChild);this.cuePoints=this.create("cue-points",this.trackView);this.scrubTimeSeparator=this.create("scrub-time-separator",this.trackView);this.scrubTime=this.create("scrub-time",this.trackView);this.thumbPreview=this.create("thumb-preview")};P.prototype.listNotificationInterests=function(){return[d.ENDED,d.MEDIA_CHANGE,
d.DURATION_CHANGE,d.PROGRESS,d.ADD_CUE_POINTS,d.REMOVE_CUE_POINTS,d.DISPLAY_TIME]};P.prototype.handleNotification=function(a){var b,c,e,f;b=a.getName();a=a.getBody();switch(b){case d.MEDIA_CHANGE:this.isLive="live"===a.temporalType;this.updateValue(0);this.bufferValue.style.width="0%";this.updatePreview(a.metadata);break;case d.PROGRESS:a=h.clamp(100*(a/this.duration),0,100);this.bufferValue.style.width=a+"%";break;case d.DURATION_CHANGE:this.duration=a;break;case d.ENDED:this.updateValue(1);break;
case d.ADD_CUE_POINTS:if(null!=(null!=(c=this.facade.app.config)?null!=(e=c.controls)?e.displaySceneMarkers:void 0:void 0)&&!1===this.facade.app.config.controls.displaySceneMarkers)break;this.removeCuePoints();e=0;for(f=a.length;e<f;e++)b=a[e],0!==b&&-1!==b&&(c=this.create("cue-point",this.cuePoints),c.style.left=100*(b/this.duration)+"%");break;case d.REMOVE_CUE_POINTS:this.removeCuePoints();break;case d.DISPLAY_TIME:this.updateValue(a.currentTime/a.duration,a.duration)}};P.prototype.updatePreview=
function(a){var b=this;this.previewData.src=a.previewThumbnailSrc;this.previewData.previewHeight=a.previewThumbnailHeight;this.previewData.previewWidth=a.previewThumbnailWidth;this.previewData.count=a.previewThumbnailCount;a=new Image;this.previewData.src&&(a.src=this.previewData.src);k.create(a,"load",function(a){a.stopImmediatePropagation();b.previewData.imgWidth=a.target.width;b.previewData.imgHeight=a.target.height;return!1});this.previewData.src&&(this.thumbPreview.style.backgroundImage="url("+
this.previewData.src+")");this.thumbPreview.style.width=this.previewData.previewWidth+"px";this.thumbPreview.style.height=this.previewData.previewHeight+"px"};P.prototype.removeCuePoints=function(){null!=this.cuePoints&&(this.cuePoints.innerHTML="")};P.prototype.setValue=function(a){var b;P.__super__.setValue.call(this,a);b=this.facade.app.retrieveProxy(L.NAME).getActivePlaybackCore();this.sendNotification(M.SEEK,a*b.getDuration())};P.prototype.updateValue=function(a,b){null==b&&(b=this.duration);
!0===this.isLive&&(a=1);!0===isNaN(a)&&(a=0);P.__super__.updateValue.call(this,a);!0===this.getDragging()&&(this.scrubTime.textContent=h.formatTimecode(this.value*b));this.scrubTime.style.left=this.scrubTimeSeparator.style.left=""+(100*this.value).toFixed(2)+"%";this.previewInterval=this.duration/this.previewData.count;this.previewImgIndex=Math.floor(this.value*b/this.previewInterval);this.previewRow=Math.floor(this.previewImgIndex*this.previewData.previewWidth/this.previewData.imgWidth);this.xpos=
"-"+this.previewData.previewWidth*this.previewImgIndex+"px ";this.ypos="-"+this.previewData.previewHeight*this.previewRow.toFixed(0)+"px ";this.thumbPreview.style.backgroundPosition=this.xpos+this.ypos;this.thumbPreview.style.left=""+(100*this.value-18).toFixed(2)+"%"};P.prototype.handlePressHandler=function(a){P.__super__.handlePressHandler.call(this,a);this.classList.add("scrubbing")};P.prototype.handleReleaseHandler=function(a){P.__super__.handleReleaseHandler.call(this,a);this.classList.remove("scrubbing")};
var Sc=function(a){Sc.__super__.constructor.call(this,null,a)};f(Sc,Fa);Sc.prototype.componentName="play-pause";Sc.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();this.sendNotification(M.TOGGLE_PLAY_PAUSE);return!1};var O=function(a){O.__super__.constructor.call(this,a)};f(O,x);O.NAME=x.NAME;O.prototype.defaults={mode:"auto",autoHide:3};O.prototype.timeout=null;O.prototype.appState=null;O.prototype.controls=null;O.prototype.interactiveElement=null;O.prototype.idleUtil=
null;O.prototype.initializeNotifier=function(a){O.__super__.initializeNotifier.call(this,a);this.appState=this.facade.app.retrieveProxy(t.NAME);this.controls=this.facade.retrieveMediator(t.NAME)};O.prototype.initialize=function(){var a=this;null!=this.config.mode&&this.changeMode(this.config.mode);this.interactiveElement=this.facade.app.retrieveMediator(Na.NAME).getViewComponent();"desktop"===h.getDevice()?(k.create(this.interactiveElement,"mouseenter",function(){a.stop();a.sendNotification(d.CHANGE_ACTIVE_STATE,
za.ACTIVE)}),k.create(this.interactiveElement,"mouseleave",function(){a.start()}),this.idleUtil=new ta(this.facade.app.getViewComponent(),1E3*this.data.autoHide),this.idleUtil.addEventListener("activechange",function(b){a.sendNotification(d.CHANGE_ACTIVE_STATE,!0!==b.details.active?za.INACTIVE:za.ACTIVE)}),this.idleUtil.start()):k.create(this.interactiveElement,k.CLICK,function(){a.sendNotification(d.TOGGLE_ACTIVE)})};O.prototype.setMode=function(a){if(this.data.mode===a)return a;this.changeMode(a);
return a};O.prototype.changeMode=function(a){"auto"===this.data.mode&&this.stop();this.facade.sendNotification(d.REMOVE_APPLICATION_STATE,"controls-"+this.data.mode);this.data.mode=a;this.facade.sendNotification(d.ADD_APPLICATION_STATE,"controls-"+this.data.mode)};O.prototype.getMode=function(){return this.data.mode};O.prototype.setAutoHide=function(a){return this.data.autoHide=a};O.prototype.getAutoHide=function(){return this.data.autoHide};O.prototype.start=function(){this.stop();"auto"===this.data.mode&&
(this.timeout=setTimeout(this.hide.bind(this),1E3*this.data.autoHide))};O.prototype.stop=function(){clearTimeout(this.timeout);this.timeout=null};O.prototype.hide=function(){"auto"===this.data.mode&&(!0!==this.appState.getIsUserActive()&&!h.isMouseOverElement(this.facade.viewComponent)||this.appState.getDisplayState()===ha.FULL_SCREEN?this.facade.sendNotification(d.CHANGE_ACTIVE_STATE,za.INACTIVE):this.start())};var Pa=function(){Pa.__super__.constructor.call(this)};f(Pa,Aa);Pa.prototype.componentName=
"controls";Pa.prototype.activeControlPanel=null;Pa.prototype.controlBar=null;Pa.prototype.panels=null;Pa.prototype.onRegister=function(){Pa.__super__.onRegister.call(this);this.facade.viewComponent=this.viewComponent;this.controlBar=this.create("control-bar");this.facade.registerMediator(new pa(this.viewComponent));this.facade.registerMediator(new Sc(this.controlBar));this.facade.registerMediator(new va(this.controlBar));this.facade.registerMediator(new P(this.controlBar));this.create("separator",
this.controlBar)};Pa.prototype.listNotificationInterests=function(){return[d.READY,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE]};Pa.prototype.handleNotification=function(a){var b,c;b=a.getName();a=a.getBody();switch(b){case d.READY:!1!==(null!=(c=a.fullscreen)?c.enabled:void 0)&&this.facade.registerMediator(new qb(this.controlBar));break;case d.ADD_CONTROL_STATE:this.classList.add(a);break;case d.REMOVE_CONTROL_STATE:this.classList.remove(a);break;case d.ADD_CONTROL:this.controlBar.appendChild(a);
break;case d.REMOVE_CONTROL:this.controlBar.removeChild(a)}};var E=function(){E.__super__.constructor.call(this)};f(E,Oa);E.UNINITIALIZED=0;E.LOADING=1;E.LOADED=2;E.AMP_DEFAULTS="amp-defaults";E.getConfigURL=function(){var a;a=h.getAMPScriptTag();return null!=a&&(a=a.src,-1!==a.indexOf("?")&&(a=Ob.decode(a),null!=a[this.AMP_DEFAULTS]))?a[this.AMP_DEFAULTS]:null};E.parseModule=function(a){var b,c,e,d;c={};a=a.childNodes;e=0;for(d=a.length;e<d;e++)b=a[e],1===(null!=b?b.nodeType:void 0)&&(c[b.nodeName]=
this.parseItem(b));return c};E.parseItem=function(a){var b,c,e,d;b=(""+a.getAttribute("type")).toLowerCase();c=a.textContent||a.text||a.innerText;if("object"!==b&&"array"!==b&&/#\{.*\}/.test(c))return c;switch(b){case "object":c=this.parseModule(a);break;case "array":c=[];b=a.childNodes;e=0;for(d=b.length;e<d;e++)a=b[e],1===a.nodeType&&c.push(this.parseItem(a));break;case "boolean":c="true"===c.toLowerCase();break;case "number":c=parseFloat(c)}return c};E.loadHead=function(a,b){var c,e,d,g,f,k,l,
m,n,q,r;d=h.getAMPParent();k=function(a){var b;b=document.createElement("script");b.type="text/javascript";b.src=a;b.addEventListener?b.addEventListener("load",m,!1):b.readyState&&(b.onreadystatechange=m);d.appendChild(b)};m=function(){l++;return l<c?k(n[l]):"function"===typeof b?b():void 0};if(null!=a.links&&0<a.links.length)for(f=a.links,q=0,r=f.length;q<r;q++)g=f[q],e=document.createElement("link"),e.rel="stylesheet",e.type="text/css",e.href=g,d.appendChild(e);null!=a.scripts&&0<a.scripts.length?
(n=a.scripts,l=-1,c=n.length,m()):"function"===typeof b&&b()};E.prototype.url=null;E.prototype.data=null;E.prototype.xml=null;E.prototype.readyState=E.UNINITIALIZED;E.prototype.loaded=!1;E.prototype.loadURL=function(a,b){var c=this;null==b&&(b=!1);if(null==a&&(a=E.getConfigURL(),null==a))return;this.url=a;this.setReadyState(E.LOADING);h.get(a,{withCredentials:b,onload:function(a){a=a.data;"document"===a.responseType?(c.xml=a.responseXML,a=7!==c.xml.firstChild.nodeType?c.xml.firstChild:c.xml.childNodes[1],
a=E.parseModule(a)):a=a.response;c.loadModule(a)},onerror:function(a){c.dispatchEvent(new U("error",a));G.error(a)}})};E.prototype.loadModule=function(a){var b=this;null!=a.head?E.loadHead(a.head,function(){b.loadData(a.config)}):this.loadData(a.config)};E.prototype.loadData=function(a){this.data=a;this.setReadyState(E.LOADED)};E.prototype.load=function(a,b){null==b&&(b=!1);"object"===typeof a?this.loadModule(a):null!=a&&"string"!==typeof a||this.loadURL(a,b)};E.prototype.setReadyState=function(a){this.readyState=
a;this.dispatchEvent(new U("readystatechange",a));a!==E.LOADED||this.loaded||(this.loaded=!0,this.dispatchEvent(new U("load",this.data)))};var cc=function(a){cc.__super__.constructor.call(this,a);a=a.retrieveProxy(O.NAME);this.setMode=a.setMode.bind(a);this.getMode=a.getMode.bind(a);this.setAutoHide=a.setAutoHide.bind(a);this.getAutoHide=a.getAutoHide.bind(a)};f(cc,Cb);cc.prototype.setMode=function(a){};cc.prototype.getMode=function(){};cc.prototype.setAutoHide=function(a){};cc.prototype.getAutoHide=
function(){};var u=function(a,b,c){var e,d,g,f,k,l=this;"string"===typeof a&&(a=document.getElementById(a));h.trackMouse();e=f=null;d=new Oa(this);this.addEventListener=function(a,b,c){d.addEventListener(a,b,c)};this.dispatchEvent=function(a){a.player=this;d.dispatchEvent(a)};this.removeEventListener=function(a,b,c){d.removeEventListener(a,b,c)};null!=c&&this.addEventListener("ready",c);g=function(){var a;"string"===typeof b&&(a=h.get(b),b=JSON.parse(a.responseText));u.defaults.readyState!==E.LOADED?
(null!=E.getConfigURL()&&u.defaults.readyState===E.UNINITIALIZED&&u.loadDefaults(),u.defaults.addEventListener("load",function(a){k()})):k()};k=function(){var c,g,k;null!=u.defaults.data&&(b=h.override(u.defaults.data,b));l.version=l.getVersion();b.mode=h.getPlaybackMode(b.mode);null==b.version&&(b.version=l.version);null==a.dataset&&(a.dataset={});a.dataset.version=l.version;G.log(l.version);switch(b.mode){case "html":f=l.createHTMLPlayer(b,a,d);break;case "flash":f=l.createFlashPlayer(b,a,d);break;
case "external":f=l.createExternalPlayer(b,a,d);break;case "none":f=l.createInstallPlayer(a)}f.parent=l;e="function"===typeof f.getAPI?f.getAPI():void 0;if(null!=e)for(g in e)c=e[g],null==l[g]&&(l[g]=c);k=f.getModules();for(g in k)c=k[g],e="function"===typeof c.getAPI?c.getAPI():void 0,l[g]=e||c,c="function"===typeof c.getFeatureName?c.getFeatureName():void 0,null!=c&&(l[c]=l[g]);try{a.amp=l}catch(m){G.error(m)}};c=null!=(null!=b?b.debug:void 0)?b.debug:/debug\=true/.test(location.search.toLowerCase());
G.enable(c);!0===c&&null!=(null!=b?b["debugger"]:void 0)?u.loadDebugger(b["debugger"],g):g()};u.prototype.getVersion=function(){return this.constructor.VERSION};u.prototype.createFlashPlayer=function(a,b,c){return new n(a,b,c)};u.prototype.createHTMLPlayer=function(a,b,c){return new Ab(a,b,c)};u.prototype.createExternalPlayer=function(a,b,c){return new Nb(a,b,c)};u.prototype.createInstallPlayer=function(a){return new oe(a)};u.VERSION="AMP v4.10.0.0004";u.defaults=new E;u.plugins=[];u.loadDefaults=
function(a,b){null==b&&(b=!1);this.defaults.load(a,b)};u.loadDebugger=function(a,b){h.loadAMPScript(a,function(){null!=b&&setTimeout(b,1E3)})};u.getPlaybackMode=function(){return h.getPlaybackMode()};u.registerPlugin=function(a,b,c){var e;null==(e=this.plugins)[a]&&(e[a]={});this.plugins[a][b]=c};var Tc=function(){return Tc.__super__.constructor.apply(this,arguments)};f(Tc,J);Tc.NAME="PlayOverlayWrapper";Tc.prototype.createFlashVars=function(a){a.show_play_button_overlay=null!=this.config.enabled?
this.config.enabled:!0;return a};u.registerPlugin("playoverlay","flash",Tc);var Uc=function(){Uc.__super__.constructor.call(this)};f(Uc,ba);Uc.prototype.componentName="play";Uc.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();this.sendNotification(M.TOGGLE_PLAY_PAUSE);return!1};var wa=function(a,b){wa.__super__.constructor.call(this,a,b)};f(wa,Z);wa.NAME="ControlsPlugin";wa.prototype.moduleName="controls";wa.prototype.initialize=function(){!0===this.config["native"]?(this.app.getVideo().controls=
!0,this.app.sendNotification(d.ADD_APPLICATION_STATE,"controls-native"),this.registerCommand(d.CHANGE_MEDIA,Ld),this.registerCommand("adsbreakstart",Jd),this.registerCommand("adsbreakend",Kd),this.createAPI=this.createView=function(){}):wa.__super__.initialize.call(this)};wa.prototype.createController=function(){this.registerCommand(d.PLAY,Gd);this.registerCommand(d.PAUSE,Hd);this.registerCommand(d.ACTIVE_STATE_CHANGE,Id)};wa.prototype.createModel=function(){this.registerProxy(new O(this.config))};
wa.prototype.createAPI=function(){return new cc(this)};wa.prototype.createView=function(){this.registerMediator(new Pa)};wa.prototype.listNotificationInterests=function(){var a,b,c;c=[];for(a in ia)b=ia[a],c.push(b);return c.concat([d.MEDIA_CHANGE,d.TIME_UPDATE,d.DURATION_CHANGE,d.PROGRESS,d.ENDED,d.ADD_CUE_POINTS,d.REMOVE_CUE_POINTS,d.DISABLE_FULL_SCREEN,d.ENABLE_FULL_SCREEN,d.READY,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,d.ACTIVE_STATE_CHANGE,d.PLAY,d.PAUSE,"adsbreakstart",
"adsbreakend",d.CHANGE_MEDIA,d.DISPLAY_TIME])};wa.prototype.listNotificationPublications=function(){return wa.__super__.listNotificationPublications.call(this).concat([d.CHANGE_ACTIVE_STATE,d.TOGGLE_FULL_SCREEN,M.TOGGLE_PLAY_PAUSE,M.SEEK,d.TOGGLE_ACTIVE])};u.registerPlugin("controls","html",wa);u.registerPlugin("controls","flash",ua);u.registerPlugin("controls","external",wa);var T=function(a,b,c,e){this.url=a;this.interval=null!=b?b:1E4;this.type=null!=c?c:null;this.headers=null!=e?e:null;T.__super__.constructor.call(this)};
f(T,Oa);T.prototype.timeout=null;T.prototype.interval=null;T.prototype.url=null;T.prototype.lastModified=null;T.prototype.contentLenght=null;T.prototype.data=null;T.prototype.text=null;T.prototype.type=null;T.prototype.headers=null;T.prototype.useHeadRequest=!0;T.prototype.xhr=null;T.prototype.start=function(){null!=this.url&&""!==this.url&&this.poll()};T.prototype.poll=function(){var a,b=this;a=h.getXHR();this.useHeadRequest?(a.onload=function(c){var e;304===a.status?b.invoke():(e=a.getResponseHeader("Last-Modified"),
c=a.getResponseHeader("Content-Length"),null==e&&null==c||null!=e&&e!==b.lastModified||null!=c&&c!==b.contentLength?(b.lastModified=e,b.contentLength=c,b.updateData()):b.invoke())},a.onerror=function(a){b.error(a)},a.open("HEAD",h.cacheBust(this.url),!1),this.applyHeaders(),null!=this.lastModified&&a.setRequestHeader("If-Modified-Since",this.lastModified),a.send()):this.updateData()};T.prototype.applyHeaders=function(){null!=this.headers&&this.xhr.setRequestHeaders(this.headers)};T.prototype.updateData=
function(){var a,b=this;a=h.getXHR();a.open("GET",h.cacheBust(this.url),!0);a.onload=function(c){b.setText(a.responseText);b.invoke()};a.onerror=function(a){b.error(a)};this.applyHeaders();return a.send()};T.prototype.setText=function(a){var b;if(a!==this.text){b=this.text=a;if(this.type===h.mimeTypes.json)try{b=this.xhr.response}catch(c){b=this.text}this.setData(b)}return a};T.prototype.setData=function(a){a!==this.data&&(this.data=a,this.dispatchEvent(new U("datachanged",this.data)));return a};
T.prototype.error=function(a){G.error(event);this.stop()};T.prototype.invoke=function(){var a=this;this.stop();this.timeout=setTimeout(function(){a.poll()},this.interval)};T.prototype.stop=function(){clearTimeout(this.timeout)};var sc=function(){return sc.__super__.constructor.apply(this,arguments)};f(sc,J);sc.NAME="EventManagementWrapper";sc.prototype.createFlashVars=function(a){null!=this.config.enabled&&(a.eventmanagementstates_enabled=this.config.enabled);null!=this.config.url&&(a.eventmanagementstates_status_url=
this.config.url);null!=this.config.interval&&(a.eventmanagementstates_status_interval=this.config.interval);return a};sc.prototype.createXML=function(a){var b,c,e,d,g,f,h;b=a.getElementsByTagName("application")[0];c=a.getElementsByTagName("eventmanagementstates");null==c||0===c.length?(c=a.createElement("eventmanagementstates"),b.appendChild(c)):c=c[0];b=a.createElement("states");c.appendChild(b);h=this.config.states;g=0;for(f=h.length;g<f;g++)d=h[g],c=a.createElement("state"),b.appendChild(c),e=
a.createElement("property"),e.setAttribute("key","ID"),e.appendChild(X.createTextContent(a,d.id)),c.appendChild(e),e=a.createElement("property"),e.setAttribute("key","POSTER_SRC"),e.appendChild(X.createTextContent(a,d.poster)),c.appendChild(e),null!=d.url&&(e=a.createElement("property"),e.setAttribute("key","URL"),e.appendChild(X.createTextContent(a,d.url)),c.appendChild(e));return a};var Db=function(){Db.__super__.constructor.call(this)};f(Db,ba);Db.prototype.componentName="event-management";Db.prototype.poster=
null;Db.prototype.onRegister=function(){this.classList.add("hidden");this.poster=this.create("event-poster",!1,"img");Db.__super__.onRegister.call(this)};Db.prototype.listNotificationInterests=function(){return["eventStateChanged"]};Db.prototype.handleNotification=function(a){switch(a.getName()){case "eventStateChanged":a=a.getBody(),"on"!==a.id?(null!=a.poster&&(this.poster.src=a.poster,this.viewComponent.appendChild(this.poster)),this.classList.remove("hidden"),this.sendNotification(d.PAUSE),this.sendNotification(d.CHANGE_DISPLAY_STATE,
ha.NORMAL)):(this.viewComponent.contains(this.poster)&&this.viewComponent.removeChild(this.poster),this.classList.add("hidden"))}};var Md=function(){Md.__super__.constructor.call(this)};f(Md,puremvc.SimpleCommand);Md.prototype.execute=function(a){var b;this.facade.logger.debug("EventManagementPlayCommand");(null!=(b=this.facade.retrieveProxy(ea.NAME).getState())?b.id:void 0)!==ea.ON.id&&this.sendNotification(d.PAUSE)};var ea=function(a){var b=this;ea.__super__.constructor.call(this,a);this.poller=
new T;this.poller.ondatachanged=function(a){var e,d,g,f;a=a.data;if("on"===a)e=ea.ON;else for(f=b.data.states,d=0,g=f.length;d<g&&(e=f[d],e.id!==a);d++);if(null!=e)return b.setState(e)}};f(ea,x);ea.NAME=x.NAME;ea.ON={id:"on"};ea.prototype.defaults={url:null,interval:null,states:null,enabled:!1};ea.prototype.poller=null;ea.prototype.state=null;ea.prototype.initialize=function(){!0===this.data.enabled&&(this.setURL(this.data.url),this.setInterval(this.data.interval),this.poller.start())};ea.prototype.setURL=
function(a){return this.data.url=this.poller.url=a};ea.prototype.getURL=function(){return this.data.url};ea.prototype.getInterval=function(){return this.data.interval};ea.prototype.setInterval=function(a){this.data.interval=this.poller.interval=1E3*a;return a};ea.prototype.setState=function(a){this.state=a;this.sendNotification("eventStateChanged",a);return a};ea.prototype.getState=function(){return this.state};var Qa=function(a){Qa.__super__.constructor.call(this,a)};f(Qa,N);Qa.NAME=x.NAME;Qa.prototype.defaults=
{config:null,dimensions:null,plugin:{js:"http://79423.analytics.edgesuite.net/html5/akamaihtml5-min.js"}};Qa.prototype.getLoaded=function(){return null!=window.setAkamaiMediaAnalyticsData};Qa.prototype.initialize=function(){try{window.akamaiSetVideoObject(this.facade.app.getVideo())}catch(a){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set video tag",a)}};Qa.prototype.setDimensions=function(a){var b,c,e;b=this.configurationData.source.dimensions;for(c in a)e=a[c],null!=e&&(b[c]=
e);this.configurationData.parse(this.configurationData.source);this.applyDimensions(b);return a};Qa.prototype.applyDimensions=function(a){var b,c;if(null!=window.setAkamaiMediaAnalyticsData)try{for(b in a)c=a[b],setAkamaiMediaAnalyticsData(b,c)}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set dimensions:",e)}};Qa.prototype.setMedia=function(a){var b,c;b=null!=(null!=(c=a.mediaanalytics)?c.dimensions:void 0)?h.override(this.value.dimensions,a.mediaanalytics.dimensions):
this.value.dimensions;this.applyDimensions(b);return a};Qa.prototype.udpateMedia=function(a){"function"===typeof akamaiHandleTitleSwitch&&akamaiHandleTitleSwitch(a);return a};var rb=function(a,b){rb.__super__.constructor.call(this,a,b)};f(rb,Z);rb.NAME="PlayOverlayPlugin";rb.prototype.moduleName="playoverlay";rb.prototype.createModel=function(){};rb.prototype.createView=function(){this.registerMediator(new Uc)};rb.prototype.listNotificationPublications=function(){return rb.__super__.listNotificationPublications.call(this).concat([M.TOGGLE_PLAY_PAUSE])};
u.registerPlugin("playoverlay","html",rb);u.registerPlugin("playoverlay","external",rb);var bb=function(a,b){bb.__super__.constructor.call(this,a,b)};f(bb,J);bb.NAME="MediaAnalyticsWrapper";bb.prototype.listNotificationInterests=function(){return bb.__super__.listNotificationInterests.call(this).concat([d.MEDIA_CHANGE,"mediaanalytics:setDimensions"])};bb.prototype.createFlashVars=function(a){var b,c,e,d;b=null!=(e=this.player.config)?null!=(d=e.media)?d.mediaanalytics:void 0:void 0;if(null!=b)for(c in b)e=
b[c],a["report_"+c]=e;return a};bb.prototype.createXML=function(a){var b,c,e,d,g;b=a.getElementsByTagName("application")[0];e=a.getElementsByTagName("metrics")[0];null==e&&(e=a.createElement("metrics"),b.appendChild(e));b=a.createElement("vendor");b.setAttribute("id","akamai");e.appendChild(b);null!=this.config.config&&(e=a.createElement("property"),e.setAttribute("key","MEDIA_ANALYTICS_BEACON"),e.appendChild(X.createTextContent(a,this.config.config)),b.appendChild(e),g=(null!=(c=this.config.plugin)?
c.swf:void 0)||"http://79423.analytics.edgesuite.net/csma/plugin/csma.swf",e=a.createElement("property"),e.setAttribute("key","MEDIA_ANALYTICS_PLUGIN_PATH"),e.appendChild(X.createTextContent(a,g)),b.appendChild(e));if(null!=this.config.dimensions)for(d in c=a.createElement("property"),c.setAttribute("key","dimensions"),b.appendChild(c),g=this.config.dimensions,g)b=g[d],e=a.createElement("property"),e.setAttribute("key",d),e.appendChild(X.createTextContent(a,b)),c.appendChild(e);return a};bb.prototype.handleNotification=
function(a){var b,c,e;bb.__super__.handleNotification.call(this,a);c=a.getName();a=a.getBody();switch(c){case d.MEDIA_CHANGE:if(null!=(null!=(e=a.mediaanalytics)?e.dimensions:void 0))for(b in a.dimensions=[],e=a.mediaanalytics.dimensions,e)c=e[b],a.dimensions.push({key:b,value:c});break;case "mediaanalytics:setDimensions":this.setDimensions(a)}};bb.prototype.setDimensions=function(a){this.player.video.setPlayerProperty("maDimensions",a);return a};var aa=function(){aa.__super__.constructor.call(this)};
f(aa,puremvc.SimpleCommand);aa.prototype.config=null;aa.prototype.plugin=null;aa.prototype.initializeNotifier=function(a){aa.__super__.initializeNotifier.call(this,a);return this.config=this.plugin=this.facade.retrieveProxy(x.NAME)};var Nd=function(){Nd.__super__.constructor.call(this)};f(Nd,puremvc.SimpleCommand);Nd.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsAdBreakStartCommand");this.facade.app.getVideo().dataset.isad=!0};var Od=function(){Od.__super__.constructor.call(this)};
f(Od,puremvc.SimpleCommand);Od.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsAdBreakEndCommand");this.facade.app.getVideo().dataset.isad=!1};var Pd=function(){Pd.__super__.constructor.call(this)};f(Pd,puremvc.SimpleCommand);Pd.prototype.execute=function(a){var b,c;this.facade.logger.debug("MediaAnalyticsAdLoadedCommand");try{c=a.getBody(),b={adDuration:c.duration,adPartnerId:c.partner,adTitle:c.title,adId:c.id},"function"===typeof akamaiHandleAdLoaded&&akamaiHandleAdLoaded(b)}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",
e)}};var Qd=function(){Qd.__super__.constructor.call(this)};f(Qd,aa);Qd.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsAdStartCommand");try{"function"===typeof akamaiHandleAdStarted&&akamaiHandleAdStarted()}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",b)}};var Rd=function(){Rd.__super__.constructor.call(this)};f(Rd,aa);Rd.prototype.execute=function(a){a=a.getBody();a=Math.round(100*(a.currentTime/a.duration));try{25<=a&&25>proxy.percent?(this.facade.logger.debug("MediaAnalytics: First Quartile"),
"function"===typeof akamaiHandleAdFirstQuartile&&akamaiHandleAdFirstQuartile()):50<=a&&50>proxy.percent?(this.facade.logger.debug("MediaAnalytics: Second Quartile"),"function"===typeof akamaiHandleAdMidpoint&&akamaiHandleAdMidpoint()):75<=a&&75>proxy.percent&&(this.facade.logger.debug("MediaAnalytics: Third Quartile"),"function"===typeof akamaiHandleAdThirdQuartile&&akamaiHandleAdThirdQuartile())}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",b)}this.config.percent=a};var Sd=function(){Sd.__super__.constructor.call(this)};
f(Sd,puremvc.SimpleCommand);Sd.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsAdEndCommand");try{"function"===typeof akamaiHandleAdCompleted&&akamaiHandleAdCompleted()}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",b)}this.facade.app.getVideo().dataset.isad=!0};var Td=function(){Td.__super__.constructor.call(this)};f(Td,aa);Td.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsSetDimensionsCommand");a=a.getBody();this.config.setDimensions(a)};
var Ud=function(){Ud.__super__.constructor.call(this)};f(Ud,aa);Ud.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsContentChangedCommand");this.config.updatedMedia(a.getBody())};var Vd=function(){Vd.__super__.constructor.call(this)};f(Vd,aa);Vd.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsChangeMediaCommand");a=a.getBody();this.config.setMedia(a)};var Eb=function(a,b,c){this.startTime=a;this.endTime=b;this.id=c};Eb.prototype.id=null;Eb.prototype.startTime=
null;Eb.prototype.endTime=null;Eb.prototype.text=null;Eb.prototype.html=null;Eb.prototype.align=null;var Wd=function(a){Wd.__super__.constructor.call(this,a);this.setDimensions=function(b){a.retrieveProxy(Qa.NAME).setDimensions(b);return b}};f(Wd,Cb);Wd.prototype.setDimensions=function(a){};var se=function(){};se.prototype.parse=function(a,b){var c,e,d,g,f,k,l,m,n;b=b.replace(/\r/g,"");e=b.split("\n\n");m=0;for(n=e.length;m<n;m++){c=e[m];c=c.split("\n");try{g=c[0],l=c[1].match(/([0-9:\,]+)\s*--\x3e\s*([0-9:\,]+)/).slice(1),
f=h.flattenTimecode(l[0]),d=h.flattenTimecode(l[1]),k=c.slice(2)}catch(q){G.warn("SRT Parsing Warning")}c=new Eb(f,d,"cue_"+g);c.html="\x3cp\x3e"+k.join("\x3cbr /\x3e")+"\x3c/p\x3e";c.text=k.join("\n");a.cues.push(c)}return a};var re=function(){};re.prototype.parse=function(a,b){var c,e;Array.prototype.slice.call(b.querySelectorAll("styling style")).forEach(function(b,c,e){var d;d="";c=b.getAttribute("id")||b.getAttribute("xml:id");Array.prototype.slice.call(b.attributes).forEach(function(a,b,c){if("tts"===
a.prefix)return d+=h.formatStyleName(a.localName)+":"+a.nodeValue+";"});a.styles[c]=d});Array.prototype.slice.call(b.querySelectorAll("body [style]")).forEach(function(b,c,e){c=b.getAttribute("style");b.setAttribute("style",a.styles[c])});e=b.querySelector("tt");e=e.getAttribute("lang")||e.getAttribute("xml:lang");if(void 0===a.language||null===a.language)a.language=e;c=Array.prototype.slice.call(b.querySelectorAll("body p[begin]"));c.forEach(function(b,e,d){var f;d=b.getAttribute("begin");b.removeAttribute("begin");
null!=b.getAttribute("end")?(f=b.getAttribute("end"),b.removeAttribute("end")):null!=c[e+1]&&(f=c[e+1].getAttribute("begin"));e=new Eb(h.flattenTimecode(d),h.flattenTimecode(f),"cue_"+e);f=b.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign");null!=f&&(e.align="center"===f?"middle":f,b.removeAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign"));b=X.serialize(b);b=b.replace(/\s*xmlns="[^"]*"/,"");e.html=b;b=b.replace(/^<p[^>]*>/,"");b=b.replace(/<\/p>$/,"");b=b.replace(/<br\/>/,
"\n");b=b.replace(/<span style="([^"]*)"/,"\x3cc.$1");b=b.replace(/<\/span>/,"\x3c/c\x3e");e.text=b;a.cues.push(e)});return a};var Ra=function(a,b){Ra.__super__.constructor.call(this,a,b)};f(Ra,Z);Ra.NAME="EventManagementPlugin";Ra.prototype.moduleName="eventmanagement";Ra.prototype.createModel=function(){this.registerProxy(new ea(this.config))};Ra.prototype.createController=function(){this.registerCommand(d.PLAY,Md)};Ra.prototype.createView=function(){this.registerMediator(new Db)};Ra.prototype.listNotificationInterests=
function(){return[d.PLAY]};Ra.prototype.listNotificationPublications=function(){return Ra.__super__.listNotificationPublications.call(this).concat([d.CHANGE_DISPLAY_STATE,d.PAUSE,"eventStateChanged"])};Ra.prototype.listNotificationEvents=function(){return["eventStateChanged"]};u.registerPlugin("eventmanagement","html",Ra);u.registerPlugin("eventmanagement","flash",sc);var Ga=function(a,b){Ga.__super__.constructor.call(this,a,b)};f(Ga,J);Ga.NAME="CaptioningWrapper";Ga.prototype.hidden=!0;Ga.prototype.createXML=
function(a){var b,c,e,d;e=null!=(d=this.config.flash)?d.subply:void 0;if(null!=e)try{null!=e.timeMethod&&(c=a.getElementsByTagName("player")[0],c.setAttribute("subply_time_method",e.timeMethod)),null!=e.plugin&&(b=a.getElementsByTagName("application")[0],e=a.getElementsByTagName("subply")[0],null==e&&(e=a.createElement("subply"),b.appendChild(e)),this.createProperty(a,"SUBPLY_URL",this.config.flash.subply.plugin,e))}catch(g){this.facade.logger.error("AMP Captioning Error",g)}};Ga.prototype.createFlashVars=
function(a){var b,c,e,d,g,f;e=this.player.config;if(null!=(null!=(b=e.media)?b.track:void 0)){d=h.selectTrack(e.media.track,"captions");null!=d.src&&""!==d.src&&(a.caption_url=d.src);if(1<e.media.track.length){c=[];b=[];f=e.media.track;e=0;for(g=f.length;e<g;e++)d=f[e],c.push(d.src),b.push(d.srclang);a.caption_url=c.join(",");a.caption_language=b.join(",")}a.caption_type=null!=d.type?encodeURIComponent(d.type):"application/ttml+xml"}};Ga.prototype.listNotificationInterests=function(){return Ga.__super__.listNotificationInterests.apply(this,
arguments).concat([d.MEDIA_CHANGE,q.CAPTIONING_REQUEST,q.CAPTION_LANG_CHANGE])};Ga.prototype.handleNotification=function(a){var b,c,e;Ga.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case q.CAPTION_LANG_CHANGE:e="";break;case q.CAPTIONING_REQUEST:e="visibilitychange";a=a.enabled;this.hidden=!a;break;case d.MEDIA_CHANGE:b=a,null!=b.track&&(c=h.selectTrack(b.track,"captions"),null!=(null!=c?c.src:void 0)&&""!==c.src&&(b.captioningUrl=c.src),b.captioningType=c.type||
"application/ttml+xml")}null!=e&&""!==e&&this.dispatchEvent(new U(e,a))};Ga.prototype.getHidden=function(){return this.hidden};Ga.prototype.setHidden=function(a){this.hidden=a;this.facade.getVideo().setPlayerProperty("captionDisplay",{visible:!a});return a};u.registerPlugin("captioning","flash",Ga);var cb=function(){cb.__super__.constructor.call(this)};f(cb,ba);cb.prototype.initializeNotifier=function(a){cb.__super__.initializeNotifier.call(this,a);this.plugin=this.facade.retrieveProxy(x.NAME);this.media=
this.facade.app.retrieveProxy(m.NAME)};cb.prototype.onRegister=function(){cb.__super__.onRegister.call(this);this.facade.viewComponent=this.viewComponent};var Q=function(a){Q.__super__.constructor.call(this,null,null,a,null)};f(Q,I);Q.prototype.componentName="captioning-settings";Q.prototype.captioningObject={"default":{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},
appliedStyleText:"",selected:{fontFamily:null,size:null,fontColor:null,edgeType:null,edgeColor:null,backgroundColor:null,windowColor:null},preset1:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset2:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},
preset3:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,1)",windowColor:"rgba(0,0,0,0)"},preset4:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},instance:null};Q.prototype.captionText=null;Q.prototype.settingsUiVisible=!1;Q.prototype.captionningStyle=null;Q.prototype.swatchColorCurr=
null;Q.prototype.swatchOpacityCurr=null;Q.prototype.colorPicker=null;Q.prototype.colorPickerOpacity=null;Q.prototype.advancedSettingContainer=null;Q.prototype.list={font:null,language:null,edge:null,size:null,scroll:null};Q.prototype.picker={color:null,background:null,edge:null,window:null};Q.prototype.toggle={ON:null,OFF:null,disabled:!1};Q.prototype.onRegister=function(){var a,b,c,e,d,g=this;this.captionText=this.create("caption-text",this.viewComponent.parentElement);c=this.create("captioning-titlebar");
this.create("captioning-title",c,"span",this.localizationManager.getString(r.MSG_CC_TITLE));this.toggle.ON=this.create("captioning-toggle-btn",c,"button","ON");this.toggle.OFF=this.create("captioning-toggle-btn",c,"button","OFF");k.create(this.toggle.ON,k.CLICK,function(a){a.stopImmediatePropagation();g.toggle.disabled||g.toggleButtonHandler(!0);return!1});this.toggle.disabled||this.classList.add("captioning-floater-btnselected",this.toggle.OFF);k.create(this.toggle.OFF,k.CLICK,function(a){a.stopImmediatePropagation();
g.toggle.disabled||g.toggleButtonHandler(!1);return!1});c=this.create("captioning-row");this.create("captioning-label",c,"span",this.localizationManager.getString(r.MSG_CC_LANGUAGE));this.list.language=this.create("captioning-dropdown",c,"select");this.languageListPopulate();k.create(this.list.language,"change",function(a){var b;a.stopImmediatePropagation();b="None"!==a.target.selectedValue;g.sendNotification(v.VISIBILITY_CHANGE,b);b&&g.facade.moduleAPI.setTrack(g.facade.moduleAPI.selectTrackByIndex(a.target.selectedIndex));
return!1});this.create("captioning-label",c,"span",this.localizationManager.getString(r.MSG_CC_PRESETS));a=this.create(["captioning-preset","captioning-preset1"],c,null,"Aa");b=this.create(["captioning-preset","captioning-preset2"],c,null,"Aa");d=this.create(["captioning-preset","captioning-preset3"],c,null,"Aa");c=this.create(["captioning-preset","captioning-preset4"],c,null,"Aa");k.create(a,k.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=g.cloneObject(g.captioningObject.preset1);
g.applyCaptioningStyle();return!1});k.create(b,k.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=g.cloneObject(g.captioningObject.preset2);g.applyCaptioningStyle();return!1});k.create(d,k.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=g.cloneObject(g.captioningObject.preset3);g.applyCaptioningStyle();return!1});k.create(c,k.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=g.cloneObject(g.captioningObject.preset4);g.applyCaptioningStyle();
return!1});this.advancedSettingContainer=this.create("captioning-advanced-container");c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label",c,"span",this.localizationManager.getString(r.MSG_CC_FONT));this.list.font=this.create("captioning-dropdown",c,"select");this.create(null,this.list.font,"option","Arial").value="Arial,sans-serif";this.create(null,this.list.font,"option","Times New Roman");this.create(null,this.list.font,"option","Courier");this.create(null,
this.list.font,"option","Georgia");this.create(null,this.list.font,"option","Helvetica");this.create(null,this.list.font,"option","Verdana");this.create(null,this.list.font,"option","Impact");this.create(null,this.list.font,"option","Comic Sans Serif");this.create(null,this.list.font,"option","Times New Roman");k.create(this.list.font,"change",function(a){a.stopImmediatePropagation();g.captioningObject.selected.fontFamily=a.target.value;g.applyCaptioningStyle(!1);return!1});c.appendChild(this.list.font);
this.create("captioning-label",c,"span",this.localizationManager.getString(r.MSG_CC_EDGE));this.list.edge=this.create("captioning-dropdown",c,"select");this.create(null,this.list.edge,"option","none").value="none";this.create(null,this.list.edge,"option","Right drop shadow").value="text-shadow: 3px 3px 2px";this.create(null,this.list.edge,"option","Left drop shadow").value="text-shadow: -3px 3px 2px";this.create(null,this.list.edge,"option","Uniform").value="text-shadow: 0px 0px 4px";this.create(null,
this.list.edge,"option","Raised").value="text-shadow: 0px 1px 1px";this.create(null,this.list.edge,"option","Depressed").value="text-shadow: 0px 1px 0px";k.create(this.list.edge,"change",function(a){a.stopImmediatePropagation();g.captioningObject.selected.edgeType=a.target.value;g.applyCaptioningStyle(!1);return!1});c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label",c,"span",this.localizationManager.getString(r.MSG_CC_SIZE));this.list.size=this.create("captioning-dropdown",
c,"select");this.create(null,this.list.size,"option","Small").value=".8em";this.create(null,this.list.size,"option","Medium").value="1.3em";this.create(null,this.list.size,"option","Large").value="2.3em";this.list.size.selectedIndex=1;k.create(this.list.size,"change",function(a){a.stopImmediatePropagation();g.captioningObject.selected.size=a.target.value;g.applyCaptioningStyle(!1);return!1});this.create("captioning-label",c,"span",this.localizationManager.getString(r.MSG_CC_SCROLL));this.list.scroll=
this.create("captioning-dropdown",c,"select");this.create(null,this.list.scroll,"option","Roll up");this.create(null,this.list.scroll,"option","Roll down");k.create(this.list.scroll,"change",function(a){a.stopImmediatePropagation();return!1});c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label-small",c,"span",this.localizationManager.getString(r.MSG_CC_COLOR));this.picker.color=this.create("captioning-color-picker",c);this.picker.color.style.backgroundColor=
this.captioningObject["default"].fontColor;k.create(this.picker.color,k.CLICK,function(a){var b;a.stopImmediatePropagation();g.colorPicker.style.display="block"===g.colorPicker.style.display?"none":"block";"block"===g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="152px",g.colorPicker.name="fontColor",g.captioningObject.instance=g.picker.color,-1!==g.picker.color.style.backgroundColor.indexOf("rgba")&&(b=g.picker.color.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,
"").split(",")[3]),g.colorPickerOpacity.value=null!=b?b:1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(r.MSG_CC_BACKGROUND));this.picker.background=this.create("captioning-color-picker",c);this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor;k.create(this.picker.background,k.CLICK,function(a){var b;a.stopImmediatePropagation();g.colorPicker.style.display="block"===g.colorPicker.style.display?"none":"block";"block"===
g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="264px",g.colorPicker.name="backgroundColor",g.captioningObject.instance=g.picker.background,-1!==g.picker.background.style.backgroundColor.indexOf("rgba")&&(b=g.picker.background.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),g.colorPickerOpacity.value=null!=b?b:1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(r.MSG_CC_EDGE));
this.picker.edge=this.create("captioning-color-picker",c);this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor;k.create(this.picker.edge,k.CLICK,function(a){var b;a.stopImmediatePropagation();g.colorPicker.style.display="block"===g.colorPicker.style.display?"none":"block";"block"===g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="212px",g.colorPicker.name="edgeColor",g.captioningObject.instance=
g.picker.edge,-1!==g.picker.edge.style.backgroundColor.indexOf("rgba")&&(b=g.picker.edge.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),g.colorPickerOpacity.value=null!=b?b:1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(r.MSG_CC_WINDOW));this.picker.window=this.create("captioning-color-picker",c);this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor;k.create(this.picker.window,k.CLICK,function(a){var b;
a.stopImmediatePropagation();g.colorPicker.style.display="block"===g.colorPicker.style.display?"none":"block";"block"===g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="300px",g.colorPicker.name="windowColor",g.captioningObject.instance=g.picker.window,-1!==g.picker.window.style.backgroundColor.indexOf("rgba")&&(b=g.picker.window.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),g.colorPickerOpacity.value=
null!=b?b:1);return!1});c=this.create(["caption-text","caption-text-preview"]);this.create(null,c,"p","Lorem ipsum dolor sit amet");c=this.create("captioning-footer-container");a=this.create("captioning-footer-button",c,"button",this.localizationManager.getString(r.MSG_CC_APPLY));b=this.create("captioning-footer-button",c,"button",this.localizationManager.getString(r.MSG_CC_CANCEL));d=this.create("captioning-footer-button",c,"button",this.localizationManager.getString(r.MSG_CC_RESET));450<this.facade.app.getViewComponent().clientWidth&&
(c=this.create("captioning-advanced-button",c,"button",this.localizationManager.getString(r.MSG_CC_SHOW_ADVANCED)),k.create(c,k.CLICK,function(a){a.stopImmediatePropagation();"block"===g.advancedSettingContainer.style.display?(a.target.innerHTML=g.localizationManager.getString(r.MSG_CC_SHOW_ADVANCED),g.advancedSettingContainer.style.display="none",g.colorPicker.style.display="none"):(a.target.innerHTML=g.localizationManager.getString(r.MSG_CC_HIDE_ADVANCED),g.advancedSettingContainer.style.display=
"block");return!1}));k.create(a,k.CLICK,function(a){a.stopImmediatePropagation();try{localStorage.setItem(ic.PREFIX+"captioningDefault",JSON.stringify(g.captioningObject.selected))}catch(b){g.facade.logger.error("LocalStorage Not Supported on this Browser",b)}g.sendNotification(v.SETTINGS_VISIBILITY_CHANGE,g.settingsUiVisible);g.applyCaptioningStyle(!1,!0);g.sendNotification(v.SETTINGS_CHANGE,g.captioningObject.selected);return!1});k.create(b,k.CLICK,function(a){a.stopImmediatePropagation();g.sendNotification(v.SETTINGS_VISIBILITY_CHANGE,
g.settingsUiVisible);return!1});k.create(d,k.CLICK,function(a){a.stopImmediatePropagation();g.colorPicker.style.display="none";g.applyCaptioningStyle(!0);return!1});this.captionningStyle=this.create(null,document.getElementsByTagName("head")[0],"style");this.captionningStyle.type="text/css";c="#000000 #660000 #990000 #ff0000 #000066 #660066 #990066 #ff0066 #006600 #666600 #996600 #ff6600 #006666 #666666 #996666 #ff6666 #009900 #669966 #999900 #ff9900 #009966 #669966 #999966 #ff9966 #00ff00 #66ff00 #99ff00 #ffff00 #00ff66 #66ff66 #99ff66 #ffff66 #000099 #660099 #990099 #ff0099 #0000ff #6600ff #9900ff #ff00ff #006699 #666699 #996699 #ff6699 #0066ff #6666ff #9966ff #ff66ff #009999 #669999 #999999 #ff9999 #0099ff #6699ff #9999ff #ff99ff #0099ff #66ff99 #99ff99 #ffff99 #00ffff #66ffff #99ffff #ffffff".split(" ");
this.colorPicker=this.create("colorpicker-palette",this.viewComponent.parentElement);a=this.create("colorpicker-swatch",!1,null,"\x26nbsp;");b=0;for(d=c.length;b<d;b++)e=c[b],a.style.backgroundColor=e,e=a.cloneNode(),k.create(e,k.CLICK,function(a){a.stopImmediatePropagation();null!==g.swatchColorCurr&&(g.swatchColorCurr.style.borderColor="rgba(0,0,0,0.3)");g.swatchColorCurr=a.target;g.swatchColorCurr.style.borderColor="rgba(255, 50, 50, 1)";g.captioningObject.instance.style.backgroundColor=g.captioningObject.selected[g.colorPicker.name]=
g.toRGBA(a.target.style.backgroundColor);g.applyCaptioningStyle(!1);return!1}),this.colorPicker.appendChild(e);this.create("opacity-label",this.colorPicker,"span",this.localizationManager.getString(r.MSG_CC_OPACITY));this.colorPickerOpacity=this.create("colorpicker-slider",this.colorPicker,"input");this.colorPickerOpacity.type="range";this.colorPickerOpacity.min=0;this.colorPickerOpacity.max=1;this.colorPickerOpacity.step=0.1;this.colorPickerOpacity.value=1;k.create(this.colorPickerOpacity,"change",
function(a){a.stopImmediatePropagation();g.captioningObject.instance.style.backgroundColor=g.captioningObject.selected[g.colorPicker.name]=g.toRGBA(g.captioningObject.instance.style.backgroundColor);g.applyCaptioningStyle(!1);return!1});this.swatchOpacityCurr=this.colorPickerOpacity;k.create(document,k.CLICK,function(a){a.stopImmediatePropagation();"akamai-colorpicker-palette"!==a.target.className&&"akamai-opacity-label"!==a.target.className&&"akamai-colorpicker-slider"!==a.target.className&&"none"!==
g.colorPicker.style.display&&(g.colorPicker.style.display="none");return!1});null!=localStorage.getItem(ic.PREFIX+"captioningDefault")?(this.captioningObject.selected=JSON.parse(localStorage.getItem(ic.PREFIX+"captioningDefault")),this.applyCaptioningStyle(!1)):(c=!(null!=this.facade.config.style||"undefined"!==this.facade.config.style),c||(this.captioningObject.selected=this.cloneObject(this.facade.config.style)),this.applyCaptioningStyle(c));Q.__super__.onRegister.call(this)};Q.prototype.toRGBA=
function(a){a=a.replace(/^rgba?\(|\s+|\)$/g,"").split(",");return"rgba("+a[0]+","+a[1]+","+a[2]+","+this.swatchOpacityCurr.value+")"};Q.prototype.languageListPopulate=function(){var a,b,c,e;b=null!=(c=this.facade.moduleAPI)?c.getTracks():void 0;if(null!=b){this.list.language.innerHTML="";c=0;for(e=b.length;c<e;c++)a=b[c],a=a.language,a=this.facade.app.retrieveProxy(W.NAME).getLanguageString(a),null!=a&&""!==a&&this.create(null,this.list.language,"option",a);this.toggle.disabled=0===this.list.language.childElementCount;
this.toggle.disabled&&this.create(null,this.list.language,"option","None")}};Q.prototype.cloneObject=function(a){var b,c;b={};for(c in a)b[c]=a[c];return b};Q.prototype.applyCaptioningStyle=function(a,b){var c,e,d,g,f,h;null==a&&(a=!1);null==b&&(b=!1);a?(this.captioningObject.selected=this.cloneObject(this.captioningObject["default"]),this.list.font.value=this.captioningObject["default"].fontFamily,this.list.edge.value=null!=this.captioningObject["default"].edgeType?this.captioningObject["default"].edgeType:
"none",this.list.size.value=this.captioningObject["default"].size,this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor,this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor,this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor):(null!=this.captioningObject.selected.fontFamily&&(this.list.font.value=this.captioningObject.selected.fontFamily),
this.list.edge.value=null!=this.captioningObject.selected.edgeType?this.captioningObject.selected.edgeType:"none",null!=this.captioningObject.selected.size&&(this.list.size.value=this.captioningObject.selected.size),this.picker.color.style.backgroundColor=this.captioningObject.selected.fontColor,null!=this.captioningObject.selected.backgroundColor&&(this.picker.background.style.backgroundColor=this.captioningObject.selected.backgroundColor),null!=this.captioningObject.selected.edgeColor&&(this.picker.edge.style.backgroundColor=
this.captioningObject.selected.edgeColor),null!=this.captioningObject.selected.windowColor&&(this.picker.window.style.backgroundColor=this.captioningObject.selected.windowColor));g="font-family: "+(a?this.captioningObject["default"].fontFamily:this.list.font.value)+" ;";d=(a?this.captioningObject["default"].edgeType+this.captioningObject["default"].edgeColor:this.list.edge.value+" "+this.picker.edge.style.backgroundColor)+";";f="font-size: "+(a?this.captioningObject["default"].size:this.list.size.value)+
" ;";e="color: "+(a?this.captioningObject["default"].fontColor:this.picker.color.style.backgroundColor)+" ;";c="background-color: "+(a?this.captioningObject["default"].backgroundColor:this.picker.background.style.backgroundColor)+" ;";h="background-color: "+(a?this.captioningObject["default"].windowColor:this.picker.window.style.backgroundColor)+" ;";this.captionningStyle.innerHTML=b?this.captioningObject.appliedStyleText=".akamai-caption-text { "+g+f+d+h+" }.akamai-caption-text p { "+e+c+" }":this.captioningObject.appliedStyleText+
".akamai-caption-text-preview { "+g+f+d+h+" }.akamai-caption-text-preview p { "+e+c+" }"};Q.prototype.toggleButtonHandler=function(a){null==a&&(a=!1);a?(this.classList.add("captioning-floater-btnselected",this.toggle.ON),this.classList.remove("captioning-floater-btnselected",this.toggle.OFF)):(this.classList.add("captioning-floater-btnselected",this.toggle.OFF),this.classList.remove("captioning-floater-btnselected",this.toggle.ON));this.sendNotification(v.VISIBILITY_CHANGE,a);this.sendNotification(Xd.UPDATE_SETTINGS,
{captioning:{hidden:!a}})};Q.prototype.listNotificationInterests=function(){return[v.CUE_CHANGE,v.SETTINGS_VISIBILITY_CHANGE,v.TOGGLE_SETTINGS_VISIBILITY,v.SETTINGS_CHANGE]};Q.prototype.handleNotification=function(a){var b,c,e,f;b=a.getName();a=a.getBody();switch(b){case v.CUE_CHANGE:b="";e=0;for(f=a.length;e<f;e++)c=a[e],b+=c.html;this.captionText.innerHTML=b;break;case v.SETTINGS_VISIBILITY_CHANGE:case v.TOGGLE_SETTINGS_VISIBILITY:this.settingsUiVisible&&(this.colorPicker.style.display="none");
(this.settingsUiVisible=!this.settingsUiVisible)&&1===this.list.language.length&&this.languageListPopulate();a=this.settingsUiVisible?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;this.sendNotification(a,"cc-setting-active");break;case v.SETTINGS_CHANGE:this.captioningObject.selected=a,this.applyCaptioningStyle(!1,!0)}};var ja=function(){var a,b=this;this.captions=[];this.head=document.getElementsByTagName("head")[0];a=window.com||{};a.akamai=a.akamai||{};a.akamai.amp=a.akamai.amp||{};a.akamai.amp.plugins=
a.akamai.amp.plugins||{};a.akamai.amp.plugins.subply=a.akamai.amp.plugins.subply||{};a.akamai.amp.plugins.subply.response=function(a){b.parse(a);b.poll()};null==window.com&&(window.com=a);ja.__super__.constructor.call(this,this.constructor.NAME)};f(ja,puremvc.Proxy);ja.NAME="LiveCaptionProxy";ja.prototype.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1E3};ja.prototype.caption=null;ja.prototype.head=null;ja.prototype.script=null;ja.prototype.timeout=null;ja.prototype.getURL=
function(){return this.data.url};ja.prototype.setURL=function(a){return this.data.url=a};ja.prototype.start=function(){this.send()};ja.prototype.poll=function(){var a=this;setTimeout(function(){a.send()},this.data.interval||1E3)};ja.prototype.send=function(){null!=this.script&&this.head.removeChild(this.script);this.script=h.loadScript(this.data.base+this.data.url+".js?nocache\x3d"+Date.now())};ja.prototype.stop=function(){clearTimeout(timeout)};ja.prototype.parse=function(a){var b,c,e,d;if(a.Stream===
this.data.url&&!(null!=this.caption&&this.caption.id>=a.Ticks)){this.caption=new Eb(h.flattenTimecode(a.From),h.flattenTimecode(a.To),a.Ticks);this.caption.text=a.Text;b="";d=a.Text.split("\n");c=0;for(e=d.length;c<e;c++)a=d[c],""!==b&&(b+="\x3cbr /\x3e"),b+="\x3cspan\x3e"+a+"\x3c/span\x3e";this.caption.html="\x3cp\x3e"+b+"\x3c/p\x3e";this.sendNotification(v.CUE_CHANGE,[this.caption]);return this.caption}};var sb=function(a){sb.__super__.constructor.call(this,sb.NAME,a)};f(sb,Vb);sb.NAME="CaptioningNativeMediator";
sb.prototype.video=null;sb.prototype.index=-1;sb.prototype.plugin=null;sb.prototype.onRegister=function(){this.video=this.facade.app.video;this.plugin=this.facade.retrieveProxy(K.NAME)};sb.prototype.listNotificationInterests=function(){return[v.VISIBILITY_CHANGE,v.TRACK_SELECTED,v.TRACKS_LOADED]};sb.prototype.handleNotification=function(a){var b,c,e,d,g,f,h,k;b=a.getBody();switch(a.getName()){case v.TRACKS_LOADED:d=0;for(f=b.length;d<f;d++)if(c=b[d],"captions"===c.kind||"subtitles"===c.kind)for(a=
this.video.addTextTrack(c.kind,c.label,c.srclang),k=c.cues,g=0,h=k.length;g<h;g++)c=k[g],e=new TextTrackCue(c.startTime,c.endTime,c.text),c.id=c.id,a.addCue(e);break;case v.TRACK_SELECTED:-1<this.index&&(this.video.textTracks[this.index].mode="hidden");this.index=this.plugin.getTracks().indexOf(b);this.plugin.getHidden()||(this.video.textTracks[this.index].mode="showing");break;case v.VISIBILITY_CHANGE:this.video.textTracks[this.index].mode=this.plugin.getHidden()?"hidden":"showing"}};var Yd=function(){Yd.__super__.constructor.call(this)};
f(Yd,puremvc.SimpleCommand);Yd.prototype.execute=function(a){var b,c,d,f,g,h;f=a.getBody();b=this.facade.retrieveProxy(K.NAME).getTrack();if(null!=b){a=b.activeCues;d=b.cues;b=!1;g=0;for(h=d.length;g<h;g++)c=d[g],f>=c.startTime&&f<c.endTime?0<=yc.call(a,c)||(a.push(c),b=!0):(c=a.indexOf(c),-1!==c&&(a.splice(c,1),b=!0));!0===b&&this.sendNotification(v.CUE_CHANGE,a)}};var Zd=function(){Zd.__super__.constructor.call(this)};f(Zd,puremvc.SimpleCommand);Zd.prototype.execute=function(a){var b;a=a.getBody();
b=this.facade.retrieveProxy(K.NAME);null!=a.track&&b.setTracks(a.track);null!=a.track&&this.sendNotification(v.ENABLED,!0)};var $d=function(){$d.__super__.constructor.call(this)};f($d,puremvc.SimpleCommand);$d.prototype.execute=function(a){this.facade.retrieveProxy(K.NAME).setHidden(!a.getBody())};var Xd={SETTING_CHANGE:"settingchange",UPDATE_SETTINGS:"updatesettings"},ae=function(){ae.__super__.constructor.call(this)};f(ae,puremvc.SimpleCommand);ae.prototype.execute=function(a){var b,c;this.facade.logger.debug("CaptioningStartedCommand");
a=this.facade.retrieveProxy(K.NAME);b=a.getTrack();null==b&&0<(null!=(c=a.getTracks())?c.length:void 0)&&(b=a.autoSelectTrack());!0===(null!=b?b.isLive:void 0)&&(this.facade.removeCommand(d.TIME_UPDATE),a=this.facade.retrieveProxy(ja.NAME),null==a&&(a=new ja,this.facade.registerProxy(a)),a.setURL(b.src),a.start())};var tb=function(a){tb.__super__.constructor.call(this,a)};f(tb,cb);tb.prototype.componentName="captioning";tb.prototype.captionButton=null;tb.prototype.onRegister=function(){var a;a=new Fa(this.localizationManager.getString(r.MSG_CC),
this.viewComponent,null,"caption",this.onclick.bind(this));this.facade.registerMediator(a);this.captionButton=a.getViewComponent();this.sendNotification(d.ADD_CONTROL,this.captionButton);tb.__super__.onRegister.call(this)};tb.prototype.onclick=function(a){a.stopImmediatePropagation();"embedded"===this.plugin.getTrack().type?this.sendNotification(v.VISIBILITY_CHANGE,this.plugin.getHidden()):a.currentTarget===this.captionButton&&this.sendNotification(v.SETTINGS_VISIBILITY_CHANGE,this.plugin.getHidden());
return!1};tb.prototype.listNotificationInterests=function(){return[v.VISIBILITY_CHANGE,v.ENABLED,v.TRACK_SELECTED]};tb.prototype.handleNotification=function(a){var b,c,e;c=(b=a.getBody())?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;switch(a.getName()){case v.TRACK_SELECTED:e="cc-embedded";c="embedded"===b.type?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;break;case v.VISIBILITY_CHANGE:e="cc-active";break;case v.ENABLED:c=b?d.ADD_CONTROL_STATE:d.REMOVE_CONTROL_STATE,e="cc-enabled"}this.sendNotification(c,
e)};CaptionParsers={"application/ttml+xml":new re,"application/x-subrip":new se,undefined:new re};var v={VISIBILITY_CHANGE:"captioningvisibilitychange",ENABLED:"captioningEnabled",TRACKS_LOADED:"captioningTracksLoaded",TRACK_SELECTED:"captioningTrackSelected",CUE_CHANGE:"captioningCueChange",SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility",TOGGLE_SETTINGS_VISIBILITY:"togglesettingsvisibility",SETTINGS_CHANGE:"captioningsettingschange"},ub=function(a,b){var c,d=this;this.kind=a.kind;this.type=
a.type;this.src=a.src;this.language=a.srclang;this.label=a.label||this.srclang||this.kind;this.cues=a.cues||[];this.styles=a.styles||{};this.activeCues=[];this.isLive=/live-subply/.test(this.type);null==this.src||""===this.src||this.isLive?setTimeout(b,1):c=h.get(this.src,{onload:function(){try{CaptionParsers[d.type].parse(d,c.response)}catch(a){G.error("Could not parse caption track: "+d.src);return}"function"===typeof b&&b()},onerror:function(){G.error("Could not load caption track: "+d.src)}})};
ub.prototype.kind=null;ub.prototype.src=null;ub.prototype.language=null;ub.prototype.cues=null;ub.prototype.label=null;ub.prototype.activeCues=null;ub.prototype.type=null;ub.prototype.styles=null;ub.prototype.isLive=!1;var K=function(a){this.activeCaptions=[];this.providers={};this.tracks=[];K.__super__.constructor.call(this,a)};f(K,N);K.NAME=x.NAME;K.prototype.defaults={};K.prototype.hidden=!0;K.prototype.tracks=null;K.prototype.track=null;K.prototype.activeCaptions=null;K.prototype.captions=null;
K.prototype.loaded=!0;K.prototype.useNative=function(){var a;return null!=this.facade.app.video.textTracks&&3===(null!=(a=window.TextTrackCue)?a.length:void 0)};K.prototype.getTracks=function(){return this.tracks};K.prototype.setTracks=function(a){var b,c,d,f,g,h,k=this;this.tracks=[];this.track=null;b=a.length;d=0;f=function(){d++;d===b&&(k.sendNotification(v.TRACKS_LOADED,k.tracks),k.autoSelectTrack())};g=0;for(h=a.length;g<h;g++)c=a[g],c=new ub(c,f),this.tracks.push(c);return a};K.prototype.getTrack=
function(){return this.track};K.prototype.setTrack=function(a){this.track=a;this.captions=this.track.cues;this.activeCaptions=[];this.sendNotification(v.TRACK_SELECTED,this.track);return a};K.prototype.selectTrackByIndex=function(a){var b;0<=a&&a<this.tracks.length&&(b=this.tracks[a],this.setTrack(b));return b};K.prototype.selectTrackByLanguage=function(a){var b,c,d,f,g;g=this.tracks;d=0;for(f=g.length;d<f;d++)if(b=g[d],b.language===a){c=b;break}null!=c&&this.setTrack(c);return c};K.prototype.getHidden=
function(){return this.hidden};K.prototype.setHidden=function(a){return this.hidden=a};K.prototype.autoSelectTrack=function(){var a,b,c;a=null!=(c=this.facade.app.retrieveProxy(W.NAME))?c.getLanguage():void 0;null!=a&&(a=a.split("-").shift(),b=this.selectTrackByLanguage(a));null==b&&(b=this.tracks[0],this.setTrack(b));return b};var db=function(a,b){db.__super__.constructor.call(this,a,b)};f(db,Z);db.NAME="MediaAnalyticsPlugin";db.prototype.moduleName="mediaanalytics";db.prototype.createModel=function(){this.registerProxy(new Qa(this.config))};
db.prototype.createController=function(){this.registerCommand(d.MEDIA_CHANGE,Vd);this.registerCommand("adsbreakstart",Nd);this.registerCommand("adsbreakend",Od);this.registerCommand("adsloaded",Pd);this.registerCommand("adsstarted",Qd);this.registerCommand("adstimeupdate",Rd);this.registerCommand("adsended",Sd);this.registerCommand("mediaanalytics:setDimensions",Td);this.registerCommand(d.CONTENT_CHANGED,Ud)};db.prototype.createAPI=function(){return new Wd(this)};db.prototype.onRegister=function(){window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=
this.config.config;db.__super__.onRegister.call(this)};db.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE,"adsbreakstart","adsbreakend","adsloaded","adsstarted","adstimeupdate","adsended","mediaanalytics:setDimensions",d.CONTENT_CHANGED]};u.registerPlugin("mediaanalytics","html",db);u.registerPlugin("mediaanalytics","flash",bb);var eb=function(a){var b;eb.__super__.constructor.call(this,a);b=a.retrieveProxy(K.NAME);this.getHidden=b.getHidden.bind(b);this.setHidden=function(b){a.sendNotification(v.VISIBILITY_CHANGE,
!b);return b};this.getTracks=b.getTracks.bind(b);this.getTrack=b.getTrack.bind(b);this.setTrack=b.setTrack.bind(b);this.selectTrackByIndex=b.selectTrackByIndex.bind(b);this.selectTrackByLanguage=b.selectTrackByLanguage.bind(b);this.changeSettings=function(b){a.sendNotification(v.SETTINGS_CHANGE,b);return b}};f(eb,Cb);eb.prototype.getHidden=function(){};eb.prototype.setHidden=function(a){};eb.prototype.getTracks=function(){};eb.prototype.getTrack=function(){};eb.prototype.setTrack=function(a){};eb.prototype.selectTrackByIndex=
function(a){};eb.prototype.selectTrackByLanguage=function(a){};eb.prototype.changeSettings=function(a){};var fb=function(a,b){fb.__super__.constructor.call(this,a,b)};f(fb,Z);fb.NAME="Feature";fb.prototype.featureName=null;fb.prototype.getFeatureName=function(){return this.featureName};fb.prototype.registerFeature=function(){null!=this.getFeatureName()&&this.app.sendNotification("registerfeature",this)};fb.prototype.onRegister=function(){this.registerFeature();fb.__super__.onRegister.call(this)};
fb.prototype.listNotificationPublications=function(){return fb.__super__.listNotificationPublications.call(this).concat(["registerfeature"])};var tc=function(){return tc.__super__.constructor.apply(this,arguments)};f(tc,J);tc.NAME="BrandingWrapper";tc.prototype.createFlashVars=function(a){null!=this.config.id&&(a.branding=this.config.id);return a};tc.prototype.createXML=function(a){var b,c,d,f,g,h,k,l;if(null!=(null!=(b=this.config)?b.logo:void 0)){b="background-image: url('"+this.config.logo+"');";
f=a.getElementsByTagName("element");k=0;for(l=f.length;k<l;k++)d=f[k],g=d.getAttribute("id"),"logoOverlay"===g?h=d:"controls"===g&&(c=d);null==h?(h=a.createElement("element"),h.setAttribute("id","logoOverlay"),h.setAttribute("style","width: 150px; height: 53px; right: 15px; top: 15px; opacity: 0.5; "+b),c.appendChild(h)):(c=h.getAttribute("style"),c=-1!==c.indexOf("background-image:")?c.replace(/background-image: [A-Za-z0-9_\-\.\/\\;\(\)"']+/,b):b+c,h.setAttribute("style",c))}return a};var gb=function(){gb.__super__.constructor.call(this)};
f(gb,ba);gb.prototype.componentName="branding";gb.prototype.logo=null;gb.prototype.text=null;gb.prototype.container=null;gb.prototype.onRegister=function(){this.container=this.create("branding-container");this.logo=this.create(["branding-image","hidden"],this.container,"img");this.text=this.create("branding-text",this.container);gb.__super__.onRegister.call(this)};gb.prototype.listNotificationInterests=function(){return[d.READY]};gb.prototype.handleNotification=function(a){switch(a.getName()){case d.READY:a=
a.getBody().branding;if(null==a)break;null!=a.logo?(this.logo.src=a.logo,this.classList.remove("hidden",this.logo)):this.classList.add("hidden",this.logo);a=this.config.getDomain();null!=a&&0!==a.indexOf("http")&&(a=location.protocol+"//"+a,this.text.innerHTML='\x3cspan\x3eView all \x3ca href\x3d"'+a+'" target\x3d"'+this.config.getTarget()+'"\x3e'+this.config.getDomain()+"\x3c/a\x3e videos.")}};var xa=function(a){xa.__super__.constructor.call(this,a)};f(xa,x);xa.NAME=x.NAME;xa.prototype.defaults=
{id:null,title:null,link:null,logo:null,target:null};xa.prototype.getID=function(){return this.data.id};xa.prototype.setID=function(a){return this.data.id=a};xa.prototype.getTarget=function(){return this.data.target};xa.prototype.setTarget=function(a){return this.data.target=a};xa.prototype.getTitle=function(){return this.data.title};xa.prototype.setTitle=function(a){return this.data.title=a};xa.prototype.getLink=function(){return this.data.link};xa.prototype.setLink=function(a){return this.data.link=
a};xa.prototype.getLogo=function(){return this.data.logo};xa.prototype.setLogo=function(a){return this.data.logo=a};var fa={LOAD_FEED:"loadFeed",FEED_CHANGED:"feedChanged",FEED_LOADED:"feedLoaded"},Ba=function(a,b){Ba.__super__.constructor.call(this,a,b)};f(Ba,fb);Ba.NAME="CaptioningPlugin";Ba.prototype.featureName="captioning";Ba.prototype.moduleName="captioning";Ba.prototype.createController=function(){this.registerCommand(d.CHANGE_MEDIA,Zd);this.registerCommand(d.STARTED,ae);this.registerCommand(d.TIME_UPDATE,
Yd);this.registerCommand(v.VISIBILITY_CHANGE,$d)};Ba.prototype.createModel=function(){this.registerProxy(new K(this.config))};Ba.prototype.createView=function(){var a;a=new tb;this.registerMediator(a);this.registerMediator(new Q(a.viewComponent))};Ba.prototype.createAPI=function(){return new eb(this)};Ba.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA,d.STARTED,d.TIME_UPDATE,v.TOGGLE_SETTINGS_VISIBILITY]};Ba.prototype.listNotificationPublications=function(){var a,b;return Ba.__super__.listNotificationPublications.call(this).concat(function(){var c;
c=[];for(a in v)b=v[a],b!==v.TOGGLE_SETTINGS_VISIBILITY&&c.push(b);return c}()).concat([d.ADD_CONTROL,d.REMOVE_CONTROL,Xd.UPDATE_SETTINGS,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE])};Ba.prototype.listNotificationEvents=function(){return[v.VISIBILITY_CHANGE,v.ENABLED]};u.registerPlugin("captioning","html",Ba);var qa=function(a){qa.__super__.constructor.call(this,a);this.helper=new Pb};f(qa,x);qa.NAME=x.NAME;qa.prototype.defaults={url:null,data:null};qa.prototype.feed=null;qa.prototype.helper=null;
qa.prototype.setURL=function(a){var b=this;this.data.url=a;this.helper.getFeed(a,function(a){b.sendNotification(fa.CHANGE_FEED,a)},function(b){G.error("[AMP Feed Load Error]",a,b)});return a};qa.prototype.getURL=function(){return this.data.url};qa.prototype.setFeedData=function(a){this.data.data=a;this.feed=this.helper.createFeed(a);this.sendNotification(fa.FEED_CHANGED,this.feed);this.sendNotification(d.DISPATCH_EVENT,new U("loaded",a));return a};qa.prototype.getFeedData=function(){return this.data.data};
qa.prototype.invoke=function(){null!=this.data.url&&""!==this.data.url?this.sendNotification(fa.LOAD_FEED,this.data.url):null!=this.data.data&&this.sendNotification(fa.CHANGE_FEED,this.data.data)};var be=function(){be.__super__.constructor.call(this)};f(be,puremvc.SimpleCommand);be.prototype.execute=function(a){this.facade.logger.debug("LoadFeedCommand",a.getBody());this.facade.retrieveProxy(qa.NAME).setURL(a.getBody())};var ce=function(){ce.__super__.constructor.call(this)};f(ce,puremvc.SimpleCommand);
ce.prototype.execute=function(a){this.facade.logger.debug("ChangeFeedCommand",a.getBody());this.facade.retrieveProxy(qa.NAME).setFeedData(a.getBody())};var de=function(){de.__super__.constructor.call(this)};f(de,puremvc.SimpleCommand);de.prototype.execute=function(a){this.facade.logger.debug("FeedChangedCommand",a.getBody());this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,H.READY);a=a.getBody().item[0];this.facade.app.sendNotification(d.SET_MEDIA,a)};var ee=function(){ee.__super__.constructor.call(this)};
f(ee,puremvc.SimpleCommand);ee.prototype.execute=function(a){this.facade.logger.debug("FeedInitializedCommand");this.facade.retrieveProxy(qa.NAME).invoke()};var dc=function(a){var b;dc.__super__.constructor.call(this,a);b=a.retrieveProxy(qa.NAME);this.setURL=function(b){a.sendNotification(fa.LOAD_FEED,b);return b};this.getURL=b.getURL.bind(b);this.setData=function(b){a.sendNotification(fa.CHANGE_FEED,b);return b};this.getData=b.getFeedData.bind(b)};f(dc,Cb);dc.prototype.setURL=function(a){};dc.prototype.getURL=
function(){};dc.prototype.setData=function(a){};dc.prototype.getData=function(){};var ra=function(a,b){null==b&&(b={});ra.__super__.constructor.call(this,a,b);null!=b.url&&(this.url=b.url);null!=b.data&&(this.data=b.data);this.player.load=function(){}};f(ra,J);ra.NAME="FeedWrapper";ra.prototype.url=null;ra.prototype.data=null;ra.prototype.updateData=!0;ra.prototype.createFlashVars=function(a){null!=this.url&&""!==this.url&&(a.data_feed_url=escape(this.url))};ra.prototype.listNotificationInterests=
function(){return ra.__super__.listNotificationInterests.apply(this,arguments).concat([q.READY,q.FEED_LOADED])};ra.prototype.handleNotification=function(a){var b,c,d=this;ra.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case q.FEED_LOADED:!1===this.updateData?this.updateData=!0:this.data=JSON.parse(a);c="loaded";a=this.data;this.sendNotification(fa.FEED_CHANGED,this.data);break;case q.READY:null!=this.data?setTimeout(function(){d.setData(d.data)},25):null!=this.url&&
""!==this.url&&this.sendNotification(fa.LOAD_FEED,this.url)}null!=c&&this.dispatchEvent(new U(c,a))};ra.prototype.setURL=function(a){null!=a&&""!==a&&(this.url=a,this.player.video.playFile(this.url,this.player.getAutoplay()),this.sendNotification(fa.LOAD_FEED,this.url));return a};ra.prototype.getURL=function(){return this.url};ra.prototype.setData=function(a){this.data=a;this.updateData=!1;this.player.video.playFile(this.data,this.player.getAutoplay());return a};ra.prototype.getData=function(){return this.data};
var Ha=function(a){Ha.__super__.constructor.call(this,a)};f(Ha,x);Ha.NAME=x.NAME;Ha.prototype.defaults={url:null};Ha.prototype.hidden=!0;Ha.prototype.getURL=function(){return this.data.url};Ha.prototype.setURL=function(a){return this.data.url=a};Ha.prototype.getHidden=function(){return this.hidden};Ha.prototype.setHidden=function(a){return this.hidden=a};Ha.prototype.invoke=function(){var a,b=this;if(null!=this.data.url)return a=h.get(this.data.url,{onload:function(){null!=a.response&&b.sendNotification("bitratesUpdate",
a.response)},onerror:function(a){return b.sendNotification("bitratesUpdate",null)}})};var sa=function(){sa.__super__.constructor.call(this)};f(sa,cb);sa.prototype.componentName="stats";sa.prototype.statsText=null;sa.prototype.statsButton=null;sa.prototype.bitrateText=null;sa.prototype.bitrateArr=null;sa.prototype.onRegister=function(){var a=this;this.sendNotification(d.ADD_CONTROL_STATE,"stats-enabled");this.classList.add("hidden");this.statsFormat=this.create("stats-text");this.statsBitRate=this.create("stats-text");
this.statsPlayBack=this.create("stats-text");this.statsAnalytics=this.create("stats-text");this.statsButton=this.create("stats-button",!1);this.statsButton.onclick=function(b){b.stopImmediatePropagation();a.sendNotification("statsvisibilitychange",!a.plugin.getHidden());return!1};this.sendNotification(d.ADD_CONTROL,this.statsButton);sa.__super__.onRegister.call(this)};sa.prototype.listNotificationInterests=function(){return["statsvisibilitychange","bitratesUpdate"]};sa.prototype.handleNotification=
function(a){var b;b=a.getName();a=a.getBody();switch(b){case "statsvisibilitychange":this.plugin.getHidden()?this.classList.add("hidden"):(this.classList.remove("hidden"),this.statsBitRate.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3e\x3c/p\x3e\x3cp\x3eLoading...\x3c/p\x3e",this.renderStats());break;case "bitratesUpdate":null!=a?this.checkContentType(a):this.statsBitRate.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+
"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3e\x3c/p\x3e\x3cp\x3eNot Available\x3c/p\x3e"}};sa.prototype.renderStats=function(){var a,b,c,d,f,g,k,l,m,n;try{k=this.facade.app,b=k.getAPI(),d=void 0===b.getMedia()?"Not Available":b.getMedia().type,l=""===b.getSrc()||null===b.getSrc()?"Not Available":b.getSrc(),c=h.getDevice(),null==c&&(c=""),g=""!==this.facade.app.getConfig().mode&&null!==this.facade.app.getConfig().mode&&-1!==this.facade.app.getConfig().mode.indexOf("html")?this.facade.app.parent.version+
", HTML5 Video: "+c:"Not Available",f=null!=(m=this.facade.app.retrieveProxy(L.NAME).getActivePlaybackCore())?null!=(n=m.playbackCoreName)?n.indexOf("dash"):void 0:void 0,-1<f&&(g+=", dash.js"),a=""===this.facade.app.getAPI().getConfig().mediaanalytics.config||null===this.facade.app.getAPI().getConfig().mediaanalytics.config?"Not Available":this.facade.app.getAPI().getConfig().mediaanalytics.config,this.statsFormat.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eStream\x3c/b\x3e\x3c/p\x3e\x3cp\x3eFormat: "+
d+"\x3c/p\x3e\x3cp\x3eURL: "+l+"\x3c/p\x3e",this.statsPlayBack.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3ePlayback\x3c/b\x3e\x3c/p\x3e"+g,this.statsAnalytics.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAnalytics\x3c/b\x3e\x3c/p\x3e"+a}catch(q){this.facade.logger.error("[AMP Stats Render Error]:",q)}};sa.prototype.checkContentType=function(a){var b,c,d,f=this;this.bitrateArr=[];if("object"===typeof a&&-1!==this.facade.app.getAPI().getMedia().type.indexOf("dash"))h.get(a.URL,
{onload:function(a){var b,c,d,e;a=X.parse(a.data.responseText).querySelectorAll("AdaptationSet[mimeType*\x3d'video']")[0].querySelectorAll("Representation");d=0;for(e=a.length;d<e;d++)c=a[d],b=(parseInt(c.getAttribute("bandwidth"))/1E3).toFixed(0),c=c.getAttribute("width")+"x"+c.getAttribute("height"),f.bitrateArr.push({bitrate:b,res:c});return f.constructBitrateText(f.bitrateArr)},onerror:function(a){return f.facade.logger.error("[AMP Stats ERROR]",a)}});else{d=a.split("#");b=0;for(c=d.length;b<
c;b++)a=d[b],-1!==a.indexOf("BANDWIDTH")&&-1!==a.indexOf("RESOLUTION")&&this.bitrateArr.push(this.parseBitrate(a));this.constructBitrateText(this.bitrateArr)}};sa.prototype.constructBitrateText=function(a){var b,c,d,f;this.bitrateArr=a;this.bitrateText="";this.bitrateArr.sort(function(a,b){var c,d;c=parseInt(a.bitrate);d=parseInt(b.bitrate);return c<d?-1:c>d?1:0});f=this.bitrateArr;a=c=0;for(d=f.length;c<d;a=++c)b=f[a],this.bitrateText+="\x3cp\x3e"+(a+1)+". "+b.bitrate+" kbps "+b.res+"\x3c/p\x3e";
""===this.bitrateText&&(this.bitrateText="\x3cp\x3eNot Available\x3c/p\x3e");this.statsBitRate.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3e\x3c/p\x3e"+this.bitrateText};sa.prototype.parseBitrate=function(a){var b,c,d;c=a.indexOf("BANDWIDTH");b=a.indexOf(",",c+10);b=a.slice(c+10,b);d=a.indexOf("RESOLUTION");c=a.indexOf(",",d+10);if(20<c-d||-1===c)c=a.indexOf("x",d+10)+4;a=a.slice(d+11,c);return{bitrate:parseInt(b)/1E3,res:a}};var fe=
function(){fe.__super__.constructor.call(this)};f(fe,puremvc.SimpleCommand);fe.prototype.execute=function(a){var b;this.facade.logger.debug("StatsVisibilityChangeCommand");b=this.facade.retrieveProxy(Ha.NAME);b.setHidden(a.getBody());b.setURL(""+this.facade.app.parent.getSrc());!1===a.getBody()&&b.invoke()};var hb=function(a,b){hb.__super__.constructor.call(this,a,b)};f(hb,Z);hb.NAME="BrandingPlugin";hb.prototype.moduleName="branding";hb.prototype.createModel=function(){this.registerProxy(new xa(this.config))};
hb.prototype.createView=function(){this.registerMediator(new gb)};hb.prototype.onRegister=function(){null!=this.config.id&&this.sendNotification(d.ADD_APPLICATION_STATE,"branding-"+this.config.id);hb.__super__.onRegister.call(this)};hb.prototype.listNotificationInterests=function(){return[d.READY]};u.registerPlugin("branding","html",hb);u.registerPlugin("branding","flash",tc);u.registerPlugin("branding","external",hb);var Vc=function(a){var b;Vc.__super__.constructor.call(this,a);b=a.retrieveProxy(Ha.NAME);
this.getHidden=b.getHidden.bind(b);this.setHidden=function(b){a.sendNotification("statsvisibilitychange",b);return b}};f(Vc,Cb);Vc.prototype.getHidden=function(){};Vc.prototype.setHidden=function(a){};var ka=function(a){ka.__super__.constructor.call(this,a.types);this.buffer=a.buffer};f(ka,Ya);ka.prototype.initialized=!0;ka.prototype.playbackCoreName="dash";ka.prototype.context=null;ka.prototype.player=null;ka.prototype.buffer=null;ka.prototype.isDVR=!1;ka.prototype.resumecomplete=function(){this.applyHandlers(!0);
this.play()};ka.prototype.load=function(){var a,b=this;this.getVideo().addEventListener("canplay",this.resumeHandlers.canplay);a=this.facade.getVideo();this.context=new Dash.di.DashContext;this.player=new MediaPlayer(this.context);null!=this.buffer&&(MediaPlayer.dependencies.BufferExtensions.DEFAULT_MIN_BUFFER_TIME=this.buffer);this.player.startup();this.player.addEventListener("error",this.onError.bind(this));this.player.debug.setLogToBrowserConsole(this.facade.logger.enabled);this.player.attachView(a);
this.player.setAutoPlay(!1);this.player.attachSource(this.getSrc());this.isDVR="dvr"===this.facade.retrieveProxy(m.NAME).getTemporalType();!0===this.isDVR&&a.addEventListener("timeupdate",function(a){var e,f;try{f=b.player.time(),e=b.player.duration(),b.sendNotification(d.DISPLAY_TIME,{value:f/e,currentTime:f,duration:e})}catch(g){b.facade.logger.error(g)}})};ka.prototype.seek=function(a){ka.__super__.seek.call(this,!0===this.isDVR?this.player.getDVRSeekOffset(a):a)};ka.prototype.getDuration=function(){return!0===
this.isDVR?this.player.duration():ka.__super__.getDuration.call(this)};ka.prototype.getStats=function(){return{}};ka.prototype.onError=function(a){this.facade.logger.error("DASH JS Playback Error:",a)};var Ia=function(a,b){Ia.__super__.constructor.call(this,a,b)};f(Ia,Z);Ia.NAME="FeedPlugin";Ia.prototype.moduleName="feed";Ia.prototype.createModel=function(){this.registerProxy(new qa(this.config))};Ia.prototype.createController=function(){Ia.__super__.createController.call(this);this.registerCommand(d.READY,
ee);this.registerCommand(fa.LOAD_FEED,be);this.registerCommand(fa.CHANGE_FEED,ce);this.registerCommand(fa.FEED_CHANGED,de)};Ia.prototype.createAPI=function(){return new dc(this)};Ia.prototype.listNotificationInterests=function(){return Ia.__super__.listNotificationInterests.call(this).concat([d.READY])};Ia.prototype.listNotificationPublications=function(){var a,b;return Ia.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in fa)b=fa[a],c.push(b);return c}())};u.registerPlugin("feed",
"html",Ia);u.registerPlugin("feed","flash",ra);var ge=function(){ge.__super__.constructor.call(this)};f(ge,puremvc.SimpleCommand);ge.prototype.execute=function(a){var b,c,e,f,g=this;e=a.getBody();this.facade.retrieveProxy(l.NAME);a=this.facade.getVideo();null!=a&&a.webkitSupportsFullscreen&&(c=this.facade.retrieveProxy(t.NAME),c.setDisplayState(e),b={},f=this.facade.viewComponent,null!=f.requestFullscreen?(b.enter=function(){return f.requestFullscreen()},b.exit=function(){return document.cancelFullscreen()},
b.event="onfullscreenchange",b.element="fullscreenElement"):null!=f.webkitRequestFullScreen?(b.enter=function(){return f.webkitRequestFullScreen()},b.exit=function(){return document.webkitCancelFullScreen()},b.event="onwebkitfullscreenchange",b.element="webkitFullscreenElement"):null!=f.mozRequestFullScreen?(b.enter=function(){return f.mozRequestFullscreen()},b.exit=function(){return document.mozCancelFullScreen()},b.event="onmozfullscreenchange",b.element="mozFullscreenElement"):null!=f.msRequestFullScreen&&
(b.enter=function(){return f.msRequestFullscreen()},b.exit=function(){return document.msCancelFullScreen()},b.event="onmozfullscreenchange",b.element="mozFullscreenElement"),e===ha.FULL_SCREEN?(b.enter(),null!=b.event&&(a[b.event]=function(a){if(null==document[b.element])return g.sendNotification(d.CHANGE_DISPLAY_STATE,ha.NORMAL)})):e===ha.NORMAL&&(b.exit(),a[b.event]=null),this.facade.dispatchEvent(new U("fullscreenchange",e===ha.FULL_SCREEN)))};var uc=function(a){uc.__super__.constructor.call(this,
a)};f(uc,N);uc.NAME=x.NAME;uc.prototype.defaults={plugin:null,types:["application/dash+xml"],buffer:null};uc.prototype.initialize=function(){var a,b;window.MediaSource=window.MediaSource||window.WebKitMediaSource;null!=window.MediaSource&&(this.sendNotification(d.INITIALIZED),a=new ka(this.getConfigurationData()),b=this.facade.app.retrieveProxy(L.NAME),b.registerPlaybackCore(a))};var xe=[h.mimeTypes.m3u8,h.mimeTypes.mp4,h.mimeTypes.mpd,h.mimeTypes.ism,h.mimeTypes.webm,h.mimeTypes.mp3],ib=function(a,
b){ib.__super__.constructor.call(this,a,b)};f(ib,Z);ib.NAME="StatsPlugin";ib.prototype.moduleName="stats";ib.prototype.createModel=function(){this.registerProxy(new Ha(this.config))};ib.prototype.createController=function(){this.registerCommand("statsvisibilitychange",fe)};ib.prototype.createView=function(){this.registerMediator(new sa)};ib.prototype.createAPI=function(){return new Vc(this)};ib.prototype.listNotificationPublications=function(){return ib.__super__.listNotificationPublications.call(this).concat([d.ADD_CONTROL,
d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,"statsvisibilitychange"])};u.registerPlugin("stats","html",ib);var Wc=function(){Wc.__super__.constructor.call(this)};f(Wc,aa);Wc.prototype.execute=function(a){this.config.launch()};var Xc=function(){Xc.__super__.constructor.call(this)};f(Xc,aa);Xc.prototype.execute=function(a){this.config.setFeed(a.getBody())};var he=function(){he.__super__.constructor.call(this)};f(he,aa);he.prototype.execute=function(a){this.config.send({type:"captioning.visibilitychange",
details:{visibility:a.getBody()}})};var ie=function(){ie.__super__.constructor.call(this)};f(ie,aa);ie.prototype.execute=function(a){this.config.send({type:"captioning.settingschange",details:a.getBody()})};var je=function(){je.__super__.constructor.call(this)};f(je,aa);je.prototype.execute=function(a){this.facade.logger.debug("ChromeCastReceiverReadyCommand");this.facade.app.getViewComponent().hidden=!1;this.plugin.ready()};var vb=function(a){vb.__super__.constructor.call(this,a)};f(vb,Ya);vb.prototype.initialized=
!0;vb.prototype.player=null;vb.prototype.host=null;vb.prototype.protocol=null;vb.prototype.playbackCoreName="chromecast";vb.prototype.unload=function(){null!=this.player&&(this.player.unload(),this.player=null)};vb.prototype.load=function(){var a,b,c=this;this.data.loading=!0;this.playWhenLoaded=!1;this.unload();a=this.facade.getVideo();a.addEventListener("canplay",this.resumeHandlers.canplay);null!=a.src&&(a.src=null);!0===G.enabled&&cast.player.api.setLoggerLevel(cast.player.api.LoggerLevel.DEBUG);
this.host=new cast.player.api.Host({mediaElement:a,url:this.getSrc()});this.host.onError=function(a){c.facade.logger.error("Google Media Player Fatal Error - "+a);c.player.unload()};a=this.facade.retrieveProxy(m.NAME).getType();b=h.mimeTypes;switch(a){case b.m3u8:this.protocol=cast.player.api.CreateHlsStreamingProtocol(this.host);break;case b.mpd:this.protocol=cast.player.api.CreateDashStreamingProtocol(this.host);break;case b.ism:this.protocol=cast.player.api.CreateSmoothStreamingProtocol(this.host)}null!=
this.protocol?(this.player=new cast.player.api.Player(this.host),this.player.load(this.protocol,0),this.applyHandlers(!0)):this.facade.logger.error("Google Media Player Error: Could not create protocol")};var F=function(a,b){this.proxy=a;this.callbackMap={};this.handlerMap={};this.state=cast.receiver.media.PlayerState.IDLE;this.registerPlayer(b)};F.prototype.proxy=null;F.prototype.player=null;F.prototype.callbackMap=null;F.prototype.handlerMap=null;F.prototype.state=null;F.prototype.registerPlayer=
function(a){this.player=a;this.registerHandler("playing",this.setState.bind(this,cast.receiver.media.PlayerState.PLAYING));this.registerHandler("pause",this.setState.bind(this,cast.receiver.media.PlayerState.PAUSED));this.registerHandler("waiting",this.setState.bind(this,cast.receiver.media.PlayerState.BUFFERING))};F.prototype.registerHandler=function(a,b){this.handlerMap[a]=b;this.player.addEventListener(a,b)};F.prototype.removeHandler=function(a){this.player.removeEventListener(a,this.handlerMap[a]);
this.handlerMap[a]=null;delete this.handlerMap[a]};F.prototype.registerCallback=function(a,b){this.callbackMap[a]=b;this.player.addEventListener(a,b)};F.prototype.unregisterCallback=function(a){this.player.removeEventListener(a,this.callbackMap[a]);this.callbackMap[a]=null;delete this.callbackMap[a]};F.prototype.setState=function(a){a!==this.state&&(this.state=a,this.proxy.mediaManager.broadcastStatus(!0))};F.prototype.registerErrorCallback=function(a){this.registerCallback("error",a)};F.prototype.registerEndedCallback=
function(a){this.registerCallback("ended",a)};F.prototype.registerLoadCallback=function(a){this.registerCallback("loadedmetadata",a)};F.prototype.unregisterErrorCallback=function(){this.unregisterCallback("error")};F.prototype.unregisterEndedCallback=function(){this.unregisterCallback("ended")};F.prototype.unregisterLoadCallback=function(){this.unregisterCallback("loadedmetadata")};F.prototype.load=function(a,b,c,d){var f,g;g=this.proxy.mediaManager.getMediaInformation();d=g.customData;if(null!=(null!=
d?d.feed:void 0)&&null!=this.player.feed)f=d.feed,this.registerHandler("mediachange",this.mediachangeHandler.bind(this)),null!=f.data?this.player.feed.setData(f.data):null!=f.url&&this.player.feed.setURL(f.url);else{a={src:a,type:g.contentType,title:g.metadata.title,poster:g.metadata.image,description:g.metadata.subtitle,pubDate:new Date(g.releaseDate),metadata:d,duration:g.duration,startTime:c||0,autoplay:b};if(null!=(null!=d?d.media:void 0))for(f in c=d.media,c)b=c[f],null==a[f]&&(a[f]=b);this.player.setMedia(a);
this.setState(cast.receiver.media.PlayerState.BUFFERING)}};F.prototype.mediachangeHandler=function(a){var b;this.removeHandler("mediachange");a=this.player.getMedia();b=new cast.receiver.media.MediaInformation;b.contentId=a.src;b.contentType=a.type;b.customData=a.metadata;b.duration=a.duration;b.metadata={title:a.title,subtitle:a.description,image:a.poster,releaseDate:a.pubDate.toISOString()};this.proxy.mediaManager.setMediaInformation(b,!0)};F.prototype.reset=function(){};F.prototype.play=function(){this.player.play()};
F.prototype.seek=function(a,b){this.player.setCurrentTime(a);switch(b){case cast.receiver.media.SeekResumeState.PLAYBACK_PAUSE:this.player.pause();break;case cast.receiver.media.SeekResumeState.PLAYBACK_START:this.player.play()}};F.prototype.pause=function(){this.player.pause()};F.prototype.getState=function(){return this.state};F.prototype.getCurrentTimeSec=function(){return this.player.getCurrentTime()};F.prototype.getDurationSec=function(){return this.player.getDuration()};F.prototype.getVolume=
function(){var a;a=cast.receiver.media.Volume;a.level=this.player.getVolume();a.muted=this.player.getMuted();return a};F.prototype.setVolume=function(a){null!=a.level&&this.player.setVolume(a.level);!0===a.muted?this.player.setMuted(!0):!0===this.player.getMuted()&&this.player.setMuted(!1)};F.prototype.editTracksInfo=function(a){};var Yc=function(){Yc.__super__.constructor.call(this)};f(Yc,cb);Yc.prototype.onRegister=function(){this.sendNotification(d.ADD_APPLICATION_STATE,"chromecast-receiver");
Yc.__super__.onRegister.call(this)};var jb=function(){jb.__super__.constructor.call(this)};f(jb,cb);jb.prototype.componentName="chromecast";jb.prototype.controls=null;jb.prototype.onRegister=function(){this.controls=new Ja;jb.__super__.onRegister.call(this)};jb.prototype.registerOverlay=function(){};jb.prototype.listNotificationInterests=function(){return[d.PLAYBACK_TARGET_CHANGE,d.CHANGE_PLAY_STATE]};jb.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.PLAYBACK_TARGET_CHANGE:b=
a.target;"chromecast"===b?this.facade.registerMediator(this.controls):this.facade.removeMediator(this.controls.getMediatorName());break;case d.CHANGE_PLAY_STATE:this.controls.setState(a)}};var wb=function(){wb.__super__.constructor.call(this)};f(wb,jb);wb.prototype.chromeCastButton=null;wb.prototype.onRegister=function(){this.chromeCastButton=new vc;this.facade.registerMediator(this.chromeCastButton);wb.__super__.onRegister.call(this)};wb.prototype.listNotificationInterests=function(){return wb.__super__.listNotificationInterests.call(this).concat([kb.AVAILABILITY_CHANGE])};
wb.prototype.handleNotification=function(a){var b;wb.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case kb.AVAILABILITY_CHANGE:!0===a?(this.sendNotification(d.ADD_CONTROL_STATE,"chromecast"),this.facade.app.sendNotification(d.ADD_CONTROL,this.chromeCastButton.getViewComponent())):(this.sendNotification(d.REMOVE_CONTROL_STATE,"chromecast"),this.facade.app.sendNotification(d.REMOVE_CONTROL,this.chromeCastButton.getViewComponent()))}};var ke=function(){ke.__super__.constructor.call(this)};
f(ke,aa);ke.prototype.execute=function(a){this.facade.logger.debug("ChromeCastBreakStartCommand");a=this.facade.app.retrieveProxy(L.NAME).getActivePlaybackCore();"chromecast"===a.getPlaybackCoreName()&&(a.unload(),a.src=null)};var A=function(a){this.messageBus=a.messageBus||"urn:x-cast:com.akamai.amp.cast";A.__super__.constructor.call(this,a.receiver)};f(A,N);A.NAME=x.NAME;A.prototype.defaults={plugin:null,mpl:null,types:["application/x-mpegURL","application/dash+xml","application/vnd.ms-sstr+xml"]};
A.prototype.messageBus=null;A.prototype.castReceiverManager=null;A.prototype.castMessageBus=null;A.prototype.castChannel=null;A.prototype.startTime=0;A.prototype.currentTime=0;A.prototype.boundHandler=null;A.prototype.amp=null;A.prototype.mediaManager=null;A.prototype.mediaManagerHandlers=null;A.prototype.playbackCore=null;A.prototype.load=function(a){var b,c=this;b=this.getScript();null==("undefined"!==typeof cast&&null!==cast?cast.receiver:void 0)?null!=b&&""!==b?h.loadAMPScript(b,function(){c.loadMPL(a)}):
this.loadComplete(!1,a):this.loadMPL(a)};A.prototype.loadMPL=function(a){var b,c=this;b=this.getConfigurationData().mpl;null==("undefined"!==typeof cast&&null!==cast?cast.player:void 0)?null!=b&&""!==b?h.loadAMPScript(b,function(){c.loadComplete(!0,a)}):this.loadComplete(!1,a):this.loadComplete(!0,a)};A.prototype.loadComplete=function(a,b){this.loaded=a;"function"===typeof b&&b(a)};A.prototype.getLoaded=function(){return this.loaded||null!=("undefined"!==typeof cast&&null!==cast?cast.receiver:void 0)&&
null!=("undefined"!==typeof cast&&null!==cast?cast.player:void 0)};A.prototype.initialize=function(){var a;this.sendNotification(d.INITIALIZED);a=new vb(this.getConfigurationData().types);this.facade.app.retrieveProxy(L.NAME).registerPlaybackCore(a)};A.prototype.ready=function(){this.castReceiverManager=cast.receiver.CastReceiverManager.getInstance();this.castReceiverManager.onReady=this.castReceiverManager.onSystemVolumeChanged=this.castReceiverManager.onVisibilityChanged=this.logEvent.bind(this);
this.castReceiverManager.onSenderConnected=this.onSenderConnected.bind(this);this.castReceiverManager.onSenderDisconnected=this.onSenderDisconnected.bind(this);this.amp=this.facade.app.parent;this.mediaManager=new cast.receiver.MediaManager(this.createPlayer(this.amp));this.castMessageBus=this.castReceiverManager.getCastMessageBus(this.messageBus,cast.receiver.CastMessageBus.MessageType.JSON);this.castReceiverManager.start()};A.prototype.createPlayer=function(a){return new F(this,a)};A.prototype.logEvent=
function(a,b){null==a?a=b.type||"":null==b&&(b=a.data,a=b.type);this.facade.logger.log("[CHROMECAST] ",a,b)};A.prototype.onSenderConnected=function(a){this.logEvent("senderconnected",a);a=this.castReceiverManager.getSenders()[0];this.castChannel=this.castMessageBus.getCastChannel(a);this.castChannel.onMessage=this.onMessage.bind(this);this.castChannel.onClose=this.onClose.bind(this);this.amp.addEventListener("playstatechange",this.eventHandler.bind(this));this.amp.addEventListener("timeupdate",this.timeupdateHandler.bind(this));
this.amp.addEventListener("durationchange",this.durationchangeHandler.bind(this));this.amp.addEventListener("seeking",this.eventHandler.bind(this));this.amp.addEventListener("seeked",this.eventHandler.bind(this));null!=this.amp.ads&&(this.amp.ads.addEventListener("breakstart",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("breakend",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("started",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("ended",
this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("companion",this.dispatchEvent.bind(this,"ads")));setTimeout(this.sendNotification.bind(this,d.DISPATCH_EVENT,new U("senderconnected")),0)};A.prototype.onSenderDisconnected=function(a){this.logEvent("sender disconnected",a);0===this.castReceiverManager.getSenders().length&&a.reason===cast.receiver.system.DisconnectReason.REQUESTED_BY_SENDER&&window.close()};A.prototype.onMessage=function(a){var b,c;this.logEvent("message from sender",
a);b=a.message;c=b.type;b=b.details;"string"===typeof b&&(b=JSON.parse(b));switch(c){case "captioning.visibilitychange":c=this.amp.captioning.getTrack().type;if(void 0!==c&&-1!==c.indexOf("608")){try{this.playbackCore.player.enableCaptions(b.visibility,cast.player.api.CaptionsType.CEA608)}catch(e){this.facade.logger.debug("caption Error 608:",e)}return}this.amp.captioning.setHidden(b.visibility);break;case "captioning.settingschange":this.amp.captioning.changeSettings(b);break;case "stats.visibilitychange":this.amp.stats.setHidden(!b.visibility)}this.sendNotification(d.DISPATCH_EVENT,
a)};A.prototype.onClose=function(a){this.logEvent("message channel closed",a)};A.prototype.timeupdateHandler=function(a){var b;b=Math.floor(this.amp.getCurrentTime());this.currentTime!==b&&(this.currentTime=b,this.send({type:a.type,details:{currentTime:b}}))};A.prototype.durationchangeHandler=function(a){this.send({type:a.type,details:{duration:this.amp.getDuration()}})};A.prototype.eventHandler=function(a){var b;b={type:a.type};null!=a.details&&(b.details=a.details);this.send(b)};A.prototype.dispatchEvent=
function(a,b){this.send({type:"dispatchevent",details:{target:a,event:b}});this.send({type:""+a+"."+b.type,details:b.details})};A.prototype.send=function(a){this.castChannel.send(a)};var Zc=function(){Zc.__super__.constructor.call(this)};f(Zc,aa);Zc.prototype.execute=function(a){this.facade.logger.debug("ChromeCastSeekCommand");this.plugin.setCurrentTime(a.getBody())};var vc=function(){vc.__super__.constructor.call(this)};f(vc,Fa);vc.prototype.componentName="chromecast";vc.prototype.onclick=function(a){a.stopImmediatePropagation();
this.sendNotification(kb.LAUNCH);return!1};var $c=function(){$c.__super__.constructor.call(this)};f($c,aa);$c.prototype.execute=function(a){this.facade.logger.debug("ChromeCastTogglePlayPauseCommand");this.facade.app.retrieveProxy(t.NAME);switch(this.config.getPlayState()){case H.ENDED:this.plugin.setCurrentTime(0);this.plugin.play();break;case H.PAUSED:case H.READY:this.plugin.play();break;case H.PLAYING:case H.WAITING:this.plugin.pause()}};var Ja=function(){Ja.__super__.constructor.call(this)};
f(Ja,Pa);Ja.prototype.componentName="chromecast-controls";Ja.prototype.message=null;Ja.prototype.messageContainer=null;Ja.prototype.button=null;Ja.prototype.captioningActive=!1;Ja.prototype.initializeNotifier=function(a){Ja.__super__.initializeNotifier.call(this,a);this.viewComponent.innerHTML="";this.messageContainer=this.create("chromecast-message-container");this.message=this.createText("chromecast-message",this.localizationManager.getString("MSG_CHROMECAST_MESSAGE"),this.messageContainer);this.button=
new vc};Ja.prototype.onRegister=function(){var a;this.facade.registerMediator(this.button);Ja.__super__.onRegister.call(this);a=new qb(this.controlBar);a.setDisabled(!0);this.facade.registerMediator(a);this.sendNotification(d.ADD_CONTROL,this.button.getViewComponent());this.viewComponent.getElementsByClassName("akamai-caption akamai-button").length||!0!==this.facade.app.parent.captioning.config.enabled||(a=new Fa(this.localizationManager.getString(r.MSG_CC),this.viewComponent.getElementsByClassName("akamai-control-bar")[0],
null,"caption",this.captionButtonClick.bind(this)),this.facade.registerMediator(a),this.captionButton=a.getViewComponent(),this.sendNotification(d.ADD_CONTROL,this.captionButton),this.sendNotification(d.ADD_CONTROL_STATE,"cc-enabled"))};Ja.prototype.captionButtonClick=function(){this.captioningActive=!this.captioningActive;try{this.facade.app.parent.chromecast.postMessage({type:"captioning.visibilitychange",details:{visibility:this.captioningActive}})}catch(a){this.facade.logger.error("[AMP Chromecast Captioning Error]",
a)}this.sendNotification(this.captioningActive?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE,"cc-active")};var ec=function(){ec.__super__.constructor.call(this)};f(ec,aa);ec.prototype.execute=function(a){var b,c;b=a.getBody().target;a=this.facade.app.getAPI();"chromecast"===b?a.pause():"amp"===b&&(b=this.config.getCurrentTime(),c=a.getDuration(),0!==b&&(b!==c&&(this.seekedHandler=this.seeked.bind(this),a.addEventListener("seeked",this.seekedHandler)),this.facade.app.getAPI().setCurrentTime(b)))};
ec.prototype.seeked=function(a){a=this.facade.app.getAPI();a.removeEventListener("seeked",this.seekedHandler);a.play()};ec.prototype.seekedHandler=null;var la=function(a,b){la.__super__.constructor.call(this,a,b)};f(la,Z);la.NAME="ChromeCastPlugin";la.prototype.moduleName="chromecast";la.prototype.createModel=function(){this.isSender()?this.registerProxy(new s(this.config)):this.isReceiver()&&this.registerProxy(new A(this.config))};la.prototype.createController=function(){this.isSender()?(this.registerCommand(d.PLAYBACK_TARGET_CHANGE,
ec),this.registerCommand(kb.LAUNCH,Wc),this.registerCommand(fa.FEED_CHANGED,Xc),this.registerCommand(M.TOGGLE_PLAY_PAUSE,$c),this.registerCommand(M.SEEK,Zc),this.registerCommand(v.VISIBILITY_CHANGE,he),this.registerCommand(v.SETTINGS_CHANGE,ie)):(this.registerCommand(d.READY,je),this.registerCommand("adsbreakstart",ke))};la.prototype.createView=function(){this.isSender()?this.registerMediator(new wb):this.isReceiver()&&this.registerMediator(new Yc)};la.prototype.createAPI=function(){return new Qb(this)};
la.prototype.isSender=function(){return!this.isReceiver()&&/Chrome/.test(navigator.userAgent)};la.prototype.isReceiver=function(){return/CrKey/.test(navigator.userAgent)};la.prototype.listNotificationInterests=function(){return[d.READY,fa.LOAD_FEED,v.VISIBILITY_CHANGE,v.SETTINGS_CHANGE,"adsbreakstart"]};la.prototype.listNotificationEvents=function(){return la.__super__.listNotificationEvents.call(this).concat([kb.AVAILABILITY_CHANGE])};la.prototype.listNotificationPublications=function(){return la.__super__.listNotificationPublications.apply(this,
arguments).concat([d.INITIALIZED,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,d.PLAYBACK_TARGET_CHANGE,kb.AVAILABILITY_CHANGE])};u.registerPlugin("chromecast","html",la);var Rb=function(a,b){Rb.__super__.constructor.call(this,a,b)};f(Rb,la);Rb.NAME="ChromeCastFlashPlugin";Rb.prototype.createModel=function(){this.registerProxy(new s(this.config))};Rb.prototype.createController=function(){this.registerCommand(d.PLAYBACK_TARGET_CHANGE,ec);this.registerCommand(kb.LAUNCH,Wc);
this.registerCommand(fa.FEED_CHANGED,Xc);this.registerCommand(M.TOGGLE_PLAY_PAUSE,$c);this.registerCommand(M.SEEK,Zc)};Rb.prototype.createView=function(){this.registerMediator(new jb)};Rb.prototype.listNotificationInterests=function(){return[fa.FEED_CHANGED,d.CHANGE_MEDIA]};var s=function(a){this.messageBus=a.messageBus||"urn:x-cast:com.akamai.amp.cast";s.__super__.constructor.call(this,a.sender)};f(s,N);s.NAME=x.NAME;s.prototype.defaults={plugin:null,applicationID:"44B6E47D"};s.prototype.session=
null;s.prototype.media=null;s.prototype.messageBus=null;s.prototype.feed=null;s.prototype.playState=null;s.prototype.currentTime=null;s.prototype.duration=null;s.prototype.receiverAvailable=!1;s.prototype.getLoaded=function(){return this.loaded||null!=("undefined"!==typeof chrome&&null!==chrome?chrome.cast:void 0)};s.prototype.initialize=function(){var a,b=this;"undefined"!==typeof chrome&&null!==chrome&&null!=(a=chrome.cast)&&a.isAvailable?this.initializeCastApi():window.__onGCastApiAvailable=function(a,
d){!0===a?b.initializeCastApi():b.logError("cast load error",d)}};s.prototype.initializeCastApi=function(){var a;a=this.getConfigurationData().applicationID;a=new chrome.cast.SessionRequest(a);a=new chrome.cast.ApiConfig(a,this.sessionListener.bind(this),this.receiverListener.bind(this));chrome.cast.initialize(a,this.onInitSuccess.bind(this),this.onInitError.bind(this))};s.prototype.onInitSuccess=function(a){this.logEvent("init success",a)};s.prototype.onInitError=function(a){this.logError("init error",
a)};s.prototype.receiverListener=function(a){this.receiverAvailable="available"===a;this.sendNotification(kb.AVAILABILITY_CHANGE,this.receiverAvailable);this.logEvent("receiver "+(this.receiverAvailable?"found":"list empty"))};s.prototype.sessionListener=function(a){this.onRequestSessionSuccess(a);this.logEvent("session listener",a)};s.prototype.launch=function(){chrome.cast.requestSession(this.onRequestSessionSuccess.bind(this),this.onLaunchError.bind(this))};s.prototype.send=function(a){this.session.sendMessage(this.messageBus,
a,this.onMessageSuccess.bind(this),this.onMessageError.bind(this))};s.prototype.onLaunchError=function(a){this.logError("launch error.",a)};s.prototype.onRequestSessionSuccess=function(a){this.logEvent("request session success.",a);this.session=a;this.session.addMessageListener(this.messageBus,this.onMessage.bind(this));this.session.addUpdateListener(this.onUpdate.bind(this));a=this.facade.app.retrieveProxy(l.NAME);this.loadMedia(a.getCurrentTime());this.sendNotification(d.PLAYBACK_TARGET_CHANGE,
{target:"chromecast"})};s.prototype.onUpdate=function(a){a||this.sendNotification(d.PLAYBACK_TARGET_CHANGE,{target:"amp"})};s.prototype.onMessageSuccess=function(a){this.logEvent("message sent",a)};s.prototype.onMessageError=function(a){this.logError("message error",a)};s.prototype.onMessage=function(a,b){var c,e,f;b=JSON.parse(b);f=b.type;c=b.details;switch(f){case "playstatechange":this.playState=c.newState;this.sendNotification(d.CHANGE_PLAY_STATE,this.playState);break;case "timeupdate":this.currentTime=
c.currentTime;this.sendNotification(d.DISPLAY_TIME,{currentTime:this.currentTime,duration:this.duration});break;case "durationchange":0===c.duration||isNaN(c.duration)||(this.duration=c.duration,this.sendNotification(d.DURATION_CHANGE,this.duration));break;case "dispatchevent":e="player"===c.target?this.facade.app.parent:this.facade.app.parent[c.target],null!=e&&e.dispatchEvent(c.event)}"timeupdate"!==f&&this.logEvent("message from receiver",b);this.sendNotification(d.DISPATCH_EVENT,{type:"message",
message:b})};s.prototype.onStop=function(a){this.logEvent("stop");this.session.stop(this.onStopSuccess.bind(this),this.onStopError.bind(this))};s.prototype.onStopSuccess=function(a){this.logEvent("stop success",a)};s.prototype.onStopError=function(a){this.logError("stop error",a)};s.prototype.logEvent=function(a,b){null==a&&(a=b.type||"");this.facade.logger.log("[AMP CHROMECAST] "+a,b)};s.prototype.logError=function(a,b){this.facade.logger.error("[AMP CHROMECAST ERROR] "+a,b)};s.prototype.getPlayState=
function(){return this.playState};s.prototype.getFeed=function(){return this.feed};s.prototype.setFeed=function(a){this.feed!==a&&(this.feed=a,null!=this.session&&this.loadMedia())};s.prototype.loadMedia=function(a){var b,c,d,f;null==a&&(a=0);c=null!=(b=(new Pb).createFeed(this.getFeed()))?null!=(f=b.item)?f[0]:void 0:void 0;null!=c&&(b=function(a){return-1<xe.indexOf(a)?"maybe":""},d=h.selectSource(c.source,b),null!=d&&(b=this.getFeed(),b=null!=b?{feed:{data:b}}:{guid:c.guid,embed:c.embed,category:c.category,
medium:c.medium,scenes:c.scenes},f=new chrome.cast.media.GenericMediaMetadata,f.title=c.title,f.subtitle=c.description,f.image=c.poster,f.releaseDate=c.pubDate.toISOString(),d=new chrome.cast.media.MediaInfo(d.src,d.type),d.duration=c.duration,d.customData=b,d.metadata=f,c=new chrome.cast.media.LoadRequest(d),c.currentTime=a,this.session.loadMedia(c,this.onMediaDiscovered.bind(this),this.onMediaError.bind(this))))};s.prototype.onMediaDiscovered=function(a){this.media=a;this.media.addUpdateListener(this.onMediaStatusUpdate.bind(this))};
s.prototype.onMediaStatusUpdate=function(a){this.logEvent("mediastatusupdate",a)};s.prototype.onMediaError=function(a){this.logError("media error",a)};s.prototype.play=function(){this.media.play()};s.prototype.pause=function(){this.media.pause()};s.prototype.setCurrentTime=function(a){var b;b=new chrome.cast.media.SeekRequest;b.currentTime=a;this.media.seek(b)};s.prototype.getCurrentTime=function(){return this.currentTime};s.prototype.isReceiverAvailable=function(){return this.receiverAvailable};
var Sa=function(a,b){Sa.__super__.constructor.call(this,a,b);this.plugin=new Rb(this.player,b);a.registerModule(this.plugin)};f(Sa,J);Sa.NAME="ChromeCastWrapper";Sa.prototype.buttonId="chromecastBtn";Sa.prototype.plugin=null;Sa.prototype.getAPI=function(){return this.plugin.getAPI()};Sa.prototype.createXML=function(a){if(!1===this.hasControls(a))return a;null==this.getControls(a)[this.buttonId]&&this.createElement(a,this.buttonId);return a};Sa.prototype.listNotificationInterests=function(){return Sa.__super__.listNotificationInterests.call(this).concat([q.ELEMENT_EVENT,
q.LOAD_STATE_READY,q.LOAD_STATE_LOADING,q.APPLICATION_STATE_CHANGE,kb.AVAILABILITY_CHANGE])};Sa.prototype.handleNotification=function(a){var b,c;Sa.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case q.ELEMENT_EVENT:"click"===a.type&&a.element===this.buttonId&&this.plugin.sendNotification(kb.LAUNCH);break;case kb.AVAILABILITY_CHANGE:null!=(null!=(c=this.player.video)?c.setPlayerProperty:void 0)&&this.player.video.setPlayerProperty(this.buttonId,{visible:a});break;
case q.APPLICATION_STATE_CHANGE:case q.LOAD_STATE_READY:case q.LOAD_STATE_LOADING:(b=this.plugin.getAPI().isReceiverAvailable())&&this.player.video.setPlayerProperty(this.buttonId,{state:1}),this.player.video.setPlayerProperty(this.buttonId,{visible:b})}};u.registerPlugin("chromecast","flash",Sa);var kb={LAUNCH:"launch",AVAILABILITY_CHANGE:"availabilitychange"},Qb=function(a){var b;Qb.__super__.constructor.call(this,a);b=a.retrieveProxy(s.NAME);null!=b&&(this.postMessage=b.send.bind(b),a.isSender()?
(this.play=b.play.bind(b),this.pause=b.pause.bind(b),this.setCurrentTime=b.setCurrentTime.bind(b),this.isReceiverAvailable=b.isReceiverAvailable.bind(b),this.getSession=function(){return b.session},this.getMedia=function(){return b.media}):(this.getMediaManager=function(){return b.mediaManager},this.getCastReceiverManager=function(){return b.castReceiverManager},this.getCastMessageBus=function(){return b.castMessageBus},this.getCastChannel=function(){return b.castChannel}))};f(Qb,Cb);Qb.prototype.play=
function(){};Qb.prototype.pause=function(){};Qb.prototype.setCurrentTime=function(a){};Qb.prototype.isReceiverAvailable=function(){};Qb.prototype.postMessage=function(a){};var Sb=function(a,b){Sb.__super__.constructor.call(this,a,b)};f(Sb,Z);Sb.NAME="DASHPlugin";Sb.prototype.moduleName="dash";Sb.prototype.createModel=function(){this.registerProxy(new uc(this.config))};Sb.prototype.registered=function(){this.app.registerCommand(d.CHANGE_DISPLAY_STATE,ge);Sb.__super__.registered.call(this)};u.registerPlugin("dash",
"html",Sb);var wc=function(a,b){wc.__super__.constructor.call(this,a,b)};f(wc,Z);wc.NAME="ControlPlugin";wc.prototype.listNotificationPublications=function(){return wc.__super__.listNotificationPublications.apply(this,arguments).concat([d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE])};var Ca=function(a){Ca.__super__.constructor.call(this,null,null,null,a,onclick)};f(Ca,Fa);Ca.prototype.panel=null;Ca.prototype.timeout=null;Ca.prototype.closePanelDelayed=null;Ca.prototype.onRegister=
function(){this.closePanelDelayed=this.delayedClosePanel.bind(this);"desktop"===h.getDevice()?(this.onmouseleave=this.closePanelDelayed,this.onmouseenter=this.openPanel,this.onclick=this.clickHandler):this.onclick=this.togglePanel;Ca.__super__.onRegister.call(this);this.sendNotification(d.ADD_CONTROL_STATE,""+this.componentName+"-enabled");this.sendNotification(d.ADD_CONTROL,this.viewComponent)};Ca.prototype.openPanel=function(){clearTimeout(this.timeout);this.sendNotification(ia.OPEN_PANEL,this.panel);
this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed)};Ca.prototype.closePanel=function(){h.isMouseOverElement(this.panel.viewComponent)||h.isMouseOverElement(this.viewComponent)||this.facade.app.retrieveProxy(t.NAME).getIsUserActive()||(this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed),this.sendNotification(ia.CLOSE_PANEL,this.panel))};Ca.prototype.delayedClosePanel=function(){this.timeout=setTimeout(this.closePanel.bind(this),350)};Ca.prototype.togglePanel=
function(){this.sendNotification(ia.TOGGLE_PANEL,this.panel)};Ca.prototype.clickPanel=function(){};var fc=function(a){fc.__super__.constructor.call(this,a,null,null,null)};f(fc,I);fc.prototype.componentType="panel";fc.prototype.control=null;fc.prototype.onRegister=function(){fc.__super__.onRegister.call(this);this.sendNotification(ia.ADD_PANEL,this)};var Tb=function(a){Tb.__super__.constructor.call(this,a)};f(Tb,N);Tb.NAME=x.NAME;Tb.prototype.loaded=!0;Tb.prototype.controlName=null;Tb.prototype.getControlName=
function(){return this.controlName};Tb.prototype.setControlName=function(a){return this.controlName=a};var gc=function(a){gc.__super__.constructor.call(this,a)};f(gc,Tb);gc.NAME=x.NAME;gc.prototype.hidden=!0;gc.prototype.getHidden=function(){return this.hidden};gc.prototype.setHidden=function(a){return this.hidden=a};var hc=function(a){hc.__super__.constructor.call(this,a)};f(hc,gc);hc.NAME=x.NAME;hc.prototype.controlName="volume";hc.prototype.defaults={direction:"vertical"};hc.prototype.getDirection=
function(){return this.data.direction};var le=function(a,b){null==b&&(b={});le.__super__.constructor.call(this,a,b)};f(le,J);le.NAME="VolumePanelWrapper";u.registerPlugin("volumepanel","flash",le);var me=function(a){me.__super__.constructor.call(this,a)};f(me,Ca);me.prototype.clickHandler=function(){this.sendNotification(d.TOGGLE_MUTED)};var Ub=function(a,b){Ub.__super__.constructor.call(this,a,b)};f(Ub,C);Ub.prototype.componentName="volume";Ub.prototype.setValue=function(a){Ub.__super__.setValue.call(this,
a);this.sendNotification(d.CHANGE_VOLUME,a);this.sendNotification(Xd.UPDATE_SETTINGS,{volume:a});return a};Ub.prototype.listNotificationInterests=function(){return[d.VOLUME_CHANGE,d.READY]};Ub.prototype.handleNotification=function(a){switch(a.getName()){case d.READY:this.updateValue(this.facade.app.retrieveProxy(l.NAME).getVolume());break;case d.VOLUME_CHANGE:this.updateValue(a.getBody())}};var ga=function(){ga.__super__.constructor.call(this);this.controls={}};f(ga,cb);ga.prototype.panel=null;ga.prototype.control=
null;ga.prototype.separator=null;ga.prototype.controls=null;ga.prototype.labels=null;ga.prototype.closed=!0;ga.prototype.panelClass=fc;ga.prototype.controlClass=Ca;ga.prototype.onRegister=function(){this.panel=this.createPanel(this.componentName);this.control=this.createControl(this.componentName);this.separator=this.createSeparator(this.componentName);this.panel.control=this.control;this.control.panel=this.panel;null==this.labels&&(this.labels={});this.createPanelControls(name)};ga.prototype.createControl=
function(a){a=new this.controlClass(a);this.facade.registerMediator(a);return a};ga.prototype.createPanel=function(a){a=new this.panelClass(a);this.facade.registerMediator(a);return a};ga.prototype.createSeparator=function(a){return this.create(["separator","icon"],this.panel)};ga.prototype.createPanelControls=function(a){var b,c,d;a=this.plugin.getConfigurationData();for(b in a)c=a[b],!0===c&&(this.controls[b]=this.addPanelControl(new Fa(this.localizationManager.getString(this.labels[b]),null,null,
b,null!=(d=this.panelButtonClickHandler)?"function"===typeof d.bind?d.bind(this,b):void 0:void 0)))};ga.prototype.addPanelControl=function(a){this.facade.registerMediator(a);this.panel.getViewComponent().appendChild(a.getViewComponent());return a};ga.prototype.panelButtonClickHandler=function(){this.sendNotification(ia.CLOSE_PANEL,this.panel)};var Da=function(){Da.__super__.constructor.call(this)};f(Da,ga);Da.prototype.componentName="volume";Da.prototype.slider=null;Da.prototype.level=null;Da.prototype.controlClass=
me;Da.prototype.onRegister=function(){Da.__super__.onRegister.call(this);this.slider=new Ub(this.panel,this.plugin.getDirection());this.facade.registerMediator(this.slider)};Da.prototype.updateVolumeButton=function(a){a=Math.ceil(10*a);a!==this.level&&(null!=this.level&&this.sendNotification(d.REMOVE_CONTROL_STATE,"volume-"+this.level),this.level=a,this.sendNotification(d.ADD_CONTROL_STATE,"volume-"+this.level))};Da.prototype.listNotificationInterests=function(){return Da.__super__.listNotificationInterests.apply(this,
arguments).concat([d.VOLUME_CHANGE])};Da.prototype.handleNotification=function(a){Da.__super__.handleNotification.call(this,a);switch(a.getName()){case d.VOLUME_CHANGE:this.updateVolumeButton(a.body)}};var xc=function(a,b){xc.__super__.constructor.call(this,a,b)};f(xc,wc);xc.NAME="ControlPanelPlugin";xc.prototype.listNotificationPublications=function(){var a,b;return xc.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in ia)b=ia[a],c.push(b);return c}())};var Ea=
function(a,b){Ea.__super__.constructor.call(this,a,b)};f(Ea,xc);Ea.NAME="VolumePanelPlugin";Ea.prototype.moduleName="volumepanel";Ea.prototype.isVolumeSettable=function(){var a,b,c,d;c=!1;d=this.app.getVideo();b=d.volume;a=Math.random();d.volume=a;d.volume===a&&(c=!0);d.volume=b;return c};Ea.prototype.initialize=function(){this.isVolumeSettable()&&Ea.__super__.initialize.call(this)};Ea.prototype.createModel=function(){this.registerProxy(new hc(this.config))};Ea.prototype.createView=function(){this.isVolumeSettable()&&
this.registerMediator(new Da)};Ea.prototype.listNotificationPublications=function(){return Ea.__super__.listNotificationPublications.apply(this,arguments).concat([d.CHANGE_VOLUME,d.TOGGLE_MUTED,Xd.UPDATE_SETTINGS])};Ea.prototype.listNotificationInterests=function(){return Ea.__super__.listNotificationInterests.apply(this,arguments).concat([d.VOLUME_CHANGE,d.READY])};u.registerPlugin("volumepanel","html",Ea);ne.akamai={amp:{AMP:u,utils:{Utils:h,QueryString:bc,Clock:ab,Alarm:ac,Logger:G}}};window.AKAMAI_MEDIA_PLAYER.saveSDK("AMP v4.10.0.0004",
ne)}window.AKAMAI_MEDIA_PLAYER.setVersion("AMP v4.10.0.0004")})();